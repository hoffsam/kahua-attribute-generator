<App Extends="kahua_AEC_SubmittalItem" Name="enbridge_AEC_SubmittalItem_workflow_extension" DataScope="Default" AppScope="Partition" Version="1814" VersionLabel="1.0" Description="[AppDesc]" Label="[AppLabel]" PermissionMode="RevokeByDefault" IsConfigurable="true" IsShareable="true" CultureCode="en">
  <AppPublishing ProductType="App" VisibilityType="Private" PriceType="Unknown" RenewalPeriod="12">
    <ProductInfo DeliveryType="InstallApp">
      <Delivery>
        <Installs />
        <Licenses />
      </Delivery>
      <Images />
      <Points />
      <Languages />
      <Categories />
      <Requirements />
      <LifecycleStages />
    </ProductInfo>
  </AppPublishing>
  <Roles>
    <Role Name="Submitter" Label="[AppRoleSubmitterLabel]" Type="Application">
      <EntityActions />
      <EntityActionLists />
      <EntityViews />
      <Operations>
        <Operation Command="Grant" Ref="Add" />
        <Operation Command="Grant" Ref="Edit" />
        <Operation Command="Grant" Ref="View" />
        <Operation Command="Grant" Ref="OpenApp" />
        <Operation Command="Grant" Ref="Send" />
      </Operations>
      <RoleDependencies>
        <RoleDependency AppLabel="" Ref="kahua_CompanyManager.Referencer" RoleLabel="" />
        <RoleDependency AppLabel="" Ref="kahua_GroupManagement.Referencer" RoleLabel="" />
        <RoleDependency AppLabel="" Ref="kahua_Location.Referencer" RoleLabel="" />
        <RoleDependency AppLabel="" Ref="kahua_PeopleManager.Referencer" RoleLabel="" />
      </RoleDependencies>
    </Role>
    <Role Name="Reviewer" Label="[FieldReviewerLabel]" Type="Application">
      <EntityActions />
      <EntityActionLists />
      <EntityViews />
      <Operations>
        <Operation Command="Grant" Ref="Send" />
        <Operation Command="Grant" Ref="View" />
        <Operation Command="Grant" Ref="OpenApp" />
      </Operations>
    </Role>
  </Roles>
  <App.Features>
    <Hub Def="Default" />
  </App.Features>
  <App.HubDefs>
    <HubDef Name="Default" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" DefaultNewStep="New" Label="[BasicWorkflowDefLabel]" SendSubject="[SendSubjectLabel]" SharePermission.AnyOf="kahua_AEC_SubmittalItem.Share" CreateReportPermission.AnyOf="kahua_AEC_SubmittalItem.Configure" SendPermission.AnyOf="kahua_AEC_SubmittalItem.Send" EditPermission.AnyOf="kahua_AEC_SubmittalItem.Edit" ViewPermission.AnyOf="kahua_AEC_SubmittalItem.View" ProcessPermission.AnyOf="None" DeletePermission.AnyOf="kahua_AEC_SubmittalItem.Remove" HistoryPermission.AnyOf="kahua_AEC_SubmittalItem.View" ExportPermission.AnyOf="None" ImportPermission.AnyOf="None" Parenting.ParentAttribute="SubmittalPackage" Parenting.LinkInParent="true" Parenting.ParentLinkAttribute="Items" Parenting.MatchHubDefEntityDef="true" ChildInsert.DefaultStep="New">
      <HubDef.LogActions DeleteEnabled="False">
        <LogActionGroup Label="[MenuGroupMoreLabelCapitalized]" Name="More" IsItemsAction="False">
          <LogActionGroup.LogActions>
            <Form Name="ImportSubmittalItemsAction" Label="[MenuImport]" IsItemsAction="False" FormName="ImportSubmittalItemsForm" MinimumSelections="-1" Actors="Everyone" Permission.AnyOf="kahua_AEC_SubmittalItem.Import" />
            <Export Name="Export" Label="[MenuExport]" IsItemsAction="False" ImportDef="SubmittalItemsImportDef" Actors="Everyone" Permission.AnyOf="kahua_AEC_SubmittalItem.Export" />
          </LogActionGroup.LogActions>
        </LogActionGroup>
      </HubDef.LogActions>
      <HubDef.Actors>
        <AttributeActor Name="SubmittalCoordinator" AttributeName="SubmittalCoordinator" />
        <AttributeActor Name="SubmittingVendor" AttributeName="SubmittingVendor" />
        <AttributeActor Name="OfficialReviewer" AttributeName="OfficialReviewer" />
        <AttributeActor Name="HubParentOfficialReviewer" AttributeName="HubParent.OfficialReviewer" />
        <AttributeActor Name="ConsultantReviewer" AttributeName="Reviewers.Reviewer" />
        <AttributeActor Name="ResponseDistribution" AttributeName="ResponseDistribution" />
        <AttributeActor Name="CurrentOfficial" AttributeName="CurrentOfficial" />
        <RoleActor Name="AdministratorRole" RoleName="Administrator" />
        <RoleActor Name="ModeratorRole" RoleName="Moderator" />
        <RoleActor Name="ObserverRole" RoleName="Observer" />
        <RoleActor Name="ContributorRole" RoleName="Contributor" />
        <AttributeActor Name="CurrentReviewers" AttributeName="Reviewers.Reviewer">
          <AttributeActor.Filter Path="Reviewers">
            <Filter.Condition>
              <Data Path="Order" Type="EqualTo" ValuePath="Parent.CurrentSequentialReviewNumber" />
            </Filter.Condition>
          </AttributeActor.Filter>
        </AttributeActor>
        <AttributeActor Name="ConsultantReviewerNotSent" AttributeName="Reviewers.Reviewer">
          <AttributeActor.Filter Path="Reviewers">
            <Filter.Condition>
              <Data Path="ReviewerDateSent" Type="HasNoValue" />
            </Filter.Condition>
          </AttributeActor.Filter>
        </AttributeActor>
        <AttributeActor Name="ConsultantReviewerNotResponded" AttributeName="Reviewers.Reviewer">
          <AttributeActor.Filter Path="Reviewers">
            <Filter.Condition>
              <Data Path="ReviewerResponseDate" Type="HasNoValue" />
            </Filter.Condition>
          </AttributeActor.Filter>
        </AttributeActor>
        <GroupActor Name="QualityGroupActor" GroupName="Quality" />
        <GroupActor Name="CentralAdminGroupActor" GroupName="Central Admin" />
        <GroupActor Name="PIMGroupActor" GroupName="PIM" />
      </HubDef.Actors>
      <HubDef.Functions>
        <Function Name="SyncSubmittingVendor">
          <Function.Directives>
            <Map DisableAutoMap="True">
              <Map.Assignments>
                <Empty To="SubmittingVendor" />
              </Map.Assignments>
              <Map.Condition>
                <AllOf>
                  <Data Path="SubmittalPackage.SubmittingVendor" Type="HasNoValue" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="ClearConsultantReviewers">
          <Function.Directives>
            <Map DisableAutoMap="True">
              <Map.Assignments>
                <Empty To="Reviewers" />
              </Map.Assignments>
              <Map.Condition>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="ProcessResponseDueDates">
          <Function.Directives>
            <Variables>
              <Data Name="varOfficialResponseDateCalculated" Value="0" />
              <Data Name="varOfficialResponseDateCalculated" Value="1">
                <Data.Condition>
                  <Data Path="ResponseDueDate" Type="HasNoValue" />
                </Data.Condition>
              </Data>
            </Variables>
            <!-- Step 1 - Validate manually entered Official Reviewer Response Due Date is in the future -->
            <Assertion>
              <Assertion.Variables>
                <Data Name="ToDay" Value="{date:usercurrent}" />
              </Assertion.Variables>
              <Assertion.Asserts>
                <Assert Message="[Assertion_ResponseDueDateMustBeTheFuture]">
                  <Assert.Condition>
                    <Data Type="GreaterThanOrEqualTo" Path="ResponseDueDate" ValueVariable="ToDay" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
              <Assertion.Condition>
                <Data Path="ResponseDueDate" Type="HasValue" />
              </Assertion.Condition>
            </Assertion>
            <!-- Step 2 - If required, calculate the Official Reviewer Response Due Date based on Review Period and Calendar settings -->
            <Variables>
              <Variables.Condition>
                <Data Path="ReviewPeriod" Type="HasValue" />
              </Variables.Condition>
              <OffsetDate Name="OfficialDueDateOfficeDays" Offset="{ReviewPeriod}" OffsetType="Day" CalendarType="OfficeDays" Current.Date="True" />
              <OffsetDate Name="OfficialDueDateJobSiteDays" Offset="{ReviewPeriod}" OffsetType="Day" CalendarType="WorkDays" Current.Date="True" />
              <OffsetDate Name="OfficialDueDateCalendarDays" Offset="{ReviewPeriod}" OffsetType="Day" CalendarType="Default" Current.Date="True" />
            </Variables>
            <Map Direction="None">
              <Map.Mappings>
                <Mapping FromType="Variable" From="OfficialDueDateOfficeDays" To="ResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="OfficialReviewPeriodCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="OfficialDueDateJobSiteDays" To="ResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="OfficialReviewPeriodCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="OfficialDueDateCalendarDays" To="ResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="OfficialReviewPeriodCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
              <Map.Condition>
                <AllOf>
                  <Data Path="ReviewPeriod" Type="HasValue" />
                  <Data Path="ResponseDueDate" Type="HasNoValue" />
                </AllOf>
              </Map.Condition>
            </Map>
            <!-- Step 3a - Validate manually entered Owner Rep Response Due Date is before the Official Reviewer Response Due Date -->
            <!-- Step 3a1 - Official Reviewer Response Due Date was manually entered -->
            <!-- Step 3a2 - Official Reviewer Response Due Date was calculated -->
            <!-- Step 3b - Validate manually entered Owner Rep Response Due Date is in the future -->
            <!-- Step 4 - If required, calculate the Owner Rep Response Due Date based on Review Period and Calendar settings -->
            <!-- Step 5 - Validate calculated Owner Rep Response Due Date is before the Official Reviewer Response Due Date -->
            <!-- Step 5a - Official Reviewer Response Due Date was manually entered -->
            <!-- Step 5b - Official Reviewer Response Due Date was calculated -->
            <!-- Step 6a - Validate manually entered Consultant Response Due Date is before the Official Reviewer Response Due Date-->
            <!-- Step 6a1 - Official Reviewer Response Due Date was manually entered -->
            <Assertion Path="Reviewers">
              <Assertion.Asserts>
                <Assert Message="[Assertion_Manual_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialManual]">
                  <Assert.Condition>
                    <Data Type="LessThanOrEqualTo" Path="ReviewerResponseDueDate" ValuePath="Parent.ResponseDueDate" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
              <Assertion.Condition>
                <AllOf>
                  <Data Path="ResponseDueDate" Type="HasValue" />
                  <!--<Data Path="ReviewerResponseDueDate" Type="HasValue" />-->
                  <Variable Name="varOfficialResponseDateCalculated" Type="EqualTo" Value="0" />
                </AllOf>
              </Assertion.Condition>
            </Assertion>
            <!-- Step 6a2 - Official Reviewer Response Due Date was calculated -->
            <Assertion Path="Reviewers">
              <Assertion.Asserts>
                <Assert Message="[Assertion_Manual_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialCalc]">
                  <Assert.Condition>
                    <Data Type="LessThanOrEqualTo" Path="ReviewerResponseDueDate" ValuePath="Parent.ResponseDueDate" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
              <Assertion.Condition>
                <AllOf>
                  <Data Path="ResponseDueDate" Type="HasValue" />
                  <!--<Data Path="ReviewerResponseDueDate" Type="HasValue" />-->
                  <Variable Name="varOfficialResponseDateCalculated" Type="EqualTo" Value="1" />
                </AllOf>
              </Assertion.Condition>
            </Assertion>
            <!-- Step 6b - Validate manually entered Consultant Response Due Date is in the future -->
            <Assertion Path="Reviewers">
              <Assertion.Variables>
                <Data Name="ToDay" Value="{date:usercurrent}" />
              </Assertion.Variables>
              <Assertion.Asserts>
                <Assert Message="[Assertion_SecondaryDateDueMustBeTheFuture]">
                  <Assert.Condition>
                    <Data Type="GreaterThanOrEqualTo" Path="ReviewerResponseDueDate" ValueVariable="ToDay" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
            <!-- Step 7 - If required, calculate the Consultant Response Due Date based on Review Period and Calendar settings -->
            <Variables>
              <Variables.Condition>
                <Data Path="ConsultantReviewPeriod" Type="HasValue" />
              </Variables.Condition>
              <OffsetDate Name="ConsultantDueDateOfficeDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="OfficeDays" Current.Date="True" />
              <OffsetDate Name="ConsultantDueDateJobSiteDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="WorkDays" Current.Date="True" />
              <OffsetDate Name="ConsultantDueDateCalendarDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="Default" Current.Date="True" />
            </Variables>
            <Map ToPath="Reviewers" Direction="None">
              <Map.Mappings>
                <Mapping FromType="Variable" From="ConsultantDueDateOfficeDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="ConsultantDueDateJobSiteDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="ConsultantDueDateCalendarDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
              <Map.Condition>
                <AllOf>
                  <Data Path="ConsultantReviewPeriod" Type="HasValue" />
                  <Data Type="EqualTo" Path="AutosendToConsultants" Value="True" />
                  <Data Type="NotEqualTo" Path="IsSequentialReview" Value="True" />
                </AllOf>
              </Map.Condition>
            </Map>
            <!-- Step 8 - Validate calculated Consultant Response Due Date is before the Official Reviewer Response Due Date -->
            <!-- Step 8a - Official Reviewer Response Due Date was manually entered -->
            <Assertion Path="Reviewers">
              <Assertion.Asserts>
                <Assert Message="[Assertion_Calculated_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialManual]">
                  <Assert.Condition>
                    <Data Type="LessThanOrEqualTo" Path="ReviewerResponseDueDate" ValuePath="Parent.ResponseDueDate" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
              <Assertion.Condition>
                <AllOf>
                  <Data Path="ResponseDueDate" Type="HasValue" />
                  <!--<Data Path="ReviewerResponseDueDate" Type="HasValue" />-->
                  <Variable Name="varOfficialResponseDateCalculated" Type="EqualTo" Value="0" />
                </AllOf>
              </Assertion.Condition>
            </Assertion>
            <!-- Step 8b - Official Reviewer Response Due Date was calculated -->
            <Assertion Path="Reviewers">
              <Assertion.Asserts>
                <Assert Message="[Assertion_Calculated_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialCalc]">
                  <Assert.Condition>
                    <Data Type="LessThanOrEqualTo" Path="ReviewerResponseDueDate" ValuePath="Parent.ResponseDueDate" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
              <Assertion.Condition>
                <AllOf>
                  <Data Path="ResponseDueDate" Type="HasValue" />
                  <!--<Data Path="ReviewerResponseDueDate" Type="HasValue" />-->
                  <Variable Name="varOfficialResponseDateCalculated" Type="EqualTo" Value="1" />
                </AllOf>
              </Assertion.Condition>
            </Assertion>
          </Function.Directives>
        </Function>
        <Function Name="ProcessConsultantDueDate">
          <Function.Directives>
            <!-- Step 1 - Validate manually entered Consultant Response Due Date is before the Official Reviewer Response Due Date (No Longer Required) -->
            <!-- Step 2 - Validate manually entered Consultant Response Due Date is in the future -->
            <Assertion Path="Reviewers">
              <Assertion.Variables>
                <Data Name="ToDay" Value="{date:usercurrent}" />
              </Assertion.Variables>
              <Assertion.Asserts>
                <Assert Message="[Assertion_SecondaryDateDueMustBeTheFuture]">
                  <Assert.Condition>
                    <Data Type="GreaterThanOrEqualTo" Path="ReviewerResponseDueDate" ValueVariable="ToDay" />
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
            <!-- Step 3 - If required, calculate the Consultant Response Due Date based on Review Period and Calendar settings -->
            <Variables>
              <Variables.Condition>
                <Data Path="ConsultantReviewPeriod" Type="HasValue" />
              </Variables.Condition>
              <OffsetDate Name="ConsultantDueDateOfficeDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="OfficeDays" Current.Date="True" />
              <OffsetDate Name="ConsultantDueDateJobSiteDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="WorkDays" Current.Date="True" />
              <OffsetDate Name="ConsultantDueDateCalendarDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="Default" Current.Date="True" />
            </Variables>
            <Map ToPath="Reviewers" Direction="None">
              <Map.Mappings>
                <Mapping FromType="Variable" From="ConsultantDueDateOfficeDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="ConsultantDueDateJobSiteDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="ConsultantDueDateCalendarDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
              <Map.Condition>
                <Data Path="ConsultantReviewPeriod" Type="HasValue" />
              </Map.Condition>
            </Map>
            <!-- Step 4 - Validate calculated Consultant Response Due Date is before the Official Reviewer Response Due Date (No Longer Required) -->
          </Function.Directives>
        </Function>
        <Function Name="AddVendorSubmissionDueDate">
          <Function.Directives>
            <Variables>
              <Variables.Condition>
                <Data Path="VendorSubmissionPeriod" Type="HasValue" />
              </Variables.Condition>
              <OffsetDate Name="SubmissionDueDateOfficeDays" Offset="{VendorSubmissionPeriod}" OffsetType="Day" CalendarType="OfficeDays" Current.Date="True" />
              <OffsetDate Name="SubmissionDueDateJobSiteDays" Offset="{VendorSubmissionPeriod}" OffsetType="Day" CalendarType="WorkDays" Current.Date="True" />
              <OffsetDate Name="SubmissionDueDateCalendarDays" Offset="{VendorSubmissionPeriod}" OffsetType="Day" CalendarType="Default" Current.Date="True" />
            </Variables>
            <Map Direction="None">
              <Map.Mappings>
                <Mapping FromType="Variable" From="SubmissionDueDateOfficeDays" To="SubmissionDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="VendorSubmissionPeriodCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="SubmissionDueDateJobSiteDays" To="SubmissionDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="VendorSubmissionPeriodCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="SubmissionDueDateCalendarDays" To="SubmissionDueDate" AppliesWhen="Empty">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="VendorSubmissionPeriodCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
              <Map.Condition>
                <Data Path="VendorSubmissionPeriod" Type="HasValue" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="SyncWorkPackage">
          <Function.Directives>
            <Map DisableAutoMap="True">
              <Map.Mappings>
                <Mapping From="WorkPackage.IsSequentialReview" To="IsSequentialReview" />
              </Map.Mappings>
              <Map.Condition>
                <Data Path="WorkPackage" Type="HasValue" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <!-- copy non-entities from parent submittal package (queried cannot copy non-entities) -->
        <Function Name="SyncParentSubmittalPackage">
          <Function.Directives>
            <Map DisableAutoMap="True">
              <Map.Mappings>
                <Mapping From="SubmittalPackage.NotifyResponseDistribution" To="NotifyResponseDistribution" />
                <Mapping From="SubmittalPackage.NotifyResponseDistributionOnCompleted" To="NotifyResponseDistributionOnCompleted" />
                <Mapping From="SubmittalPackage.InstructionsToOfficial" To="InstructionsToOfficial">
                  <Mapping.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="InstructionsToOfficial" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Mapping.Condition>
                </Mapping>
                <Mapping From="SubmittalPackage.VendorSubmissionPeriod" To="VendorSubmissionPeriod">
                  <Mapping.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="VendorSubmissionPeriod" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Mapping.Condition>
                </Mapping>
                <Mapping From="SubmittalPackage.ReviewPeriod" To="ReviewPeriod">
                  <Mapping.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="ReviewPeriod" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Mapping.Condition>
                </Mapping>
                <Mapping From="SubmittalPackage.ConsultantReviewPeriod" To="ConsultantReviewPeriod">
                  <Mapping.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="ConsultantReviewPeriod" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
              <Map.Condition>
                <Data Path="SubmittalPackage" Type="HasValue" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="UpdateDaysInReview">
          <Function.Directives>
            <!-- If "Official Reviewer Response Date" is null,  calculate "Days in Review" as Today - " Date Submitted to Official Reviewer".   -->
            <Variables>
              <Variables.Condition>
                <Data Path="OfficialResponseDate" Type="HasNoValue" />
              </Variables.Condition>
              <DateDiff Name="DaysInReviewOfficeDays" Value="{DateSubmittedToOfficial}" To="{date:current}" CalendarType="OfficeDays" />
              <DateDiff Name="DaysInReviewJobSiteDays" Value="{DateSubmittedToOfficial}" To="{date:current}" CalendarType="WorkDays" />
              <DateDiff Name="DaysInReviewCalendarDays" Value="{DateSubmittedToOfficial}" To="{date:current}" CalendarType="Default" />
            </Variables>
            <!-- If "Official Reviewer Response Date" is not null, calculate "Days in Review" as "Official Reviewer Response Date" - "Date Submitted to Official Reviewer". -->
            <Variables>
              <Variables.Condition>
                <Data Path="OfficialResponseDate" Type="HasValue" />
              </Variables.Condition>
              <DateDiff Name="DaysInReviewOfficeDays" Value="{DateSubmittedToOfficial}" To="{OfficialResponseDate}" CalendarType="OfficeDays" />
              <DateDiff Name="DaysInReviewJobSiteDays" Value="{DateSubmittedToOfficial}" To="{OfficialResponseDate}" CalendarType="WorkDays" />
              <DateDiff Name="DaysInReviewCalendarDays" Value="{DateSubmittedToOfficial}" To="{OfficialResponseDate}" CalendarType="Default" />
            </Variables>
            <Map Direction="None">
              <Map.Mappings>
                <Mapping FromType="Variable" From="DaysInReviewOfficeDays" To="DaysInReview">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="DaysInReviewCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="DaysInReviewJobSiteDays" To="DaysInReview">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="DaysInReviewCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                  </Mapping.Condition>
                </Mapping>
                <Mapping FromType="Variable" From="DaysInReviewCalendarDays" To="DaysInReview">
                  <Mapping.Condition>
                    <Setting AppName="kahua_AEC_SubmittalItem" Name="DaysInReviewCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="AddTaskToAssignedTo">
          <Function.Directives>
            <Variables>
              <Entities Name="assignedTo" Path="HubRoot.AssignedTo" InvolveDisabled="True" AppendMode="True" Distinct="True" />
              <Entities Name="assignedTo" Path="Task_OriginalTo" InvolveDisabled="True" AppendMode="True" Distinct="True" />
            </Variables>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="assignedTo" To="AssignedTo" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="RemoveTaskFromAssignedTo">
          <Function.Directives>
            <Variables>
              <Data Name="taskContactId" Value="{HubTask.Participant.Id}" />
              <Entities Name="newAssignedTo" Path="HubRoot.AssignedTo">
                <Entities.Where>
                  <Data Path="Id" Type="NotEqualTo" ValueVariable="taskContactId" />
                </Entities.Where>
              </Entities>
              <!-- open child count is a workaround for parent task OnClose event incorrectly firing when child task is closed   -->
              <!-- that's also why there are extra EmptyAssignedTo calls after TaskClose calls  -->
              <Entities Name="openChildTasks" Path="HubTasks">
                <Entities.Where>
                  <Data Path="State" Type="EqualTo" Value="Open" />
                </Entities.Where>
              </Entities>
              <Count Name="openChildTaskCount" Entities="{variable:openChildTasks}" />
            </Variables>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
              <Map.Condition>
                <Variable Name="openChildTaskCount" Type="EqualTo" Value="0" />
              </Map.Condition>
            </Map>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="newAssignedTo" To="AssignedTo" />
              </Map.Mappings>
              <Map.Condition>
                <Variable Name="openChildTaskCount" Type="EqualTo" Value="0" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="RemoveChildTasksFromAssignedTo">
          <Function.Directives>
            <Variables>
              <Entities Name="newAssignedTo" EntityDef="kahua_PeopleManager.kahua_Contact" Id="0" InvolveDisabled="True" AppendMode="True" Distinct="True" />
            </Variables>
            <ItemsIterate Path="HubRoot.AssignedTo" VariableScope="Inherit">
              <ItemsIterate.Directives>
                <Variables>
                  <Data Name="currentAssignedToId" Value="{Id}" />
                  <Entities Name="assigneeTaskFound" Path="HubTasks">
                    <Entities.Where>
                      <Data Path="Participant.Id" Type="EqualTo" ValueVariable="currentAssignedToId" />
                    </Entities.Where>
                  </Entities>
                  <Count Name="tasksFound" Entities="{variable:assigneeTaskFound}" />
                  <Entities Name="newAssignedTo" Path="HubRoot.AssignedTo" InvolveDisabled="True" AppendMode="True" Distinct="True">
                    <Entities.Where>
                      <Data Path="Id" Type="EqualTo" Value="{variable:currentAssignedToId}" />
                    </Entities.Where>
                    <Entities.Condition>
                      <Variable Name="tasksFound" Type="EqualTo" Value="0" />
                    </Entities.Condition>
                  </Entities>
                </Variables>
              </ItemsIterate.Directives>
            </ItemsIterate>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
            </Map>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="newAssignedTo" To="AssignedTo" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="AddCurrentUserToAssignedTo">
          <Function.Directives>
            <Variables>
              <Entities Name="currentContactEntity" EntityDef="kahua_PeopleManager.kahua_Contact" Id="{contact:currentid}" />
              <Entities Name="assignedTo" Path="HubRoot.AssignedTo" InvolveDisabled="True" AppendMode="True" Distinct="True" />
              <Entities Name="assignedTo" InvolveDisabled="True" AppendMode="True" Distinct="True" Entity.Source="Variable" Entity.Variable="currentContactEntity" />
            </Variables>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="assignedTo" To="AssignedTo" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="RemoveCurrentUserFromAssignedTo">
          <Function.Directives>
            <Variables>
              <Data Name="currentContactId" Value="{contact:currentid}" />
              <Entities Name="assignedTo" Path="HubRoot.AssignedTo">
                <Entities.Where>
                  <Data Path="Id" Type="NotEqualTo" ValueVariable="currentContactId" />
                </Entities.Where>
              </Entities>
            </Variables>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
            </Map>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="assignedTo" To="AssignedTo" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="EmptyAssignedTo">
          <Function.Directives>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
              <Map.Condition>
                <Data Path="HubRoot" Type="HasValue" />
              </Map.Condition>
            </Map>
            <Map Direction="None">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
              <Map.Condition>
                <Data Path="AssignedTo" Type="HasValue" />
              </Map.Condition>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="RemoveSubmittalOfficialReviewerFromAssignedTo">
          <Function.Directives>
            <Variables>
              <Data Name="officialReviewerContactId" Value="{HubRoot.OfficialReviewer.Id}" />
              <Entities Name="assignedTo" Path="HubRoot.AssignedTo">
                <Entities.Where>
                  <Data Path="Id" Type="NotEqualTo" ValueVariable="officialReviewerContactId" />
                </Entities.Where>
              </Entities>
            </Variables>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Assignments>
                <Empty To="AssignedTo" />
              </Map.Assignments>
            </Map>
            <Map Direction="None" ToPath="HubRoot">
              <Map.Mappings>
                <Mapping FromType="Variable" From="assignedTo" To="AssignedTo" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="DefaultSubmittalCoordinator">
          <Function.Directives>
            <Map Direction="None" DisablePersistence="True">
              <Map.Mappings>
                <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
              </Map.Mappings>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="ClearValidation">
          <Function.Directives>
            <Map DisablePersistence="True">
              <Map.Assignments>
                <Empty To="QualityValidationReason" />
                <Empty To="QualityComment" />
              </Map.Assignments>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="ClearScope">
          <Function.Directives>
            <Map DisablePersistence="True">
              <Map.Assignments>
                <Empty To="Scope" />
              </Map.Assignments>
            </Map>
          </Function.Directives>
        </Function>
        <Function Name="ClearRecordBoxBarcode">
          <Function.Directives>
            <Map DisablePersistence="True">
              <Map.Condition>
                <Data Path="HardCopiesRequired" Type="NotEqualTo" Value="True" />
              </Map.Condition>
              <Map.Assignments>
                <Empty To="RecordBoxBarcode" />
              </Map.Assignments>
            </Map>
          </Function.Directives>
        </Function>
      </HubDef.Functions>
      <HubDef.PortableViews>
        <PortableView Name="SubmittalItemPortableView" Label="[SubmittalItemPortableViewLabel]" Usage="Message,View,Send" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" />
      </HubDef.PortableViews>
      <HubDef.Starts GroupName="[NewStartGroupLabel]">
        <Start Label="[StartConstructionLabel]" Step="StartConstruction" Actors="AdministratorRole,ModeratorRole,ContributorRole" Permission.AnyOf="kahua_AEC_SubmittalItem.Add" />
        <Start Label="[StartEngineeringLabel]" Step="StartEngineering" Actors="AdministratorRole,ModeratorRole,ContributorRole" Permission.AnyOf="kahua_AEC_SubmittalItem.Add" />
        <Start Label="[StartProcurementLabel]" Step="StartProcurement" Actors="AdministratorRole,ModeratorRole,ContributorRole" Permission.AnyOf="kahua_AEC_SubmittalItem.Add" />
        <Start Label="[StartCommissioningLabel]" Step="StartCommissioning" Actors="AdministratorRole,ModeratorRole,ContributorRole" Permission.AnyOf="kahua_AEC_SubmittalItem.Add" />
      </HubDef.Starts>
      <HubDef.LogDef FieldOptions.TitleField="[Number][Subject]" FieldOptions.DescriptionField="Status" FieldOptions.EnableFirstFieldLabel="True" FieldOptions.FirstField="ResponseDueDate" FieldOptions.EnableSecondFieldLabel="False" FieldOptions.SecondField="OfficialReviewer" FieldOptions.EnableThirdFieldLabel="True" FieldOptions.ThirdField="OfficialResponseDate">
        <LogDef.FieldDefs>
          <FieldDef Name="Number" Path="Number" DataTag="FieldNumberLabel" />
          <FieldDef Name="Revision" Path="Revision" DataTag="FieldRevisionLabel" />
          <FieldDef Name="Subject" Path="Subject" DataTag="FieldSubjectLabel" Edit.Path="Subject" />
          <FieldDef Name="SubmittalPackage" Path="SubmittalPackage" DataTag="FieldSubmittalPackageLabel" Edit.Path="SubmittalPackage" />
          <FieldDef Name="Status" Path="Status" DataTag="FieldStatusLabel" Edit.Path="Status" />
          <FieldDef Name="Response" DataTag="FieldResponseLabel" Path="Response" Edit.Path="Response" />
          <FieldDef Name="SubmittalCoordinator" Path="SubmittalCoordinator.ShortLabel" DataTag="FieldSubmittalCoordinatorLabel" Edit.Path="SubmittalCoordinator" />
          <FieldDef Name="SubmittingVendor" Path="SubmittingVendor.ShortLabel" DataTag="FieldSubmittingVendorLabel" IsSortable="True" IsResizable="True" IsGroupable="True" Edit.Path="SubmittingVendor" />
          <FieldDef Name="References" Path="OutwardReferences" Label="[FieldReferencesLabel]" />
          <FieldDef Name="AssignedTo" Path="AssignedTo" DataTag="FieldAssignedToLabel" />
          <FieldDef Name="Description" Path="Description" DataTag="FieldDescriptionLabel" Edit.Path="Description" />
          <FieldDef Name="Priority" DataTag="FieldPriorityLabel" Path="Priority" Edit.Path="Priority" />
          <!-- TODO: Why does TurnoverIndex break the manage views?-->
          <!--FieldDef Name="TurnoverIndex" DataTag="FieldTurnoverIndexLabel" Edit.Path="TurnoverIndex" /-->
          <FieldDef Name="Reason" Path="Reason" DataTag="FieldReasonLabel" Edit.Path="Reason" />
          <FieldDef Name="Location" DataTag="FieldLocationLabel" Path="Location" Edit.Path="Location" />
          <FieldDef Name="LinearLocation" DataTag="FieldLinearLocationLabel" Path="LinearLocation" Edit.Path="LinearLocation" />
          <FieldDef Name="VendorNotes" Path="VendorNotes" DataTag="FieldVendorNotesLabel" Edit.Path="VendorNotes" />
          <FieldDef Name="ResponseDistribution" Path="ResponseDistribution" DataTag="FieldResponseDistributionLabel" Edit.Path="ResponseDistribution" />
          <FieldDef Name="Notes" Path="Notes" DataTag="FieldNotesLabel" Edit.Path="Notes" />
          <FieldDef Name="QualityValidation" Path="QualityValidation" DataTag="FieldQualityValidationLabel" Edit.Path="QualityValidation" />
          <FieldDef Name="QualityValidationReason" Path="QualityValidationReason" DataTag="FieldQualityValidationReasonLabel" Edit.Path="QualityValidationReason" />
          <FieldDef Name="OfficialReviewer" Path="OfficialReviewer.ShortLabel" DataTag="FieldOfficialReviewerLabel" Edit.Path="OfficialReviewer" />
          <FieldDef Name="InstructionsToOfficial" Path="InstructionsToOfficial" DataTag="FieldInstructionsToOfficialLabel" Edit.Path="InstructionsToOfficial" />
          <FieldDef Name="ResponseNotes" Path="ResponseNotes" DataTag="FieldResponseNotesLabel" Edit.Path="ResponseNotes" />
          <FieldDef Name="ApprovedSubmittalRequiredBy" DataTag="FieldApprovedSubmittalRequiredByLabel" Path="ApprovedSubmittalRequiredBy" Edit.Path="ApprovedSubmittalRequiredBy" />
          <FieldDef Name="RequestedfromVendor" DataTag="FieldRequestedfromVendorLabel" Path="RequestedfromVendor" Edit.Path="RequestedfromVendor" />
          <FieldDef Name="SubmissionDueDate" DataTag="FieldSubmissionDueDateLabel" Path="SubmissionDueDate" Edit.Path="SubmissionDueDate" />
          <FieldDef Name="DateSubmittedbyVendor" DataTag="FieldDateSubmittedByVendorLabel" Path="DateSubmittedByVendor" Edit.Path="DateSubmittedByVendor" />
          <FieldDef Name="DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" Path="DateSubmittedToOfficial" Edit.Path="DateSubmittedToOfficial" />
          <FieldDef Name="ReviewPeriod" Path="ReviewPeriod" DataTag="FieldReviewPeriodLabel" Edit.Path="ReviewPeriod" />
          <FieldDef Name="DaysInReview" DataTag="FieldDaysInReviewLabel" Path="DaysInReview" Edit.Path="DaysInReview" />
          <FieldDef Name="OfficialResponseDate" Path="OfficialResponseDate" DataTag="FieldOfficialResponseDateLabel" Edit.Path="OfficialResponseDate" />
          <FieldDef Name="DateReturnedToVendor" Path="DateReturnedToVendor" DataTag="FieldDateReturnedToVendorLabel" Edit.Path="DateReturnedToVendor" />
          <FieldDef Name="DateCompleted" Path="DateCompleted" DataTag="FieldDateCompletedLabel" Edit.Path="DateCompleted" />
          <FieldDef Name="DateLastDistributed" Path="DateLastDistributed" DataTag="FieldDateLastDistributedLabel" />
          <FieldDef Name="CompletedPackageRevision" Path="CompletedPackageRevision" DataTag="FieldCompletedPackageRevisionLabel" Edit.Path="CompletedPackageRevision" />
          <FieldDef Name="ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" Path="ResponseDueDate" Edit.Path="ResponseDueDate" />
          <FieldDef Name="SubmittalRevision" Path="SubmittalPackage.Revision" DataTag="FieldSubmitalRevisionLabel" />
          <FieldDef Name="TrackItemsWithPackage" Path="SubmittalPackage.TrackItemsWithPackage" DataTag="FieldTrackItemsWithPackageLabel" />
          <FieldDef Name="InstructionsToReviewers" Path="InstructionsToReviewers" DataTag="FieldInstructionsToReviewersLabel" Edit.Path="InstructionsToReviewers" />
          <FieldDef Name="CurrentRevision" Path="CurrentRevision" DataTag="FieldCurrentRevisionLabel" Edit.Path="CurrentRevision" />
          <FieldDef Name="Created" Label="[AttributeCreatedDateTimeLabel]" Path="CreatedDateTime" />
          <FieldDef Name="CreatedBy" Label="[AttributeCreatedByLabel]" Path="CreatedBy" />
          <FieldDef Name="LastModified" Label="[AttributeModifiedDateTimeLabel]" Path="ModifiedDateTime" />
          <FieldDef Name="SubmittingVendorCompany" DataTag="FieldSubmittingVendorCompanyLabel" Path="SubmittingVendor.Company" />
          <FieldDef Name="AccessLevel" FieldType="AccessLevel" />
          <FieldDef Name="ConsultantReviewPeriod" Path="ConsultantReviewPeriod" IsSortable="True" DataTag="FieldConsultantReviewPeriodLabel" Edit.Path="ConsultantReviewPeriod" />
          <FieldDef Name="VendorSubmissionPeriod" DataTag="FieldVendorSubmissionPeriodLabel" Path="VendorSubmissionPeriod" IsSortable="True" Edit.Path="VendorSubmissionPeriod" />
          <FieldDef Name="Reviewers" DataTag="FieldConsultantReviewerLabel" Path="Reviewers.Reviewer" />
          <FieldDef Name="Comments" DataTag="FieldCommentsLabel" Path="Comments.Comment" />
          <FieldDef Name="WorkPackage" Path="WorkPackage" DataTag="FieldWorkPackageLabel" />
          <FieldDef Name="HardCopiesRequired" DataTag="FieldHardCopiesRequiredLabel" Path="HardCopiesRequired" Edit.Path="HardCopiesRequired" />
          <FieldDef Name="System" DataTag="FieldSystemLabel" Path="System" Edit.Path="System" />
          <FieldDef Name="Scope" DataTag="FieldScopeLabel" Path="Scope" Edit.Path="Scope" />
          <FieldDef Name="PurchaseOrderNumber" DataTag="FieldPurchaseOrderNumberLabel" Path="PurchaseOrderNumber" Edit.Path="PurchaseOrderNumber" />
          <FieldDef Name="MaterialRequisitionNumber" DataTag="FieldMaterialRequisitionNumberLabel" Path="MaterialRequisitionNumber" Edit.Path="MaterialRequisitionNumber" />
          <FieldDef Name="OracleRequisition" DataTag="FieldOracleRequisitionLabel" Path="OracleRequisition" Edit.Path="OracleRequisition" />
          <FieldDef Name="TurnoverIndex" DataTag="FieldTurnoverIndexLabel" Path="TurnoverIndex.SubCategoryRecordTypeLabel" />
          <FieldDef Name="TurnoverIndexCategory" DataTag="FieldTurnoverIndexCategoryLabel" Path="TurnoverIndexCategory" />
          <FieldDef Name="Asset" DataTag="FieldAssetLabel" Path="Asset" />
          <FieldDef Name="AssetType" DataTag="FieldAssetTypeLabel" Path="AssetType" />
        </LogDef.FieldDefs>
        <LogDef.FilterGroups>
          <PathValuesFilterGroup DataTag="FieldAssignedToLabel" Path="AssignedTo" />
          <PathValuesFilterGroup DataTag="FieldTurnoverIndexLabel" Path="TurnoverIndex" />
          <PathValuesFilterGroup Label="[AttributeCreatedByLabel]" Path="CreatedBy" />
          <PathValuesFilterGroup DataTag="FieldLocationLabel" Path="Location" />
          <PathValuesFilterGroup DataTag="FieldLinearLocationLabel" Path="LinearLocation" />
          <PathValuesFilterGroup DataTag="FieldOfficialReviewerLabel" Path="OfficialReviewer" />
          <PathValuesFilterGroup DataTag="FieldPriorityLabel" Path="Priority" />
          <PathValuesFilterGroup DataTag="FieldReasonLabel" Path="Reason" />
          <PathValuesFilterGroup DataTag="FieldResponseLabel" Path="Response" />
          <PathValuesFilterGroup DataTag="FieldStatusLabel" Path="Status" />
          <PathValuesFilterGroup DataTag="FieldSubmittalCoordinatorLabel" Path="SubmittalCoordinator" />
          <PathValuesFilterGroup DataTag="FieldSubmittingVendorLabel" Path="SubmittingVendor" />
          <PathValuesFilterGroup DataTag="TurnoverIndex" Path="TurnoverIndex" />
          <PathValuesFilterGroup DataTag="Scope" Path="Scope" />
          <PathValuesFilterGroup DataTag="FieldWorkPackageLabel" Path="WorkPackage" />
        </LogDef.FilterGroups>
      </HubDef.LogDef>
      <HubDef.Logs>
        <Log Name="Default" Label="[LogDefault]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalPackage" />
            <Field FieldDef="Status" />
            <Field FieldDef="Response" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="References" />
            <Field FieldDef="ResponseDueDate" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="OfficialResponseDate" />
          </Log.Fields>
        </Log>
        <Log Name="PackageImport" Label="[LogSubmittalItemsWithDescription]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="Description" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="References" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="InstructionsToOfficial" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="Location" />
            <Field FieldDef="ResponseDistribution" />
            <Field FieldDef="Reviewers" />
            <Field FieldDef="Comments" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
        </Log>
        <Log Name="PackageImport" Label="[LogSubmittalItems]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="References" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="InstructionsToOfficial" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="Location" />
            <Field FieldDef="ResponseDistribution" />
            <Field FieldDef="Reviewers" />
            <Field FieldDef="Comments" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
        </Log>
        <Log Name="PackageImport" Label="[LogViewSubmittalItemsGroupedbyVendor]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
          <Log.Groupings>
            <Grouping SortDirection="Ascending" Path="SubmittingVendor" />
          </Log.Groupings>
        </Log>
        <Log Name="PackageImport" Label="[LogViewSubmittalItemsGroupedbyCoordinator]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
          <Log.Groupings>
            <Grouping SortDirection="Ascending" Path="SubmittalCoordinator" />
          </Log.Groupings>
        </Log>
        <Log Name="PackageImport" Label="[LogViewSubmittalItemsGroupedbyPackage]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
          <Log.Groupings>
            <Grouping SortDirection="Ascending" Path="SubmittalPackage" />
          </Log.Groupings>
        </Log>
        <Log Name="PackageImport" Label="[LogViewSubmittalItemGroupedbyStatus]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
          <Log.Groupings>
            <Grouping SortDirection="Ascending" Path="Status" />
          </Log.Groupings>
        </Log>
        <Log Name="PackageImport" Label="[LogViewSubmittalItemsGroupedbyAssignedTo]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Query EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Partition.Scope="DomainPartition" Partition.IncludeChildAppPartitions="True" />
          <Log.Groupings>
            <Grouping SortDirection="Ascending" Path="AssignedTo" />
          </Log.Groupings>
        </Log>
        <Log Name="PackageImportConstruction" Label="[LogViewSubmittalItemsConstructionOnly]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Sorts>
            <Sort Path="Number" Direction="Descending" />
          </Log.Sorts>
          <Log.Condition>
            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
          </Log.Condition>
        </Log>
        <Log Name="PackageImportEngineering" Label="[LogViewSubmittalItemsEngineeringnOnly]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Sorts>
            <Sort Path="Number" Direction="Descending" />
          </Log.Sorts>
          <Log.Condition>
            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
          </Log.Condition>
        </Log>
        <Log Name="PackageImportProcurement" Label="[LogViewSubmittalItemsProcurementOnly]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Sorts>
            <Sort Path="Number" Direction="Descending" />
          </Log.Sorts>
          <Log.Condition>
            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
          </Log.Condition>
        </Log>
        <Log Name="PackageImportCommissioning" Label="[LogViewSubmittalItemsCommissioningOnly]" ShowPrinting="True" ShowCharting="False" ShowSearch="True" ShowSettingsConfig="True">
          <Log.Fields>
            <Field FieldDef="Number" />
            <Field FieldDef="Revision" />
            <Field FieldDef="Subject" />
            <Field FieldDef="SubmittalCoordinator" />
            <Field FieldDef="SubmittingVendor" />
            <Field FieldDef="SubmittingVendorCompany" />
            <Field FieldDef="DateSubmittedbyVendor" />
            <Field FieldDef="OfficialReviewer" />
            <Field FieldDef="DateSubmittedtoOffcialReviewer" />
            <Field FieldDef="ReviewPeriod" />
            <Field FieldDef="OfficialResponseDate" />
            <Field FieldDef="DateReturnedToVendor" />
            <Field FieldDef="References" />
          </Log.Fields>
          <Log.Sorts>
            <Sort Path="Number" Direction="Descending" />
          </Log.Sorts>
          <Log.Condition>
            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
          </Log.Condition>
        </Log>
      </HubDef.Logs>
      <HubDef.Sharing>
        <Sharing.Filters>
          <Filter Name="NamedOnRecordFilter" Label="[PermissionFilterNamedOnRecord]">
            <Filter.Condition>
              <AnyOf>
                <Link Path="CreatedBy.Company" ToEntityRange="{company:currentid}" />
                <Link Path="SubmittalCoordinator.Company" ToEntityRange="{company:currentid}" />
                <Link Path="SubmittingVendor.Company" ToEntityRange="{company:currentid}" />
                <Link Path="OfficialReviewer.Company" ToEntityRange="{company:currentid}" />
                <Link Path="Reviewers.Reviewer.Company" ToEntityRange="{company:currentid}" />
              </AnyOf>
            </Filter.Condition>
          </Filter>
        </Sharing.Filters>
      </HubDef.Sharing>
      <HubDef.OnEvents>
        <OnEvent Event="OnImport">
          <OnEvent.Directives>
            <StepTo Step="New">
              <StepTo.Condition>
                <Entity Type="NewEntity" />
              </StepTo.Condition>
            </StepTo>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="CheckCoordinator">
          <OnEvent.Directives>
            <Assertion>
              <Assertion.Asserts>
                <Assert Message="[SubmittalCoordinatorAssertionMessage]" Path="SubmittalCoordinator">
                  <Assert.Condition>
                    <AllOf>
                      <Data Path="SubmittalCoordinator" Type="HasValue" />
                      <Data Path="SubmittalCoordinator.PersonId" Type="HasValue" />
                    </AllOf>
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="CheckOfficial">
          <OnEvent.Directives>
            <Assertion>
              <Assertion.Asserts>
                <Assert Message="[OfficialReviewerAssertionMessage]" Path="OfficialReviewer">
                  <Assert.Condition>
                    <AllOf>
                      <Data Path="OfficialReviewer" Type="HasValue" />
                      <Data Path="OfficialReviewer.PersonId" Type="HasValue" />
                    </AllOf>
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="CheckSubmittingVendor">
          <OnEvent.Directives>
            <Assertion>
              <Assertion.Asserts>
                <Assert Message="[SubmittingVendorAssertionMessage]">
                  <Assert.Condition>
                    <AllOf>
                      <Data Path="SubmittingVendor" Type="HasValue" />
                      <Data Path="SubmittingVendor.PersonId" Type="HasValue" />
                    </AllOf>
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="CheckConsultantReviewers">
          <OnEvent.Directives>
            <Assertion>
              <Assertion.Asserts>
                <Assert Message="[ReviewerAssertionMessage]" Path="Reviewers.Reviewer">
                  <Assert.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="Reviewers.Reviewer" Type="HasValue" />
                        <Data Path="Reviewers.Reviewer.PersonId" Type="HasValue" />
                      </AllOf>
                      <Data Path="Reviewers.Reviewer" Type="HasNoValue" />
                    </AnyOf>
                  </Assert.Condition>
                </Assert>
              </Assertion.Asserts>
            </Assertion>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="SendItemSubmittedForReviewMessage">
          <OnEvent.Directives>
            <Message Actors="ResponseDistribution" Subject="[MessageSubjectItemSubmittedForReview]" Body="[MessageBodyItemSubmittedForReviewWithConsultant]" Attach.PortableViews="True" Attach.References="True">
              <Message.Condition>
                <AllOf>
                  <Data Path="NotifyResponseDistribution" Type="EqualTo" Value="True" />
                  <Data Path="Reviewers.Reviewer" Type="HasValue" />
                </AllOf>
              </Message.Condition>
            </Message>
            <Message Actors="ResponseDistribution" Subject="[MessageSubjectItemSubmittedForReview]" Body="[MessageBodyItemSubmittedForReviewOnlyOfficial]" Attach.PortableViews="True" Attach.References="True">
              <Message.Condition>
                <AllOf>
                  <Data Path="NotifyResponseDistribution" Type="EqualTo" Value="True" />
                  <Data Path="Reviewers.Reviewer" Type="HasNoValue" />
                </AllOf>
              </Message.Condition>
            </Message>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="SendItemReSubmittedForReviewMessage">
          <OnEvent.Directives>
            <Message Actors="ResponseDistribution" Subject="[MessageSubjectItemReSubmittedForReview]" Body="[MessageBodyItemReSubmittedForReviewWithConsultant]" Attach.PortableViews="True" Attach.References="True">
              <Message.Condition>
                <AllOf>
                  <Data Path="NotifyResponseDistribution" Type="EqualTo" Value="True" />
                  <Data Path="Reviewers.Reviewer" Type="HasValue" />
                </AllOf>
              </Message.Condition>
            </Message>
            <Message Actors="ResponseDistribution" Subject="[MessageSubjectItemReSubmittedForReview]" Body="[MessageBodyItemReSubmittedForReviewOnlyOfficial]" Attach.PortableViews="True" Attach.References="True">
              <Message.Condition>
                <AllOf>
                  <Data Path="NotifyResponseDistribution" Type="EqualTo" Value="True" />
                  <Data Path="Reviewers.Reviewer" Type="HasNoValue" />
                </AllOf>
              </Message.Condition>
            </Message>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="SetItemDateCompletedIfEmpty">
          <OnEvent.Directives>
            <Map>
              <Map.Assignments>
                <CurrentDate To="DateCompleted">
                  <CurrentDate.Condition>
                    <Data Path="DateCompleted" Type="HasNoValue" />
                  </CurrentDate.Condition>
                </CurrentDate>
              </Map.Assignments>
            </Map>
          </OnEvent.Directives>
        </OnEvent>
        <OnEvent Event="ToCoordinator">
          <OnEvent.Directives>
            <Event Name="CheckCoordinator" Direction="Up" />
            <Map Direction="None" From="Default">
              <Map.Mappings>
                <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
              </Map.Mappings>
            </Map>
            <StepTo Step="CoordinatorTriage" />
          </OnEvent.Directives>
        </OnEvent>
      </HubDef.OnEvents>
      <HubDef.Steps>
        <Step Name="StartConstruction" Label="[StartStepLabel] [StartConstructionLabel]" Save.Disabled="true" Save.Actors="Everyone" Process.Disabled="true">
          <Step.Views>
            <View Actors="Everyone" ViewDef="NewView" Id="287" />
            <View Actors="Everyone" ViewDef="PreviewView" Action="Preview" Id="288" />
            <View Actors="Everyone" ViewDef="NewView" Action="Edit" Id="289" />
          </Step.Views>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map>
                  <Map.Assignments>
                    <Text To="TurnoverIndexCategory" Value="Construction" />
                  </Map.Assignments>
                </Map>
                <Directives Set="SubmittalItemStartOnEnter" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.Commands>
            <Command Label="[ActionSaveCloseLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator,SubmittingVendor" Name="StartToNew">
              <Command.Directives>
                <Directives Set="SubmittalItemStartOnSave" />
              </Command.Directives>
            </Command>
          </Step.Commands>
          <Step.Save>
            <Save.Directives>
              <Directives Set="ValidateLinearLocation" />
            </Save.Directives>
          </Step.Save>
          <Flow_Properties />
        </Step>
        <Step Name="StartEngineering" Label="[StartStepLabel] [StartEngineeringLabel]" Save.Disabled="true" Save.Actors="Everyone" Process.Disabled="true">
          <Step.Views>
            <View Actors="Everyone" ViewDef="NewView" Id="287" />
            <View Actors="Everyone" ViewDef="PreviewView" Action="Preview" Id="288" />
            <View Actors="Everyone" ViewDef="NewView" Action="Edit" Id="289" />
          </Step.Views>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map>
                  <Map.Assignments>
                    <Text To="TurnoverIndexCategory" Value="Engineering" />
                  </Map.Assignments>
                </Map>
                <Directives Set="SubmittalItemStartOnEnter" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.Commands>
            <Command Label="[ActionSaveCloseLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator,SubmittingVendor" Name="StartToNew">
              <Command.Directives>
                <Directives Set="SubmittalItemStartOnSave" />
              </Command.Directives>
            </Command>
          </Step.Commands>
          <Flow_Properties />
        </Step>
        <Step Name="StartProcurement" Label="[StartStepLabel] [StartProcurementLabel]" Save.Disabled="true" Save.Actors="Everyone" Process.Disabled="true">
          <Step.Views>
            <View Actors="Everyone" ViewDef="NewView" Id="287" />
            <View Actors="Everyone" ViewDef="PreviewView" Action="Preview" Id="288" />
            <View Actors="Everyone" ViewDef="NewView" Action="Edit" Id="289" />
          </Step.Views>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map>
                  <Map.Assignments>
                    <Text To="TurnoverIndexCategory" Value="Procurement" />
                  </Map.Assignments>
                </Map>
                <Directives Set="SubmittalItemStartOnEnter" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.Commands>
            <Command Label="[ActionSaveCloseLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator,SubmittingVendor" Name="StartToNew">
              <Command.Directives>
                <Directives Set="SubmittalItemStartOnSave" />
              </Command.Directives>
            </Command>
          </Step.Commands>
          <Flow_Properties />
        </Step>
        <Step Name="StartCommissioning" Label="[StartStepLabel] [StartCommissioningLabel]" Save.Disabled="true" Save.Actors="Everyone" Process.Disabled="true">
          <Step.Views>
            <View Actors="Everyone" ViewDef="NewView" Id="287" />
            <View Actors="Everyone" ViewDef="PreviewView" Action="Preview" Id="288" />
            <View Actors="Everyone" ViewDef="NewView" Action="Edit" Id="289" />
          </Step.Views>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map>
                  <Map.Assignments>
                    <Text To="TurnoverIndexCategory" Value="Commissioning" />
                  </Map.Assignments>
                </Map>
                <Directives Set="SubmittalItemStartOnEnter" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.Commands>
            <Command Label="[ActionSaveCloseLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator,SubmittingVendor" Name="StartToNew">
              <Command.Directives>
                <Directives Set="SubmittalItemStartOnSave" />
              </Command.Directives>
            </Command>
          </Step.Commands>           
          <Flow_Properties />
        </Step>
        <Step Name="New" Label="[NewStepLabel]" Save.Disabled="true" Save.Actors="Everyone" Process.Disabled="True">
          <Step.Edit>
            <Edit.VisibleWhen>
              <AnyOf>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
              </AnyOf>
            </Edit.VisibleWhen>
          </Step.Edit>
          <Step.Delete>
            <Delete.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Delete.VisibleWhen>
          </Step.Delete>
          <Step.Views>
            <View Actors="Everyone" ViewDef="PreviewView" Action="Preview" Id="242" />
            <View Actors="AdministratorRole,SubmittalCoordinator,ModeratorRole,ObserverRole,ContributorRole" ViewDef="NewEditView" Action="Edit" Id="243" />
            <View Actors="AdministratorRole,SubmittalCoordinator,ModeratorRole,ObserverRole,ContributorRole" ViewDef="ReviseSubmittalItemView" Action="Preview" Id="244" />
          </Step.Views>
          <Step.Save>
            <Save.Directives>
              <Directives Set="ValidateLinearLocation" />
            </Save.Directives>
          </Step.Save>
          <Step.Commands>
            <Command Label="[ActionSaveCloseLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator" Name="SaveOnEdit" Action="Edit">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Function Name="UpdateDaysInReview" />
                <Map MapDef="SyncReviewers" Direction="None" FromPath="SubmittalPackage">
                  <Map.Condition>
                    <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                  </Map.Condition>
                </Map>
                <Map Name="SyncSubmittalPackage">
                  <Map.Condition>
                    <Data Path="SubmittalPackage" Type="HasValue" />
                  </Map.Condition>
                  <Map.Mappings>
                    <Mapping From="SubmittalPackage.IsSequentialReview" To="IsSequentialReview" />
                    <Mapping From="SubmittalPackage.OfficialReviewer" To="OfficialReviewer" />
                    <Mapping From="SubmittalPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="SubmittalPackage.ResponseDistribution" To="ResponseDistribution" />
                    <Mapping From="SubmittalPackage.Scope" To="Scope">
                      <Mapping.Condition>
                        <AnyOf>
                          <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                          <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                        </AnyOf>
                      </Mapping.Condition>
                    </Mapping>
                  </Map.Mappings>
                </Map>
              </Command.Directives>
            </Command>
            <Command Label="[AssignToCoordinatorLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole" Name="AssignToCoordinator">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Map Name="MapConsultantReviewers">
                  <Map.Condition>
                    <AllOf>
                      <AnyOf>
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                      </AnyOf>
                      <Data Path="SubmittalPackage" Type="HasNoValue" />
                    </AllOf>
                  </Map.Condition>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.Reviewers" To="Reviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer.Id" />
                  </Map.Mappings>
                </Map>
                <Persist />
                <Event Name="ToCoordinator" Direction="Up" />
              </Command.Directives>
              <Command.VisibleWhen>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Setting AppName="kahua_AEC_PackagedSubmittals" Name="HideAssignToCoordinator" Type="EqualTo" Value="False" />
                </AllOf>
              </Command.VisibleWhen>
            </Command>
            <Command Label="[MarkCompleteLabel]" Actors="SubmittalCoordinator,AdministratorRole,ModeratorRole,ContributorRole,OfficialReviewer" Name="MarkComplete" DenyActors="SubmittingVendor" Action="Preview">
              <Command.VisibleWhen>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <AnyOf>
                    <AllOf>
                      <Permission Actors="OfficialReviewer" />
                      <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="True" />
                    </AllOf>
                    <AllOf>
                      <Permission Actors="SubmittalCoordinator,AdministratorRole,ModeratorRole,ContributorRole" />
                      <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="False" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Map>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <Map>
                  <Map.Condition>
                    <AllOf>
                      <AnyOf>
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                      </AnyOf>
                      <Data Path="SubmittalPackage" Type="HasNoValue" />
                    </AllOf>
                  </Map.Condition>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer.Id" />
                  </Map.Mappings>
                </Map>
                <Event Name="SetItemDateCompletedIfEmpty" />
                <Event Name="ToLocked" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[RequestSubmissionLabel]" Actors="SubmittalCoordinator,AdministratorRole,ModeratorRole,ContributorRole" Name="RequestSubmission">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Map>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <Map>
                  <Map.Condition>
                    <AllOf>
                      <AnyOf>
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                      </AnyOf>
                      <Data Path="SubmittalPackage" Type="HasNoValue" />
                    </AllOf>
                  </Map.Condition>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer" />
                  </Map.Mappings>
                </Map>
                <Function Name="AddVendorSubmissionDueDate" />
                <Event Name="ToRequestSubmission" Direction="Up" />
              </Command.Directives>
              <Command.VisibleWhen>
                <AllOf>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                </AllOf>
              </Command.VisibleWhen>
            </Command>
            <Command Name="UpdateAssetTypeWithPackage" Sets="SubItems" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <Data Path="SubmittalPackage" Type="HasValue" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map>
                  <Map.Assignments>
                    <Text To="PromptReturnOfficialReason" />
                    <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                    <Boolean To="SequentialReviewStarted" Value="False" />
                    <Text To="Status" Value="New">
                      <Text.Condition>
                        <Data Path="Status" Type="NotEqualTo" Value="Reopened" />
                      </Text.Condition>
                    </Text>
                  </Map.Assignments>
                </Map>
                <Map>
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <Map ToPath="Reviewers">
                  <Map.Assignments>
                    <Empty To="ReviewerResponseLookup" />
                    <Empty To="ReviewerDateSent" />
                    <Empty To="ReviewerResponseDate" />
                    <Empty To="ReviewerNotes" />
                    <Empty To="ReviewerResponseDueDate" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="EqualTo" Path="Status" Value="Revised" />
                  </Map.Condition>
                </Map>
                <Function Name="EmptyAssignedTo" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToSubmitReviewers">
              <OnEvent.Directives>
                <Event Name="CheckOfficial" Direction="Up" />
                <Event Direction="Up" Name="CheckConsultantReviewers" />
                <Map Direction="None" From="Default">
                  <Map.Assignments>
                    <CurrentDate To="RequestedfromVendor" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="HasNoValue" Path="DateSubmittedByVendor" />
                  </Map.Condition>
                </Map>
                <Map Direction="None" From="Default">
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <StepTo Step="InReview">
                  <StepTo.Condition>
                    <Data Path="IsSequentialReview" Type="NotEqualTo" Value="True" />
                  </StepTo.Condition>
                </StepTo>
                <StepTo Step="InReviewSequential">
                  <StepTo.Condition>
                    <Data Path="IsSequentialReview" Type="IsTrue" />
                  </StepTo.Condition>
                </StepTo>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToLocked">
              <OnEvent.Directives>
                <Map Direction="None" From="Default">
                  <Map.Assignments>
                    <CurrentDate To="RequestedfromVendor" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="HasNoValue" Path="DateSubmittedByVendor" />
                  </Map.Condition>
                </Map>
                <Map Direction="None" From="Default">
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <StepTo Step="Locked" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRequestSubmission">
              <OnEvent.Directives>
                <Event Name="CheckSubmittingVendor" Direction="Up" />
                <Map Direction="None" From="Default">
                  <Map.Assignments>
                    <CurrentDate To="RequestedfromVendor" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="HasNoValue" Path="DateSubmittedByVendor" />
                  </Map.Condition>
                </Map>
                <Map Direction="None" From="Default">
                  <Map.Mappings>
                    <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                    <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                    <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                  </Map.Mappings>
                </Map>
                <StepTo Step="SubmitItem" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.ItemActions>
            <Form FormName="ReviseSubmittal" Label="[ReviseFormActionLabel]" Actors="AdministratorRole,ModeratorRole,ContributorRole" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" PreviewOnly="True" />
          </Step.ItemActions>
          <Flow_Properties />
        </Step>
        <Step Name="CoordinatorTriage" Label="[CoordinatorTriageStepLabel]" Save.Disabled="false" Delete.Disabled="True" Process.Disabled="True">
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="245" />
            <View Actors="Everyone" ViewDef="ReviseSubmittalItemView" Id="246" />
          </Step.Views>
          <Step.Commands>
            <Command Label="[RecallLabel]" Actors="AdministratorRole,ModeratorRole" Name="Recall" Prompt.ViewDef="RecallView" Prompt.Label="[FieldRecallReasonLabel]">
              <Command.Directives>
                <Event Name="ToRecall" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[SubmitToReviewersLabel]" Actors="SubmittalCoordinator" Name="SubmitToReviewers">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Function Name="ProcessResponseDueDates" />
                <Event Name="SendItemSubmittedForReviewMessage">
                  <Event.Condition>
                    <Data Path="InitialSubmitToReviewersPerformed" Type="EqualTo" Value="False" />
                  </Event.Condition>
                </Event>
                <Event Name="SendItemReSubmittedForReviewMessage">
                  <Event.Condition>
                    <Data Path="InitialSubmitToReviewersPerformed" Type="EqualTo" Value="True" />
                  </Event.Condition>
                </Event>
                <Map Direction="None">
                  <Map.Assignments>
                    <Boolean To="InitialSubmitToReviewersPerformed" Value="True" />
                  </Map.Assignments>
                </Map>
                <Event Name="ToSubmitReviewers" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[MarkCompleteLabel]" Actors="SubmittalCoordinator" Name="MarkComplete">
              <Command.VisibleWhen>
                <AllOf>
                  <Permission Actors="SubmittalCoordinator" />
                  <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="False" />
                </AllOf>
              </Command.VisibleWhen>
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Event Name="SetItemDateCompletedIfEmpty" />
                <Event Name="ToLocked" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[RequestSubmissionLabel]" Actors="SubmittalCoordinator" Name="RequestSubmission">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Function Name="AddVendorSubmissionDueDate" />
                <Event Name="ToRequestSubmission" Direction="Up" />
              </Command.Directives>
              <Command.VisibleWhen>
                <AllOf>
                  <Data Path="SentToVendor" Type="NotEqualTo" Value="True" />
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
            </Command>
            <Command Label="[RequestCorrectionsLabel]" Actors="SubmittalCoordinator" Name="RequestSubmission">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Function Name="AddVendorSubmissionDueDate" />
                <Event Name="ToRequestSubmission" Direction="Up" />
              </Command.Directives>
              <Command.VisibleWhen>
                <AllOf>
                  <Data Path="SentToVendor" Type="EqualTo" Value="True" />
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Coordinator Review" />
                    <Text To="RecallReason" />
                    <Text To="ReasonForReturnVendor" />
                    <Text To="PromptReturnOfficialReason" />
                  </Map.Assignments>
                </Map>
                <Task TaskDef="CoordinatorTriageTask" Actors="SubmittalCoordinator" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToSubmitReviewers">
              <OnEvent.Directives>
                <Event Name="CheckOfficial" Direction="Up" />
                <Event Direction="Up" Name="CheckConsultantReviewers" />
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="InReview">
                  <StepTo.Condition>
                    <Data Type="NotEqualTo" Value="True" Path="IsSequentialReview" />
                  </StepTo.Condition>
                </StepTo>
                <StepTo Step="InReviewSequential">
                  <StepTo.Condition>
                    <Data Type="IsTrue" Path="IsSequentialReview" />
                  </StepTo.Condition>
                </StepTo>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToLocked">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="Locked" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRequestSubmission">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="SubmitItem" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRecall">
              <OnEvent.Directives>
                <TaskClose />
                <StepTo Step="New" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.TaskDefs>
            <TaskDef Name="CoordinatorTriageTask" ViewDef="CoordinatorTriageTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectCoordinatorTriage]">
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectCoordinatorTriage]" Body="[MessageBodyAssignToCoordinator]">
                  <Message.Condition>
                    <Data Path="SubmittedFromVendor" Type="EqualTo" Value="False" />
                  </Message.Condition>
                </Message>
                <Message Actors="TaskOwner" Subject="[MessageSubject]" Body="[MessageBodySubmittingVendorSubmittal]">
                  <Message.Condition>
                    <Data Path="SubmittedFromVendor" Type="EqualTo" Value="True" />
                  </Message.Condition>
                </Message>
              </TaskDef.Messages>
              <TaskDef.Commands>
                <Command Label="[SubmitToReviewersLabel]" Actors="Everyone" Name="SubmitToReviewers">
                  <Command.Directives>
                    <Directives Set="ValidateLinearLocation" />
                    <Function Name="ProcessResponseDueDates" />
                    <Map Direction="Up">
                      <Map.Assignments>
                        <Boolean To="SubmittedFromVendor" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Event Name="SendItemSubmittedForReviewMessage">
                      <Event.Condition>
                        <Data Path="InitialSubmitToReviewersPerformed" Type="EqualTo" Value="False" />
                      </Event.Condition>
                    </Event>
                    <Event Name="SendItemReSubmittedForReviewMessage">
                      <Event.Condition>
                        <Data Path="InitialSubmitToReviewersPerformed" Type="EqualTo" Value="True" />
                      </Event.Condition>
                    </Event>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <Boolean To="InitialSubmitToReviewersPerformed" Value="True" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="Up" From="Default">
                      <Map.Mappings>
                        <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                        <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                        <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                      </Map.Mappings>
                    </Map>
                    <TaskClose />
                    <Event Name="ToSubmitReviewers" Direction="Up" />
                  </Command.Directives>
                </Command>
                <Command Label="[MarkCompleteLabel]" Actors="SubmittalCoordinator" Name="MarkComplete">
                  <Command.VisibleWhen>
                    <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="False" />
                  </Command.VisibleWhen>
                  <Command.Directives>
                    <Directives Set="ValidateLinearLocation" />
                    <Map Direction="Up" />
                    <Map Direction="Up" From="Default">
                      <Map.Mappings>
                        <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                        <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                        <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                      </Map.Mappings>
                    </Map>
                    <Event Name="SetItemDateCompletedIfEmpty" />
                    <Event Name="ToLocked" Direction="Up" />
                  </Command.Directives>
                </Command>
                <Command Label="[RequestSubmissionLabel]" Actors="Everyone" Name="RequestSubmission">
                  <Command.Directives>
                    <Variables Name="validatedLinearLocation">
                      <Replace Name="validatedLinearLocation" RegEx="^[MK]P ?\d+\.?[\d]+?(?:\+\d+\.?[\d]+?)?$" Value="{LinearLocation}" With="VALID" />
                    </Variables>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[SubmittingVendorAssertionMessage]">
                          <Assert.Condition>
                            <Data Path="SubmittingVendor" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[AssertionInvalidLinearLocationLabel]" Path="LinearLocation">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="validatedLinearLocation" Type="EqualTo" Value="VALID" />
                              <Data Path="LinearLocation" Type="HasNoValue" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Map Direction="Up">
                      <Map.Mappings>
                        <Mapping From="SubmittingVendor" To="SubmittingVendor" />
                      </Map.Mappings>
                    </Map>
                    <Map Direction="Up" From="Default">
                      <Map.Mappings>
                        <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                        <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                        <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                      </Map.Mappings>
                    </Map>
                    <Function Name="AddVendorSubmissionDueDate" />
                    <Event Name="ToRequestSubmission" Direction="Up" />
                  </Command.Directives>
                  <Command.VisibleWhen>
                    <AllOf>
                      <Data Path="SentToVendor" Type="NotEqualTo" Value="True" />
                      <AnyOf>
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                      </AnyOf>
                    </AllOf>
                  </Command.VisibleWhen>
                </Command>
                <Command Label="[RequestCorrectionsLabel]" Actors="Everyone" Name="RequestSubmission">
                  <Command.Directives>
                    <Variables Name="validatedLinearLocation">
                      <Replace Name="validatedLinearLocation" RegEx="^[MK]P ?\d+\.?[\d]+?(?:\+\d+\.?[\d]+?)?$" Value="{LinearLocation}" With="VALID" />
                    </Variables>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[AssertionInvalidLinearLocationLabel]" Path="LinearLocation">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="validatedLinearLocation" Type="EqualTo" Value="VALID" />
                              <Data Path="LinearLocation" Type="HasNoValue" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[SubmittingVendorAssertionMessage]">
                          <Assert.Condition>
                            <Data Path="SubmittingVendor" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Map Direction="Up">
                      <Map.Mappings>
                        <Mapping From="SubmittingVendor" To="SubmittingVendor" />
                      </Map.Mappings>
                    </Map>
                    <Map Direction="Up" From="Default">
                      <Map.Mappings>
                        <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                        <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                        <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                      </Map.Mappings>
                    </Map>
                    <Function Name="AddVendorSubmissionDueDate" />
                    <Event Name="ToRequestSubmission" Direction="Up" />
                  </Command.Directives>
                  <Command.VisibleWhen>
                    <AllOf>
                      <Data Path="SentToVendor" Type="EqualTo" Value="True" />
                      <AnyOf>
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                        <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                      </AnyOf>
                    </AllOf>
                  </Command.VisibleWhen>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="Number" To="Number" />
                <Mapping From="DateSendToOfficialBy" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
          </Step.TaskDefs>
          <Step.Save>
            <Save.Directives>
              <Directives Set="ValidateLinearLocation" />
            </Save.Directives>
          </Step.Save>
          <Flow_Properties />
        </Step>
        <Step Name="SubmitItem" Label="[SubmitItemStepLabel]" Save.Disabled="false" Save.Actors="AdministratorRole,ModeratorRole,ContributorRole" Process.Disabled="True">
          <Step.Delete>
            <Delete.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Delete.VisibleWhen>
          </Step.Delete>
          <Step.Edit>
            <Edit.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Edit.VisibleWhen>
          </Step.Edit>
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="247" />
          </Step.Views>
          <Step.Commands>
            <!--Command Label="[SubmitLabel]" Actors="SubmittingVendor" Name="Submit">
              <Command.Directives>
                <Event Name="ToNew" Direction="Up" />
              </Command.Directives>
            </Command-->
            <Command Label="[RecallLabel]" Actors="AdministratorRole,ContributorRole,ModeratorRole,SubmittalCoordinator" Name="Recall" Prompt.ViewDef="RecallView" Prompt.Label="[FieldRecallReasonLabel]">
              <Command.Directives>
                <Message Actors="SubmittingVendor" Subject="[SubjMsgToVendorRecallLabel]" Body="[BodyMsgToVendorRecallLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="SubmittingVendor" Subject="[SubjMsgToVendorRecallRevisionLabel]" Body="[BodyMsgToVendorRecallRevisionLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Map Direction="None">
                  <Map.Assignments>
                    <Empty To="RequestedfromVendor" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="HasNoValue" Path="DateSubmittedByVendor" />
                  </Map.Condition>
                </Map>
                <Event Name="ToRecall" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None" Disabled="False">
                  <Map.Assignments>
                    <Text To="Status" Value="Requested">
                      <Text.Condition>
                        <Data Path="Status" Type="NotEqualTo" Value="Reviewed" />
                      </Text.Condition>
                    </Text>
                    <Text To="RecallReason" />
                    <Boolean To="SentToVendor" Value="True" />
                    <CurrentDate To="RequestedfromVendor">
                      <CurrentDate.Condition>
                        <Data Path="RequestedfromVendor" Type="HasNoValue" />
                      </CurrentDate.Condition>
                    </CurrentDate>
                    <CurrentDate To="DateReturnedToVendor">
                      <CurrentDate.Condition>
                        <Data Path="DateSubmittedByVendor" Type="HasValue" />
                      </CurrentDate.Condition>
                    </CurrentDate>
                  </Map.Assignments>
                </Map>
                <Task TaskDef="SubmitItemTask" Actors="SubmittingVendor" Disabled="False">
                  <Task.Condition>
                    <Variable Name="ReturnStatus" Type="NotEqualTo" Value="Returned" />
                  </Task.Condition>
                </Task>
                <Task TaskDef="SubmitItemTaskReturned" Actors="SubmittingVendor" Disabled="False">
                  <Task.Condition>
                    <Variable Name="ReturnStatus" Type="EqualTo" Value="Returned" />
                  </Task.Condition>
                </Task>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRecall">
              <OnEvent.Directives>
                <TaskClose />
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="New" />
                  </Map.Assignments>
                </Map>
                <StepTo Step="New" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.TaskDefs>
            <TaskDef Name="SubmitItemTask" ViewDef="SubmitItemTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectSubmission]">
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectSubmission]" Body="[MessageBodySubmittingVendorSubmittal]" />
              </TaskDef.Messages>
              <TaskDef.Commands>
                <Command Label="[SubmitLabel]" Actors="Everyone" Name="Submit">
                  <Command.Directives>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <Text To="Status" Value="Submitted by Vendor" />
                        <CurrentDate To="DateSubmittedByVendor" />
                      </Map.Assignments>
                    </Map>
                    <Map Name="MapConsultantReviewers">
                      <Map.Condition>
                        <AllOf>
                          <AnyOf>
                            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                            <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                          </AnyOf>
                          <Data Path="SubmittalPackage" Type="HasNoValue" />
                        </AllOf>
                      </Map.Condition>
                      <Map.Mappings>
                        <Mapping From="WorkPackage.Reviewers" To="Reviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer.Id" />
                      </Map.Mappings>
                    </Map>
                    <Persist />
                    <TaskClose />
                    <!--Event Name="ToNew" Direction="Up" /-->
                    <Event Name="ToCoordinator" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="SubmissionDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="SubmitItemTaskReturned" ViewDef="SubmitItemTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectReturnVendor]">
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectReturnVendor]" Body="[MessageBodySubmittingVendorSubmittalReturned]" />
              </TaskDef.Messages>
              <TaskDef.Commands>
                <Command Label="[SubmitLabel]" Actors="Everyone" Name="Submit">
                  <Command.Directives>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <Text To="Status" Value="Submitted by Vendor" />
                        <Text To="ReasonForReturnVendor" />
                        <CurrentDate To="DateSubmittedByVendor" />
                      </Map.Assignments>
                    </Map>
                    <TaskClose />
                    <Event Name="ToCoordinator" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="SubmissionDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
          </Step.TaskDefs>
          <Flow_Properties />
        </Step>
        <Step Name="InReview" Label="[InReviewStepLabel]" Save.Actors="AdministratorRole,ModeratorRole,ContributorRole" Delete.Disabled="True" Process.Disabled="True">
          <Step.Edit>
            <Edit.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Edit.VisibleWhen>
          </Step.Edit>
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="248" />
          </Step.Views>
          <Step.Commands>
            <Command Label="[RecallLabel]" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator" Name="Recall" Prompt.ViewDef="RecallView" Prompt.Label="[FieldRecallReasonLabel]">
              <Command.Directives>
                <Message Actors="OfficialReviewer" Subject="[SubjMsgToOfficialRecallLabel]" Body="[BodyMsgToOfficialRecallLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="OfficialReviewer" Subject="[SubjMsgToOfficialRecallRevisionLabel]" Body="[BodyMsgToOfficialRecallRevisionLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="ConsultantReviewer" Subject="[SubjMsgToConsultantRecallLabel]" Body="[BodyMsgToConsultantRecallLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="ConsultantReviewer" Subject="[SubjMsgToConsultantRecallRevisionLabel]" Body="[BodyMsgToConsultantRecallRevisionLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Map Direction="None">
                  <Map.Assignments>
                    <Empty To="DateSubmittedToOfficial" />
                    <Text To="PromptReturnOfficialReason" />
                  </Map.Assignments>
                </Map>
                <Function Name="UpdateDaysInReview" />
                <Event Name="ToRecall" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="In Review" />
                    <CurrentDate To="DateSubmittedToOfficial">
                      <CurrentDate.Condition>
                        <Data Path="DateSubmittedToOfficial" Type="HasNoValue" />
                      </CurrentDate.Condition>
                    </CurrentDate>
                  </Map.Assignments>
                </Map>
                <Function Name="UpdateDaysInReview" />
                <Map Direction="None" ToPath="Reviewers">
                  <Map.Assignments>
                    <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                  </Map.Assignments>
                  <Map.Condition>
                    <Data Type="EqualTo" Path="AutosendToConsultants" Value="True" />
                  </Map.Condition>
                </Map>
                <Task TaskDef="OfficialReviewerTask" Actors="OfficialReviewer">
                  <Task.Condition>
                    <AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                      <Data Path="OfficialReviewer" Type="HasValue" />
                      <Variable Name="ReturnStatus" Type="NotEqualTo" Value="Returned" />
                    </AllOf>
                  </Task.Condition>
                </Task>
                <Task TaskDef="OfficialReviewerReturnedTask" Actors="OfficialReviewer">
                  <Task.Condition>
                    <AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                      <Data Path="OfficialReviewer" Type="HasValue" />
                      <Variable Name="ReturnStatus" Type="EqualTo" Value="Returned" />
                    </AllOf>
                  </Task.Condition>
                </Task>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRecall">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="New" />
                  </Map.Assignments>
                </Map>
                <StepTo Step="New" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRespond">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Response Received" />
                    <Resolve ResolveType="AccountContact" To="CurrentOfficial" />
                  </Map.Assignments>
                </Map>
                <Message Actors="SubmittalCoordinator" Subject="[MessageSubjectOfficialReviewerResponded]" Body="[MessageBodyOfficialReviewerResponse]">
                  <Message.Condition>
                    <Data Path="NotifyResponseDistributionOnCompleted" Type="NotEqualTo" Value="True" />
                  </Message.Condition>
                </Message>
                <Message Actors="SubmittalCoordinator,ResponseDistribution" Subject="[MessageSubjectOfficialReviewerResponded]" Body="[MessageBodyOfficialReviewerResponse]" ExcludeActors="CurrentOfficial">
                  <Message.Condition>
                    <Data Path="NotifyResponseDistributionOnCompleted" Type="EqualTo" Value="True" />
                  </Message.Condition>
                </Message>
                <Message Actors="OfficialReviewer" ExcludeActors="CurrentOfficial" Subject="[SubjecMessageRespondToOfficialReviewersLabel]" Body="[TaskMessageFromOfficialWithFinalResponse]" />
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="CoordinatorReview" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.MapDefs>
            <MapDef Name="ConsultantReviewerMap">
              <MapDef.Mappings>
                <Mapping From="ReviewerResponseDate" To="ReviewerResponseDate" />
                <!-- <Mapping From="OutwardReferences" To="OutwardReferences" /> -->
              </MapDef.Mappings>
            </MapDef>
            <MapDef Name="OfficialReviewerMap">
              <MapDef.Mappings>
                <Mapping From="OutwardReferences" To="OutwardReferences" />
                <Mapping From="CopiesReturned" To="CopiesReturned" />
                <Mapping From="Response" To="Response" />
                <Mapping From="ResponseNotes" To="ResponseNotes" />
                <Mapping From="Comments" To="Comments" />
                <Mapping From="InstructionsToReviewers" To="InstructionsToReviewers" />
                <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer" />
              </MapDef.Mappings>
            </MapDef>
          </Step.MapDefs>
          <Step.TaskDefs>
            <TaskDef Name="OfficialReviewerTask" ViewDef="OfficialReviewerTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectInReview]" ShareTask="True">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReview]" Body="[MessageBodySubmitOfficialReviewerWithConsultants]">
                  <Message.Condition>
                    <Data Path="HubRoot.Reviewers.Reviewer" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReview]" Body="[MessageBodySubmitOfficialReviewer]">
                  <Message.Condition>
                    <Data Path="HubRoot.Reviewers.Reviewer" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                    <Task TaskDef="ConsultantReviewerTask" Actors="ConsultantReviewerNotResponded" MinimumParticipants="0" From.UsePath="Reviewers">
                      <Task.Condition>
                        <Data Type="EqualTo" Path="AutosendToConsultants" Value="True" />
                      </Task.Condition>
                    </Task>
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="FromConsultantToConsultant">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Mappings>
                        <Mapping From="ConsultantReviewPeriod" To="ConsultantReviewPeriod" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerTask" Actors="ConsultantReviewerNotResponded" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <ItemsCommand ItemsPath="Reviewers" Label="[ReturnToReviewers]" Name="ReturnIndividualReviewers" Prompt.ViewDef="ReturnConsultantReasonPromptView" Prompt.Label="[ReturnReasonLabel]">
                  <ItemsCommand.VisibleWhen>
                    <Data Path="ReviewerResponseDate" Type="HasValue" />
                  </ItemsCommand.VisibleWhen>
                  <ItemsCommand.Directives>
                    <Map>
                      <Map.Assignments>
                        <Resolve To="CurrentOfficial" ResolveType="AccountContact" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="PromptReturnConsultantReason" To="PromptReturnConsultantReason" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerReturnTask" Actors="ConsultantReviewer" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </ItemsCommand.Directives>
                </ItemsCommand>
                <Command Label="[SubmitToReviewersLabel]" Actors="Everyone" Name="SubmitToReviewers">
                  <Command.VisibleWhen>
                    <AnyOf>
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                    </AnyOf>
                  </Command.VisibleWhen>
                  <Command.Directives>
                    <Function Name="ProcessConsultantDueDate" />
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                    <!-- Copy data to main record -->
                    <Map Direction="None" ToPath="HubRoot">
                      <Map.Mappings>
                        <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerTask" Actors="ConsultantReviewerNotResponded" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </Command.Directives>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[FieldResponseRequiredLabel]">
                          <Assert.Condition>
                            <Data Path="Response" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- merge references from multiple concurrent consultant reviewers -->
                    <Markup ReferencePath="OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                        <EndCollaboration />
                      </Markup.Operations>
                    </Markup>
                    <Map Direction="Up" MapDef="OfficialReviewerMap">
                      <Map.Assignments>
                        <CurrentDate To="OfficialResponseDate" />
                        <Text To="PromptReturnOfficialReason" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="UpdateDaysInReview" />
                    <TaskClose />
                    <Event Name="ToRespond" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="ConsultantReviewerTask" ViewDef="ConsultantReviewerTaskView" EntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewerWorkflowItem" Label="[MessageSubjectToConsultantReviewer]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectToConsultantReviewer]" Body="[MessageBodySubmitConsultantReviewer]" />
              </TaskDef.Messages>
              <TaskDef.Commands>
                <Command Name="ConsultantToNewConsultant" Label="[SendSecondaryRespondersLabel]">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Event Direction="Up" Name="AddNewConsultantsReviewers" />
                  </Command.Directives>
                  <Command.VisibleWhen>
                    <AllOf>
                      <Data Path="HubParent.ConsultantsCanAddConsultants" Type="EqualTo" Value="True" />
                      <Data Path="NewResponders" Type="HasValue" />
                    </AllOf>
                  </Command.VisibleWhen>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Variables>
                      <Data Name="ReviewerVariable" Value="{Reviewer.Id}" />
                    </Variables>
                    <!-- package notes assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerNotesAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Reviewer Response assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseLookupAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="SettingRequireConsultantItemResponse" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerResponseLookup" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Reviewer ResponseNotes assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Markup ReferencePath="HubParent.OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                      </Markup.Operations>
                    </Markup>
                    <Map From="HubParent" FromPath="Reviewers" Direction="Current">
                      <Map.Mappings>
                        <Mapping From="ReviewerNotes" To="ReviewerNotes">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <!-- Map the response up to the main record too -->
                    <Variables>
                      <Entities Name="rootReviewers" Path="HubRoot.Reviewers" />
                    </Variables>
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Data Name="sourceReviewerId" Value="{Reviewer.Id}" />
                          <Data Name="sourceReviewerNotes" Value="{ReviewerNotes}" />
                          <Data Name="sourceReviewerResponseLookup" Value="{ReviewerResponseLookup}" />
                        </Variables>
                        <ItemsIterate Entities="{variable:rootReviewers}" VariableScope="Inherit">
                          <ItemsIterate.Directives>
                            <Variables>
                              <Data Name="targetReviewerId" Value="{Reviewer.Id}" />
                            </Variables>
                            <Map Direction="None" DisableAutoMap="True">
                              <Map.Assignments>
                                <Text To="ReviewerNotes" Value="{variable:sourceReviewerNotes}" />
                                <Text To="ReviewerResponseLookup" Value="{variable:sourceReviewerResponseLookup}" />
                              </Map.Assignments>
                              <Map.Condition>
                                <AllOf>
                                  <Variable Name="targetReviewerId" Type="EqualTo" ValueVariable="sourceReviewerId" />
                                </AllOf>
                              </Map.Condition>
                            </Map>
                          </ItemsIterate.Directives>
                        </ItemsIterate>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Map Direction="Up" MapDef="ConsultantReviewerMap">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <!-- Update ReviewerResponseDate for HubRoot.Reviewers -->
                    <Map Direction="None" ToPath="HubRoot.Reviewers">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate">
                          <CurrentDate.Condition>
                            <Variable Type="EqualTo" Name="ReviewerVariable" ValuePath="Reviewer.Id" />
                          </CurrentDate.Condition>
                        </CurrentDate>
                      </Map.Assignments>
                    </Map>
                    <!-- <Map Direction="None" ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map> -->
                    <!-- Map OutwardReferences back down to open child task(s) -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubParent.HubTasks.TaskData">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Message Subject="[MessageSubjectConsultantReviewer]" Body="[MessageBodyConsultantReviewerResponse]" Actors="HubParentOfficialReviewer" />
                    <TaskClose />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ReviewerResponseDueDate" To="Task_DueDateTime" />
                <!-- <Mapping From="Parent.OutwardReferences" To="OutwardReferences" /> -->
              </TaskDef.Mappings>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="AddNewConsultantsReviewers">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="NewResponders" To="Reviewers" DistinctPath="Reviewer" MapDef="SourceToReviewer" />
                      </Map.Mappings>
                    </Map>
                    <!-- Copy data to main record -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubRoot">
                      <Map.Mappings>
                        <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" />
                      </Map.Mappings>
                    </Map>
                    <Map Direction="None">
                      <Map.Assignments>
                        <Empty To="NewResponders" />
                      </Map.Assignments>
                    </Map>
                    <Event Name="FromConsultantToConsultant" Direction="Up" />
                    <!-- Populate the Reviewers.ReviewerDataSent for both HubParent and HubRoot -->
                    <Map Direction="None" ToPath="HubParent.Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="HubRoot.Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Save>
                <Save.Directives>
                  <Markup ReferencePath="HubParent.OutwardReferences">
                    <Markup.Operations>
                      <PublishDraft />
                    </Markup.Operations>
                  </Markup>
                </Save.Directives>
              </TaskDef.Save>
            </TaskDef>
            <TaskDef Name="ConsultantReviewerReturnTask" ViewDef="ConsultantReviewerTaskView" EntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewerWorkflowItem" Label="[MessageSubjectConsultantReviewerTaskRevision]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectConsultantReviewerTaskRevision]" Body="[MessageBodyConsultantReviewerTaskRevision]" Attach.References="False" Attach.PortableViews="True" Attach.PortableViewsFrom="HubRoot" Attach.ReferencesFrom="HubRoot" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map Direction="None" FromPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <!-- Clear ReviewerResponseDate for HubRoot.Reviewers -->
                    <Variables>
                      <Data Name="TaskReviewerId" Value="{Reviewer.Id}" />
                    </Variables>
                    <Map Direction="None" ToPath="HubRoot.Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerResponseDate">
                          <Empty.Condition>
                            <AllOf>
                              <Variable Type="EqualTo" Name="TaskReviewerId" ValuePath="Reviewer.Id" />
                            </AllOf>
                          </Empty.Condition>
                        </Empty>
                      </Map.Assignments>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="AddNewConsultantsReviewers">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="NewResponders" To="Reviewers" DistinctPath="Reviewer" MapDef="SourceToReviewer" />
                      </Map.Mappings>
                    </Map>
                    <!-- Copy data to main record -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubRoot">
                      <Map.Mappings>
                        <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" />
                      </Map.Mappings>
                    </Map>
                    <Map Direction="None">
                      <Map.Assignments>
                        <Empty To="NewResponders" />
                      </Map.Assignments>
                    </Map>
                    <Event Name="FromConsultantToConsultant" Direction="Up" />
                    <!-- Populate the Reviewers.ReviewerDataSent for both HubParent and HubRoot -->
                    <Map Direction="None" ToPath="HubParent.Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="HubRoot.Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <Command Name="ConsultantToNewConsultant" Label="[SendSecondaryRespondersLabel]">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Event Direction="Up" Name="AddNewConsultantsReviewers" />
                  </Command.Directives>
                  <Command.VisibleWhen>
                    <AllOf>
                      <Data Path="HubParent.ConsultantsCanAddConsultants" Type="EqualTo" Value="True" />
                      <Data Path="NewResponders" Type="HasValue" />
                    </AllOf>
                  </Command.VisibleWhen>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Variables>
                      <Data Name="ReviewerVariable" Value="{Reviewer.Id}" />
                    </Variables>
                    <!-- Package notes assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerNotesAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Reviewer Response assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseLookupAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="SettingRequireConsultantItemResponse" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerResponseLookup" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Reviewer ResponseNotes assertion -->
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Markup ReferencePath="HubParent.OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                      </Markup.Operations>
                    </Markup>
                    <Map From="HubParent" FromPath="Reviewers" Direction="Current">
                      <Map.Mappings>
                        <Mapping From="ReviewerNotes" To="ReviewerNotes">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <!-- Map the response up to the main record too -->
                    <Variables>
                      <Entities Name="rootReviewers" Path="HubRoot.Reviewers" />
                    </Variables>
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Data Name="sourceReviewerId" Value="{Reviewer.Id}" />
                          <Data Name="sourceReviewerNotes" Value="{ReviewerNotes}" />
                          <Data Name="sourceReviewerResponseLookup" Value="{ReviewerResponseLookup}" />
                        </Variables>
                        <ItemsIterate Entities="{variable:rootReviewers}" VariableScope="Inherit">
                          <ItemsIterate.Directives>
                            <Variables>
                              <Data Name="targetReviewerId" Value="{Reviewer.Id}" />
                            </Variables>
                            <Map Direction="None" DisableAutoMap="True">
                              <Map.Assignments>
                                <Text To="ReviewerNotes" Value="{variable:sourceReviewerNotes}" />
                                <Text To="ReviewerResponseLookup" Value="{variable:sourceReviewerResponseLookup}" />
                              </Map.Assignments>
                              <Map.Condition>
                                <AllOf>
                                  <Variable Name="targetReviewerId" Type="EqualTo" ValueVariable="sourceReviewerId" />
                                </AllOf>
                              </Map.Condition>
                            </Map>
                          </ItemsIterate.Directives>
                        </ItemsIterate>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Map Direction="Up" MapDef="ConsultantReviewerMap">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <!-- Update ReviewerResponseDate for HubRoot.Reviewers -->
                    <Map Direction="None" ToPath="HubRoot.Reviewers">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate">
                          <CurrentDate.Condition>
                            <Variable Type="EqualTo" Name="ReviewerVariable" ValuePath="Reviewer.Id" />
                          </CurrentDate.Condition>
                        </CurrentDate>
                      </Map.Assignments>
                    </Map>
                    <!-- <Map Direction="None" ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map> -->
                    <!-- Map OutwardReferences back down to open child task(s) -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubParent.HubTasks.TaskData">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Message Subject="[MessageSubjectConsultantReviewer]" Body="[MessageBodyConsultantReviewerResponse]" Actors="HubParentOfficialReviewer" />
                    <TaskClose />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ReviewerResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
              <TaskDef.Save>
                <Save.Directives>
                  <Markup ReferencePath="HubParent.OutwardReferences">
                    <Markup.Operations>
                      <PublishDraft />
                    </Markup.Operations>
                  </Markup>
                </Save.Directives>
              </TaskDef.Save>
            </TaskDef>
            <TaskDef Name="OfficialReviewerReturnedTask" ViewDef="OfficialReviewerTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectInReviewReturned]" ShareTask="True">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReviewReturned]" Body="[MessageBodySubmitOfficialReviewerReturned]" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="FromConsultantToConsultant">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Mappings>
                        <Mapping From="ConsultantReviewPeriod" To="ConsultantReviewPeriod" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerTask" Actors="ConsultantReviewerNotResponded" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <ItemsCommand ItemsPath="Reviewers" Label="[ReturnToReviewers]" Name="ReturnIndividualReviewers" Prompt.ViewDef="ReturnConsultantReasonPromptView" Prompt.Label="[ReturnReasonLabel]">
                  <ItemsCommand.VisibleWhen>
                    <Data Path="ReviewerResponseDate" Type="HasValue" />
                  </ItemsCommand.VisibleWhen>
                  <ItemsCommand.Directives>
                    <Map>
                      <Map.Assignments>
                        <Resolve To="CurrentOfficial" ResolveType="AccountContact" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="PromptReturnConsultantReason" To="PromptReturnConsultantReason" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerReturnTask" Actors="ConsultantReviewer" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </ItemsCommand.Directives>
                </ItemsCommand>
                <Command Label="[SubmitToReviewersLabel]" Actors="Everyone" Name="SubmitToReviewers">
                  <Command.VisibleWhen>
                    <AnyOf>
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                    </AnyOf>
                  </Command.VisibleWhen>
                  <Command.Directives>
                    <Task TaskDef="ConsultantReviewerTask" Actors="ConsultantReviewerNotSent" MinimumParticipants="0" From.UsePath="Reviewers" />
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Empty" To="ReviewerDateSent" />
                      </Map.Assignments>
                    </Map>
                  </Command.Directives>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[FieldResponseRequiredLabel]">
                          <Assert.Condition>
                            <Data Path="Response" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <CurrentDate To="OfficialResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="UpdateDaysInReview" />
                    <TaskClose />
                    <Event Name="ToRespond" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
          </Step.TaskDefs>
          <Flow_Properties />
        </Step>
        <Step Name="InReviewSequential" Label="[InReviewSequentialStepLabel]" Save.Actors="AdministratorRole,ModeratorRole,ContributorRole" Delete.Disabled="True" Process.Disabled="True">
          <Step.Edit>
            <Edit.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Edit.VisibleWhen>
          </Step.Edit>
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="248" />
          </Step.Views>
          <Step.Commands>
            <Command Label="[RecallLabel]" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator" Name="Recall" Prompt.ViewDef="RecallView" Prompt.Label="[FieldRecallReasonLabel]">
              <Command.Directives>
                <Message Actors="OfficialReviewer" Subject="[SubjMsgToOfficialRecallLabel]" Body="[BodyMsgToOfficialRecallLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="OfficialReviewer" Subject="[SubjMsgToOfficialRecallRevisionLabel]" Body="[BodyMsgToOfficialRecallRevisionLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="ConsultantReviewer" Subject="[SubjMsgToConsultantRecallLabel]" Body="[BodyMsgToConsultantRecallLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasNoValue" />
                  </Message.Condition>
                </Message>
                <Message Actors="ConsultantReviewer" Subject="[SubjMsgToConsultantRecallRevisionLabel]" Body="[BodyMsgToConsultantRecallRevisionLabel]">
                  <Message.Condition>
                    <Data Path="Revision" Type="HasValue" />
                  </Message.Condition>
                </Message>
                <Map Direction="None">
                  <Map.Assignments>
                    <Empty To="DateSubmittedToOfficial" />
                    <Boolean To="SequentialReviewStarted" Value="False" />
                  </Map.Assignments>
                </Map>
                <Function Name="UpdateDaysInReview" />
                <Event Name="ToRecall" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="In Review" />
                    <CurrentDate To="DateSubmittedToOfficial" />
                    <Empty To="OfficialResponseDate" AppliesWhen="Always" />
                  </Map.Assignments>
                </Map>
                <Function Name="UpdateDaysInReview" />
                <Map Direction="None" ToPath="Reviewers">
                  <Map.Assignments>
                    <Empty To="ReviewerDateSent" />
                    <Empty To="ReviewerResponseDate" />
                  </Map.Assignments>
                </Map>
                <Message Subject="[MessageSubjectSubmittedForReview]" Body="[MessageBodySubmittedForReview]" Attach.References="False" />
                <Task TaskDef="OfficialReviewerTask" Actors="OfficialReviewer">
                  <Task.Condition>
                    <AllOf>
                      <Data Path="OfficialReviewer" Type="HasValue" />
                      <Variable Name="ReturnStatus" Type="NotEqualTo" Value="Returned" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </Task.Condition>
                </Task>
                <Task TaskDef="OfficialReviewerReturnedTask" Actors="OfficialReviewer">
                  <Task.Condition>
                    <AllOf>
                      <Data Path="OfficialReviewer" Type="HasValue" />
                      <Variable Name="ReturnStatus" Type="EqualTo" Value="Returned" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </Task.Condition>
                </Task>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRecall">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="New" />
                  </Map.Assignments>
                </Map>
                <Map Direction="None" ToPath="Reviewers">
                  <Map.Assignments>
                    <Empty To="ReviewerDateSent">
                      <Empty.Condition>
                        <Data Path="ReviewerResponseDate" Type="HasNoValue" />
                      </Empty.Condition>
                    </Empty>
                    <Empty To="ReviewerResponseDueDate">
                      <Empty.Condition>
                        <Data Path="ReviewerResponseDate" Type="HasNoValue" />
                      </Empty.Condition>
                    </Empty>
                  </Map.Assignments>
                </Map>
                <StepTo Step="New" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRespond">
              <OnEvent.Directives>
                <TaskClose />
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Response Received" />
                    <CurrentDate To="OfficialResponseDate" />
                    <Resolve ResolveType="AccountContact" To="CurrentOfficial" />
                  </Map.Assignments>
                </Map>
                <Function Name="UpdateDaysInReview" />
                <Message Actors="SubmittalCoordinator" Subject="[MessageSubjectOfficialReviewerResponded]" Body="[MessageBodyOfficialReviewerResponse]">
                  <Message.Condition>
                    <Data Path="NotifyResponseDistributionOnCompleted" Type="NotEqualTo" Value="True" />
                  </Message.Condition>
                </Message>
                <Message Actors="SubmittalCoordinator,ResponseDistribution" Subject="[MessageSubjectOfficialReviewerResponded]" Body="[MessageBodyOfficialReviewerResponseWithCC]">
                  <Message.Condition>
                    <Data Path="NotifyResponseDistributionOnCompleted" Type="EqualTo" Value="True" />
                  </Message.Condition>
                </Message>
                <StepTo Step="CoordinatorReview" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="StartSequentialReview">
              <OnEvent.Directives>
                <TaskClose />
                <Task TaskDef="OfficialReviewerInReviewTask" Actors="OfficialReviewer" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="RestartSequentialReview">
              <OnEvent.Directives>
                <TaskClose />
                <Task TaskDef="OfficialReviewerTask" Actors="OfficialReviewer" Disabled="False" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ContinueSequentialReview">
              <OnEvent.Directives>
                <TaskClose />
                <Task TaskDef="OfficialReviewerInReviewTask" Actors="OfficialReviewer" Disabled="False" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="RecallConfirm">
              <OnEvent.Directives>
                <TaskClose />
                <Map>
                  <Map.Assignments>
                    <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                    <Boolean To="SequentialReviewStarted" Value="False" />
                  </Map.Assignments>
                </Map>
                <Task TaskDef="OfficialReviewerTask" Actors="OfficialReviewer" />
                <Event Name="Recalled" Direction="Down" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ReviewComplete">
              <OnEvent.Directives>
                <TaskClose />
                <Task Actors="OfficialReviewer" TaskDef="OfficialReviewerReviewReadyTask" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ReturnToOfficial">
              <OnEvent.Directives>
                <TaskClose />
                <Task Actors="OfficialReviewer" TaskDef="OfficialReviewerTask" />
                <Event Name="Recalled" Direction="Down" />
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.MapDefs>
            <MapDef Name="ConsultantReviewerMap">
              <MapDef.Mappings>
                <Mapping From="ReviewerResponseDate" To="ReviewerResponseDate" />
                <!-- <Mapping From="OutwardReferences" To="OutwardReferences" /> -->
              </MapDef.Mappings>
            </MapDef>
          </Step.MapDefs>
          <Step.TaskDefs>
            <TaskDef Name="OfficialReviewerTask" ViewDef="OfficialReviewerSequentialTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectInReview]" Save.Disabled="True">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReview]" Body="[MessageBodySubmitOfficialReviewer]" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map FromPath="HubParent" ToPath="Reviewers" MapDef="SyncReviewPeriod" />
                    <Map ToPath="HubParent">
                      <Map.Assignments>
                        <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Map>
                      <Map.Assignments>
                        <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="Recalled">
                  <OnEvent.Directives>
                    <Map ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerDateSent" />
                        <Empty To="ReviewerResponseDate" />
                        <Empty To="ReviewerResponseDueDate" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <Command Name="Save" Label="[ActionSaveLabel]">
                  <Command.Directives>
                    <Variables>
                      <Data Name="currentCount" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Set up the indexing -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="currentCount" To="{variable:currentCount}" Value="1" />
                        </Variables>
                        <Map>
                          <Map.Assignments>
                            <Integer To="Index" Variable="currentCount" />
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Assignments>
                        <Empty To="Reviewers" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                  </Command.Directives>
                </Command>
                <Command Name="SendToConsultants" Label="[StartReviewLabel]" Actors="Everyone">
                  <Command.VisibleWhen>
                    <AnyOf>
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                      <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                    </AnyOf>
                  </Command.VisibleWhen>
                  <Command.Directives>
                    <!--<Function Name="ProcessConsultantDueDate" />-->
                    <Variables>
                      <Data Name="currentCount" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Set up the indexing -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="currentCount" To="{variable:currentCount}" Value="1" />
                        </Variables>
                        <Map>
                          <Map.Assignments>
                            <Integer To="Index" Variable="currentCount" />
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!--<Map ToPath="Reviewers">
                      <Map.Assignments>
                        <CurrentDate AppliesWhen="Always" To="ReviewerResponseDueDate" OffsetFrom="ReviewPeriod" OffsetType="Day">
                          <CurrentDate.Condition>
                            <Data Path="ReviewPeriod" Type="HasValue" />
                          </CurrentDate.Condition>
                        </CurrentDate>
                      </Map.Assignments>
                    </Map>-->
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessage_StartSequentialReview_OrderLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Order" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[ValidationMessage_StartSequentialReview_ReviewerLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Reviewer" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <!--<Assert Message="[ValidationMessage_StartSequentialReview_ResponseDateDueLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="ReviewerResponseDueDate" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>-->
                      </Assertion.Asserts>
                    </Assertion>
                    <Map ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerDateSent" />
                        <Empty To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Assignments>
                        <Empty To="Reviewers" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                    <Map MapDef="SyncReferences" ToPath="HubParent" />
                    <!-- Map OutwardReferences back down to open child task(s) -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubParent.HubTasks.TaskData">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Event Name="StartSequentialReview" />
                  </Command.Directives>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[FieldResponseRequiredLabel]">
                          <Assert.Condition>
                            <Data Path="Response" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- publish official reviewer markups -->
                    <Markup ReferencePath="OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                        <EndCollaboration />
                      </Markup.Operations>
                    </Markup>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <CurrentDate To="OfficialResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="UpdateDaysInReview" />
                    <Event Name="ToRespond" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="ConsultantReviewerTask" ViewDef="ConsultantReviewerSequentialTaskView" EntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewerWorkflowItem" Label="[MessageSubjectToConsultantReviewer]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectToConsultantReviewer]" Body="[MessageBodySubmitConsultantReviewer]" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map Direction="Current" From="HubParent">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Variables>
                      <Data Name="ReviewerId" Value="{Reviewer.Id}" />
                    </Variables>
                    <Map FromPath="HubParent.Reviewers">
                      <Map.Mappings>
                        <Mapping From="ReviewerResponseDueDate" To="Task_DueDateTime" />
                      </Map.Mappings>
                      <Map.Condition>
                        <AllOf>
                          <Data Path="Order" Type="EqualTo" ValuePath="HubParent.CurrentSequentialReviewNumber" />
                          <Data Path="Reviewer.Id" Type="EqualTo" ValueVariable="ReviewerId" />
                        </AllOf>
                      </Map.Condition>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <Command Name="ConsultantToNewConsultant" Label="[AddSecondaryRespondersLabel]">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Add new reviewers to the HubParent.Reviewers list -->
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="NewResponders" To="Reviewers" DistinctPath="Reviewer" MapDef="SourceToReviewer" />
                      </Map.Mappings>
                    </Map>
                    <!-- Count the number of new reviewers with unpopulated Order attribute -->
                    <Variables>
                      <Data Name="varBlankReviewerCount" Value="0" />
                    </Variables>
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="varBlankReviewerCount" To="{variable:varBlankReviewerCount}" Value="1" />
                        </Variables>
                      </ItemsIterate.Directives>
                      <ItemsIterate.ItemsCondition>
                        <Data Path="Order" Type="HasNoValue" />
                      </ItemsIterate.ItemsCondition>
                    </ItemsIterate>
                    <!-- Get current / next Order and Index attribute -->
                    <Variables>
                      <Data Name="varCurrentSequentialReviewNumber" Value="{HubRoot.CurrentSequentialReviewNumber}" />
                      <Add Name="varNextSequentialReviewNumber" To="{variable:varCurrentSequentialReviewNumber}" Value="1" />
                      <Data Name="varCurrentIndexNumber" Value="{Index}" />
                      <Add Name="varNextIndexNumber" To="{variable:varCurrentIndexNumber}" Value="1" />
                    </Variables>
                    <!-- Adjust Order & Index attributes for previously added reviewers -->
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <!-- Adjust Order -->
                          <Data Name="varCurrentReviewerOrder" Value="{Order}" />
                          <Add Name="varNewReviewerOrder" To="{variable:varBlankReviewerCount}" Value="{variable:varCurrentReviewerOrder}" />
                          <!-- Adjust Index -->
                          <Data Name="varCurrentReviewerIndex" Value="{Index}" />
                          <Add Name="varNewReviewerIndex" To="{variable:varBlankReviewerCount}" Value="{variable:varCurrentReviewerIndex}" />
                        </Variables>
                        <Map Direction="None">
                          <Map.Assignments>
                            <Integer To="Order" Variable="varNewReviewerOrder" />
                            <Integer To="Index" Variable="varNewReviewerIndex" />
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                      <ItemsIterate.ItemsCondition>
                        <Data Path="Order" Type="GreaterThan" ValueVariable="varCurrentSequentialReviewNumber" />
                      </ItemsIterate.ItemsCondition>
                    </ItemsIterate>
                    <!-- Populate Order & Index attribute for reviewers that were added -->
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Map Direction="None">
                          <Map.Assignments>
                            <Integer To="Order" Variable="varNextSequentialReviewNumber" />
                            <Integer To="Index" Variable="varNextIndexNumber" />
                          </Map.Assignments>
                        </Map>
                        <Variables>
                          <Add Name="varNextSequentialReviewNumber" To="{variable:varNextSequentialReviewNumber}" Value="1" />
                          <Add Name="varNextIndexNumber" To="{variable:varNextIndexNumber}" Value="1" />
                        </Variables>
                      </ItemsIterate.Directives>
                      <ItemsIterate.ItemsCondition>
                        <Data Path="Order" Type="HasNoValue" />
                      </ItemsIterate.ItemsCondition>
                    </ItemsIterate>
                    <!-- Clear out the NewResponders attribute -->
                    <Map Direction="None">
                      <Map.Assignments>
                        <Empty To="NewResponders" />
                      </Map.Assignments>
                    </Map>
                    <!-- Map updated reviewer data to HubRoot -->
                    <Event Name="FromConsultantToConsultant" Direction="Up" />
                  </Command.Directives>
                  <Command.VisibleWhen>
                    <AllOf>
                      <Data Path="HubParent.ConsultantsCanAddConsultants" Type="EqualTo" Value="True" />
                      <Data Path="NewResponders" Type="HasValue" />
                    </AllOf>
                  </Command.VisibleWhen>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Path="NewResponders" Message="[NonUserRestrictionLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <AllOf>
                                <Data Type="HasValue" Path="NewResponders" />
                                <Data Type="HasValue" Path="NewResponders.PersonId" />
                              </AllOf>
                              <Data Type="HasNoValue" Path="NewResponders" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Variables>
                      <Data Name="ReviewerId" Value="{Reviewer.Id}" />
                      <Data Name="CurrentOrder" Value="{HubParent.CurrentSequentialReviewNumber}" />
                    </Variables>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerNotesAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerId" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Variable Name="CurrentOrder" Type="NotEqualTo" ValuePath="Order" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerId" Type="EqualTo" ValuePath="Reviewer.Id" />
                                <Variable Name="CurrentOrder" Type="EqualTo" ValuePath="Order" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseLookupAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerId" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Variable Name="CurrentOrder" Type="NotEqualTo" ValuePath="Order" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="SettingRequireConsultantItemResponse" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerResponseLookup" Type="HasValue" />
                                <Variable Name="ReviewerId" Type="EqualTo" ValuePath="Reviewer.Id" />
                                <Variable Name="CurrentOrder" Type="EqualTo" ValuePath="Order" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerId" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Variable Name="CurrentOrder" Type="NotEqualTo" ValuePath="Order" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerId" Type="EqualTo" ValuePath="Reviewer.Id" />
                                <Variable Name="CurrentOrder" Type="EqualTo" ValuePath="Order" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Map Direction="None">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Map>
                          <Map.Assignments>
                            <CurrentDate AppliesWhen="Always" To="ReviewerResponseDate" />
                            <!-- Set consultant due date to today if empty -->
                            <CurrentDate To="ReviewerResponseDueDate">
                              <CurrentDate.Condition>
                                <Data Path="ReviewerResponseDueDate" Type="HasNoValue" />
                              </CurrentDate.Condition>
                            </CurrentDate>
                          </Map.Assignments>
                          <Map.Condition>
                            <AllOf>
                              <Data Type="EqualTo" Path="Reviewer.Id" ValueVariable="ReviewerId" />
                              <Data Type="EqualTo" Path="Order" ValueVariable="CurrentOrder" />
                            </AllOf>
                          </Map.Condition>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Map From="HubParent" FromPath="Reviewers" Direction="Current">
                      <Map.Mappings>
                        <Mapping From="ReviewerNotes" To="ReviewerNotes">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerId" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <!-- publish my markup changes -->
                    <Markup ReferencePath="HubParent.OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                      </Markup.Operations>
                    </Markup>
                    <!-- Map the response up to the main record too -->
                    <Variables>
                      <Entities Name="rootReviewers" Path="HubRoot.Items.Reviewers" />
                    </Variables>
                    <ItemsIterate Path="HubParent.Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Data Name="sourceReviewerId" Value="{Reviewer.Id}" />
                          <Data Name="sourceReviewerNotes" Value="{ReviewerNotes}" />
                          <Data Name="sourceReviewerResponseLookup" Value="{ReviewerResponseLookup}" />
                        </Variables>
                        <ItemsIterate Entities="{variable:rootReviewers}" VariableScope="Inherit">
                          <ItemsIterate.Directives>
                            <Variables>
                              <Data Name="targetReviewerId" Value="{Reviewer.Id}" />
                            </Variables>
                            <Map Direction="None" DisableAutoMap="True">
                              <Map.Assignments>
                                <Text To="ReviewerNotes" Value="{variable:sourceReviewerNotes}" />
                                <Text To="ReviewerResponseLookup" Value="{variable:sourceReviewerResponseLookup}" />
                              </Map.Assignments>
                              <Map.Condition>
                                <Variable Name="targetReviewerId" Type="EqualTo" ValueVariable="sourceReviewerId" />
                              </Map.Condition>
                            </Map>
                          </ItemsIterate.Directives>
                        </ItemsIterate>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- <Map Direction="None" ToPath="HubParent" MapDef="SyncReferences" /> -->
                    <Message Actors="HubParentOfficialReviewer" Subject="[MessageSubjectConsultantResponded]" Body="[MessageBodyConsultantReviewerResponse]" MessageLinkFrom="HubParent" Attach.References="False" />
                    <TaskClose />
                    <Event Name="ToNextConsultantReviewer" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ReviewerResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="OfficialReviewerReturnedTask" ViewDef="OfficialReviewerSequentialTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectInReviewReturned]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReviewReturned]" Body="[MessageBodySubmitOfficialReviewerReturned]" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map ToPath="HubParent">
                      <Map.Assignments>
                        <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Map>
                      <Map.Assignments>
                        <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <Command Name="SendToConsultants" Label="[StartReviewLabel]" Actors="Everyone">
                  <Command.Directives>
                    <Variables>
                      <Data Name="currentCount" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Set up the indexing -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="currentCount" To="{variable:currentCount}" Value="1" />
                        </Variables>
                        <Map>
                          <Map.Assignments>
                            <Integer To="Index" Variable="currentCount" />
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessage_StartSequentialReview_OrderLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Order" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[ValidationMessage_StartSequentialReview_ReviewerLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Reviewer" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <!--<Assert Message="[ValidationMessage_StartSequentialReview_ResponseDateDueLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="ReviewerResponseDueDate" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>-->
                      </Assertion.Asserts>
                    </Assertion>
                    <Map ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerDateSent" />
                        <Empty To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Assignments>
                        <Empty To="Reviewers" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                    <Map MapDef="SyncReferences" ToPath="HubParent" />
                    <!-- Map OutwardReferences back down to open child task(s) -->
                    <Map Direction="None" FromPath="HubParent" ToPath="HubParent.HubTasks.TaskData">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Event Name="StartSequentialReview" />
                  </Command.Directives>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[FieldResponseRequiredLabel]">
                          <Assert.Condition>
                            <Data Path="Response" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- publish official reviewer markups -->
                    <Markup ReferencePath="OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                        <EndCollaboration />
                      </Markup.Operations>
                    </Markup>
                    <Map Direction="Up">
                      <Map.Assignments>
                        <CurrentDate To="OfficialResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="UpdateDaysInReview" />
                    <TaskClose />
                    <Event Name="ToRespond" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="OfficialReviewerInReviewTask" ViewDef="OfficialReviewerInReviewSequentialTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectInSequentialReview]">
              <TaskDef.Commands>
                <Command Name="Recall" Label="[RecallLabel]">
                  <Command.Directives>
                    <Confirm Caption="[ConfirmRecallCaptionLabel]" ContinueEvent="RecallConfirm" Detail="[ConfirmReviewRecallMessageBody]" />
                  </Command.Directives>
                </Command>
                <Command Name="EndToRespond" Label="[ActionEndToRespondLabel]">
                  <Command.Directives>
                    <!-- don't allow to end review if any consultant reviewers responses are required but not done yet  -->
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[Assertion_ConsultantResponseRequired_EndReview]">
                          <Assert.Condition>
                            <AnyOf>
                              <Data Path="ResponseRequired" Type="NotEqualTo" Value="True" />
                              <AllOf>
                                <Data Path="ResponseRequired" Type="IsTrue" />
                                <Data Path="ReviewerResponseDate" Type="HasValue" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- clean up sent dates for unresponded -->
                    <ItemsIterate Path="HubRoot.Reviewers">
                      <ItemsIterate.Directives>
                        <Map>
                          <Map.Assignments>
                            <Empty To="ReviewerDateSent">
                              <Empty.Condition>
                                <Data Path="ReviewerResponseDate" Type="HasNoValue" />
                              </Empty.Condition>
                            </Empty>
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Get the max completed order -->
                    <Variables>
                      <Data Name="MaxOrderCompleted" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Data Name="MaxOrderCompleted" Value="{Order}">
                            <Data.Condition>
                              <AllOf>
                                <Data Path="ReviewerResponseDate" Type="HasValue" />
                                <Data Path="Order" Type="GreaterThan" ValueVariable="MaxOrderCompleted" />
                              </AllOf>
                            </Data.Condition>
                          </Data>
                        </Variables>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- reset CurrentSequentialReviewNumber to the last completed review, so it will continue with correct reviewer if continued -->
                    <Map Direction="None" ToPath="HubRoot">
                      <Map.Assignments>
                        <Integer To="CurrentSequentialReviewNumber" Variable="MaxOrderCompleted" />
                      </Map.Assignments>
                    </Map>
                    <!-- merge references from multiple concurrent consultant reviewers if needed -->
                    <Markup ReferencePath="OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                        <EndCollaboration />
                      </Markup.Operations>
                    </Markup>
                    <!-- copy merged markups up -->
                    <Map Direction="Up" DisableAutoMap="True">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" DoNotMapInternalMarkups="True" />
                      </Map.Mappings>
                    </Map>
                    <Event Name="ReviewComplete" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Function Name="AddTaskToAssignedTo" />
                    <Event Name="ToNextConsultantReviewer" Disabled="False">
                      <Event.Condition>
                        <Data Path="HubRoot.SequentialReviewStarted" Type="NotEqualTo" Value="True" />
                      </Event.Condition>
                    </Event>
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="ToNextConsultantReviewer">
                  <OnEvent.Directives>
                    <Variables>
                      <!-- Ensure default value if attribute is null -->
                      <Data Name="seed" Value="999999" />
                      <Data Name="lowestOrder" Value="{variable:seed}" />
                      <Data Name="previousSequentialReviewNumber" Value="0" />
                      <Data Name="previousSequentialReviewNumber" Value="{CurrentSequentialReviewNumber}">
                        <Data.Condition>
                          <Data Path="CurrentSequentialReviewNumber" Type="HasValue" />
                        </Data.Condition>
                      </Data>
                      <Data Name="responseRequiredPending" Value="False" />
                      <Data Name="reviewComplete" Value="False" />
                      <Data Name="advanceToNextReviewer" Value="False" />
                    </Variables>
                    <Map>
                      <Map.Assignments>
                        <Empty To="CurrentSequentialReviewer" />
                      </Map.Assignments>
                    </Map>
                    <Map ToPath="HubRoot">
                      <Map.Assignments>
                        <Boolean To="SequentialReviewStarted" Value="True" />
                      </Map.Assignments>
                      <Map.Mappings>
                        <Mapping From="CurrentSequentialReviewer" To="CurrentSequentialReviewer" />
                      </Map.Mappings>
                    </Map>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Get the lowest order number greater than or equal the previous order that responded.  -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Variables.Condition>
                            <AllOf>
                              <Data Type="LessThan" Path="Order" ValueVariable="lowestOrder" />
                              <Data Type="GreaterThanOrEqualTo" Path="Order" ValueVariable="previousSequentialReviewNumber" />
                              <Data Type="HasNoValue" Path="ReviewerResponseDate" />
                            </AllOf>
                          </Variables.Condition>
                          <Data Name="lowestOrder" Value="{Order}" />
                        </Variables>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Are there any required responses still pending ?  -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Variables.Condition>
                            <AllOf>
                              <Data Type="EqualTo" Path="Order" ValueVariable="lowestOrder" />
                              <Data Type="EqualTo" Path="Order" ValueVariable="previousSequentialReviewNumber" />
                              <Data Type="IsTrue" Path="ResponseRequired" />
                              <Data Type="HasNoValue" Path="ReviewerResponseDate" />
                            </AllOf>
                          </Variables.Condition>
                          <Data Name="responseRequiredPending" Value="True" />
                        </Variables>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Variables>
                      <!-- Set nextlowestOrder equal to lowestOrder in case there are no duplicate Order numbers to skip-->
                      <Data Name="nextlowestOrder" Value="{variable:lowestOrder}" />
                    </Variables>
                    <TaskClose CloseChildrenOnly="True" From="EventSource">
                      <!-- If there aren't any required responses still pending, but there are still pending respones with the same Order number
                   , close thier tasks and skip over them to get the next Order number. -->
                      <TaskClose.Condition>
                        <AllOf>
                          <Variable Name="responseRequiredPending" Type="NotEqualTo" Value="True" />
                          <Variable Name="lowestOrder" Type="EqualTo" ValueVariable="previousSequentialReviewNumber" />
                        </AllOf>
                      </TaskClose.Condition>
                    </TaskClose>
                    <Variables>
                      <!-- seed the new lowestOrder if skipping-->
                      <Variables.Condition>
                        <AllOf>
                          <Variable Name="responseRequiredPending" Type="NotEqualTo" Value="True" />
                          <Variable Name="lowestOrder" Type="EqualTo" ValueVariable="previousSequentialReviewNumber" />
                        </AllOf>
                      </Variables.Condition>
                      <Data Name="nextlowestOrder" Value="{variable:seed}" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Get new lowestOrder greater than the previous order that responded if skipping-->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Variables.Condition>
                            <AllOf>
                              <Data Type="LessThan" Path="Order" ValueVariable="nextlowestOrder" />
                              <Data Type="GreaterThan" Path="Order" ValueVariable="previousSequentialReviewNumber" />
                              <Data Type="HasNoValue" Path="ReviewerResponseDate" />
                            </AllOf>
                          </Variables.Condition>
                          <Data Name="nextlowestOrder" Value="{Order}" />
                        </Variables>
                      </ItemsIterate.Directives>
                      <ItemsIterate.Condition>
                        <AllOf>
                          <Variable Name="responseRequiredPending" Type="NotEqualTo" Value="True" />
                          <Variable Name="lowestOrder" Type="EqualTo" ValueVariable="previousSequentialReviewNumber" />
                        </AllOf>
                      </ItemsIterate.Condition>
                    </ItemsIterate>
                    <Variables>
                      <!-- Is the review process complete ? -->
                      <Variables.Condition>
                        <Variable Name="nextlowestOrder" Type="EqualTo" ValueVariable="seed" />
                      </Variables.Condition>
                      <Data Name="reviewComplete" Value="True" />
                    </Variables>
                    <Variables>
                      <!-- Advance to next reviewer ? -->
                      <Variables.Condition>
                        <AllOf>
                          <!-- review is not complete, no pending response required, and lowestOrder is the next Order Number -->
                          <Variable Name="reviewComplete" Type="NotEqualTo" Value="True" />
                          <Variable Name="responseRequiredPending" Type="NotEqualTo" Value="True" />
                          <Variable Name="nextlowestOrder" Type="GreaterThan" ValueVariable="previousSequentialReviewNumber" />
                        </AllOf>
                      </Variables.Condition>
                      <Data Name="advanceToNextReviewer" Value="True" />
                    </Variables>
                    <Map>
                      <!-- Assign the new current sequential review number if advancing -->
                      <Map.Assignments>
                        <Integer To="CurrentSequentialReviewNumber" Variable="nextlowestOrder" />
                      </Map.Assignments>
                      <Map.Condition>
                        <AllOf>
                          <Variable Name="advanceToNextReviewer" Type="IsTrue" />
                        </AllOf>
                      </Map.Condition>
                    </Map>
                    <Variables>
                      <Variables.Condition>
                        <Data Path="ConsultantReviewPeriod" Type="HasValue" />
                      </Variables.Condition>
                      <OffsetDate Name="ConsultantDueDateOfficeDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="OfficeDays" Current.Date="True" />
                      <OffsetDate Name="ConsultantDueDateJobSiteDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="WorkDays" Current.Date="True" />
                      <OffsetDate Name="ConsultantDueDateCalendarDays" Offset="{ConsultantReviewPeriod}" OffsetType="Day" CalendarType="Default" Current.Date="True" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Only apply mappings when advancing to the next reviewer -->
                      <ItemsIterate.Directives>
                        <Map>
                          <Map.Assignments>
                            <CurrentDate AppliesWhen="Always" To="ReviewerDateSent" />
                          </Map.Assignments>
                          <Map.Condition>
                            <AllOf>
                              <Data Type="EqualTo" Path="Order" ValueVariable="nextlowestOrder" />
                            </AllOf>
                          </Map.Condition>
                        </Map>
                        <Map>
                          <Map.Mappings>
                            <Mapping FromType="Variable" From="ConsultantDueDateOfficeDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                              <Mapping.Condition>
                                <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="OfficeDays" />
                              </Mapping.Condition>
                            </Mapping>
                            <Mapping FromType="Variable" From="ConsultantDueDateJobSiteDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                              <Mapping.Condition>
                                <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="JobSiteDays" />
                              </Mapping.Condition>
                            </Mapping>
                            <Mapping FromType="Variable" From="ConsultantDueDateCalendarDays" To="ReviewerResponseDueDate" AppliesWhen="Empty">
                              <Mapping.Condition>
                                <Setting AppName="kahua_AEC_SubmittalItem" Name="ConsultantReviewPeriodCalculationSetting" Type="EqualTo" Value="CalendarDays" />
                              </Mapping.Condition>
                            </Mapping>
                          </Map.Mappings>
                          <Map.Condition>
                            <AllOf>
                              <Data Path="Parent.ConsultantReviewPeriod" Type="HasValue" />
                              <Data Type="EqualTo" Path="Order" ValueVariable="nextlowestOrder" />
                            </AllOf>
                          </Map.Condition>
                        </Map>
                        <!-- if review period not specified, need to set ReviewerResponseDueDate   -->
                        <Map>
                          <Map.Assignments>
                            <CurrentDate AppliesWhen="Empty" To="ReviewerResponseDueDate" />
                          </Map.Assignments>
                          <Map.Condition>
                            <AllOf>
                              <Data Path="Parent.ConsultantReviewPeriod" Type="HasValue" />
                              <Data Type="EqualTo" Path="Order" ValueVariable="nextlowestOrder" />
                            </AllOf>
                          </Map.Condition>
                        </Map>
                      </ItemsIterate.Directives>
                      <ItemsIterate.Condition>
                        <AllOf>
                          <Variable Name="advanceToNextReviewer" Type="IsTrue" />
                        </AllOf>
                      </ItemsIterate.Condition>
                    </ItemsIterate>
                    <Map ToPath="HubParent">
                      <Map.Mappings>
                        <!-- Do this before opening the task because of the attribute actor filter -->
                        <Mapping From="CurrentSequentialReviewNumber" To="CurrentSequentialReviewNumber" />
                      </Map.Mappings>
                      <Map.Condition>
                        <Variable Name="advanceToNextReviewer" Type="IsTrue" />
                      </Map.Condition>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent">
                      <Map.Condition>
                        <Variable Name="advanceToNextReviewer" Type="IsTrue" />
                      </Map.Condition>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent">
                      <Map.Condition>
                        <Variable Name="reviewComplete" Type="IsTrue" />
                      </Map.Condition>
                    </Map>
                    <Task Actors="CurrentReviewers" TaskDef="ConsultantReviewerTask" Disabled="False" From.UsePath="Reviewers">
                      <Task.Condition>
                        <Variable Name="advanceToNextReviewer" Type="IsTrue" />
                      </Task.Condition>
                    </Task>
                    <Event Name="ReviewComplete">
                      <Event.Condition>
                        <Variable Name="reviewComplete" Type="IsTrue" />
                      </Event.Condition>
                    </Event>
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="ReviewComplete">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="HubParent" MapDef="SyncReferences" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="ReturnToOfficial">
                  <OnEvent.Directives>
                    <Message Actors="OfficialReviewer" Body="[MessageBodySubmitOfficialReviewerReturned]" Subject="[MessageSubjectReturnOfficial]" Attach.References="False" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="FromConsultantToConsultant">
                  <OnEvent.Directives>
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Assignments>
                        <Empty To="Reviewers" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="OfficialReviewerReviewReadyTask" ViewDef="OfficialReviewerSequentialTaskView" EntityDef="kahua_AEC_SubmittalItem.SubmittalWorkflowItem" Label="[MessageSubjectSequentialComplete]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectInReview]" Body="[MessageBodySubmitOfficialReviewer]" Attach.References="False" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map ToPath="HubRoot">
                      <Map.Assignments>
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="RestartReview">
                  <OnEvent.Directives>
                    <!-- Process new consultant reviewer response due dates -->
                    <!--<Function Name="ProcessConsultantDueDate" />-->
                    <!-- Ensure new consultant reviewers have the required data (order, reviewer, reviewer response date) -->
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessage_StartSequentialReview_OrderLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Order" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[ValidationMessage_StartSequentialReview_ReviewerLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Reviewer" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <!--<Assert Message="[ValidationMessage_StartSequentialReview_ResponseDateDueLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="ReviewerResponseDueDate" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>-->
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Send "recall" message to any outstanding Return to Consultants since those tasks are getting deleted -->
                    <ItemsIterate Path="Reviewers">
                      <ItemsIterate.Directives>
                        <Message To="{Reviewer.EmailAddress}" Subject="[MessageSubjectConsultantReviewRecalledOnRestart]" Body="[MessageBodyConsultantReviewRecalledOnRestart]">
                          <Message.Condition>
                            <AllOf>
                              <Data Path="ReviewerDateSent" Type="HasValue" />
                              <Data Path="ReviewerResponseDate" Type="HasNoValue" />
                            </AllOf>
                          </Message.Condition>
                        </Message>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Clear existing consultant reviewer dates -->
                    <Map ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerDateSent" />
                        <Empty To="ReviewerResponseDate" />
                        <Empty To="ReviewerResponseDueDate" />
                      </Map.Assignments>
                    </Map>
                    <!-- Map up to the HubParent -->
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                    <!-- Clear CurrentSequentialReviewNumber -->
                    <Map>
                      <Map.Assignments>
                        <Empty AppliesWhen="Always" To="CurrentSequentialReviewNumber" />
                        <Boolean To="SequentialReviewStarted" Value="False" />
                      </Map.Assignments>
                    </Map>
                    <!-- Fire event to close current task and restart new one -->
                    <Event Name="RestartSequentialReview" Disabled="False" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="ContinueReview">
                  <OnEvent.Directives>
                    <Variables>
                      <Data Name="currentCount" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <!-- Set up the indexing -->
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="currentCount" To="{variable:currentCount}" Value="1" />
                        </Variables>
                        <Map>
                          <Map.Assignments>
                            <Integer To="Index" Variable="currentCount" />
                          </Map.Assignments>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Display error if no new consultant reviewers have been added -->
                    <Variables>
                      <Data Name="varNewConsultant" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Add Name="varNewConsultant" To="{variable:varNewConsultant}" Value="1">
                            <Add.Condition>
                              <Data Path="ReviewerDateSent" Type="HasNoValue" />
                            </Add.Condition>
                          </Add>
                        </Variables>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessage_StartSequentialReview_NoNewConsultantsLabel]">
                          <Assert.Condition>
                            <Variable Name="varNewConsultant" Type="GreaterThan" Value="0" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Ensure any new reviewers have the required data to continue review -->
                    <!--<Function Name="ProcessConsultantDueDate" />-->
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessage_StartSequentialReview_OrderLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Order" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <Assert Message="[ValidationMessage_StartSequentialReview_ReviewerLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="Reviewer" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>
                        <!--<Assert Message="[ValidationMessage_StartSequentialReview_ResponseDateDueLabel]">
                          <Assert.Condition>
                            <AllOf>
                              <Data Type="HasValue" Path="ReviewerResponseDueDate" />
                            </AllOf>
                          </Assert.Condition>
                        </Assert>-->
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Send "recall" message to any outstanding Return to Consultants since those tasks are getting deleted -->
                    <ItemsIterate Path="Reviewers">
                      <ItemsIterate.Directives>
                        <Message To="{Reviewer.EmailAddress}" Subject="[MessageSubjectConsultantReviewRecalledOnContinue]" Body="[MessageBodyConsultantReviewRecalledOnContinue]">
                          <Message.Condition>
                            <AllOf>
                              <Data Path="ReviewerDateSent" Type="HasValue" />
                              <Data Path="ReviewerResponseDate" Type="HasNoValue" />
                            </AllOf>
                          </Message.Condition>
                        </Message>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Repopulate the reviewer response date for any outstanding Return to Consultants since those tasks are getting deleted -->
                    <ItemsIterate Path="Reviewers">
                      <ItemsIterate.Directives>
                        <Map Direction="None">
                          <Map.Assignments>
                            <CurrentDate AppliesWhen="Empty" To="ReviewerResponseDate" />
                          </Map.Assignments>
                          <Map.Condition>
                            <Data Path="ReviewerDateSent" Type="HasValue" />
                          </Map.Condition>
                        </Map>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Get the max completed order -->
                    <Variables>
                      <Data Name="MaxOrderCompleted" Value="0" />
                    </Variables>
                    <ItemsIterate Path="Reviewers" VariableScope="Inherit">
                      <ItemsIterate.Directives>
                        <Variables>
                          <Data Name="MaxOrderCompleted" Value="{Order}">
                            <Data.Condition>
                              <AllOf>
                                <Data Path="ReviewerResponseDate" Type="HasValue" />
                                <Data Path="Order" Type="GreaterThan" ValueVariable="MaxOrderCompleted" />
                              </AllOf>
                            </Data.Condition>
                          </Data>
                        </Variables>
                      </ItemsIterate.Directives>
                    </ItemsIterate>
                    <!-- Ensure all new reviewers are setup to be past the current reviewers -->
                    <Assertion Path="Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ValidationMessageOrderInvalidLabel]">
                          <Assert.Condition>
                            <AnyOf>
                              <Data Path="ReviewerDateSent" Type="HasValue" />
                              <Data Path="Order" Type="GreaterThan" ValueVariable="MaxOrderCompleted" />
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- Map up to the HubParent -->
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                    <Map MapDef="SyncReferences" Direction="None" ToPath="HubParent" />
                    <!-- Call this event to continue the sequential review with the new consultant reviewers -->
                    <Event Name="ContinueSequentialReview" Disabled="False" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <ItemsCommand ItemsPath="Reviewers" Label="[ReturnToReviewers]" Name="ReturnIndividualReviewers" Prompt.ViewDef="ReturnConsultantReasonPromptView" Prompt.Label="[ReturnReasonLabel]">
                  <ItemsCommand.VisibleWhen>
                    <Data Path="ReviewerResponseDate" Type="HasValue" />
                  </ItemsCommand.VisibleWhen>
                  <ItemsCommand.Directives>
                    <Map Direction="None" ToPath="Reviewers">
                      <Map.Assignments>
                        <Empty To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map ToPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="PromptReturnConsultantReason" To="PromptReturnConsultantReason" />
                      </Map.Mappings>
                    </Map>
                    <Task TaskDef="ConsultantReviewerReturnTask" Actors="ConsultantReviewer" MinimumParticipants="0" From.UsePath="Reviewers" />
                  </ItemsCommand.Directives>
                </ItemsCommand>
                <Command Label="[RestartReviewLabel]" Actors="Everyone" Name="RestartReview">
                  <Command.Directives>
                    <Confirm Caption="[ConfirmRecallCaptionLabel]" ContinueEvent="RestartReview" Detail="[ConfirmReviewRecallMessageBody]" />
                  </Command.Directives>
                </Command>
                <Command Label="[ContinueReviewLabel]" Actors="Everyone" Name="ContinueReviewProcess">
                  <Command.Directives>
                    <Confirm Caption="[ConfirmContinueReviewCaptionLabel]" ContinueEvent="ContinueReview" Detail="[ConfirmContinueReviewMessageBody]" />
                  </Command.Directives>
                </Command>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Assertion>
                      <Assertion.Asserts>
                        <Assert Message="[FieldResponseRequiredLabel]">
                          <Assert.Condition>
                            <Data Path="Response" Type="HasValue" />
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <!-- publish official reviewer markups -->
                    <Markup ReferencePath="OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                        <EndCollaboration />
                      </Markup.Operations>
                    </Markup>
                    <Map Direction="Up" ToPath="HubParent">
                      <Map.Assignments>
                        <CurrentDate To="OfficialResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <Map MapDef="SyncSequentialReviewers" ToPath="HubParent" />
                    <TaskClose />
                    <Event Name="ToRespond" Direction="Up" />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
            <TaskDef Name="ConsultantReviewerReturnTask" ViewDef="ConsultantReviewerSequentialTaskView" EntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewerWorkflowItem" Label="[MessageSubjectConsultantReviewerTaskRevision]">
              <TaskDef.Messages>
                <Message Actors="TaskOwner" Subject="[MessageSubjectConsultantReviewerTaskRevision]" Body="[MessageBodyConsultantReviewerTaskRevision]" Attach.References="False" Attach.PortableViews="False" />
              </TaskDef.Messages>
              <TaskDef.OnEvents>
                <OnEvent Event="OnOpen">
                  <OnEvent.Directives>
                    <Map Direction="None" FromPath="HubParent">
                      <Map.Mappings>
                        <Mapping From="OutwardReferences" To="OutwardReferences" />
                      </Map.Mappings>
                    </Map>
                    <Function Name="AddTaskToAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
                <OnEvent Event="OnClose">
                  <OnEvent.Directives>
                    <Function Name="RemoveTaskFromAssignedTo" />
                  </OnEvent.Directives>
                </OnEvent>
              </TaskDef.OnEvents>
              <TaskDef.Commands>
                <Command Label="[RespondLabel]" Actors="Everyone" Name="Respond">
                  <Command.Directives>
                    <Variables>
                      <Data Name="ReviewerVariable" Value="{Reviewer.Id}" />
                    </Variables>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerNotesAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseLookupAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="SettingRequireConsultantItemResponse" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerResponseLookup" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Assertion Path="HubParent.Reviewers">
                      <Assertion.Asserts>
                        <Assert Message="[ReviewerResponseAssertionMessage]">
                          <Assert.Condition>
                            <AnyOf>
                              <Variable Name="ReviewerVariable" Type="NotEqualTo" ValuePath="Reviewer.Id" />
                              <Setting AppName="kahua_AEC_SubmittalItem" Name="RequireConsultantItemResponseNotes" Type="EqualTo" Value="False" />
                              <AllOf>
                                <Data Path="ReviewerNotes" Type="HasValue" />
                                <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                              </AllOf>
                            </AnyOf>
                          </Assert.Condition>
                        </Assert>
                      </Assertion.Asserts>
                    </Assertion>
                    <Map From="HubParent" FromPath="Reviewers" Direction="Current">
                      <Map.Mappings>
                        <Mapping From="ReviewerNotes" To="ReviewerNotes">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <!-- Map the response up to the main record too -->
                    <Map From="HubParent" FromPath="Reviewers" Direction="Up">
                      <Map.Mappings>
                        <Mapping From="ReviewerNotes" To="ReviewerNotes">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <Map From="HubParent" FromPath="Reviewers" Direction="Up">
                      <Map.Mappings>
                        <Mapping From="ReviewerResponseLookup" To="ReviewerResponseLookup">
                          <Mapping.Filter>
                            <Filter.Condition>
                              <Variable Name="ReviewerVariable" Type="EqualTo" ValuePath="Reviewer.Id" />
                            </Filter.Condition>
                          </Mapping.Filter>
                        </Mapping>
                      </Map.Mappings>
                    </Map>
                    <Map Direction="Up" MapDef="ConsultantReviewerMap">
                      <Map.Assignments>
                        <CurrentDate To="ReviewerResponseDate" />
                      </Map.Assignments>
                    </Map>
                    <!-- publish my markup changes -->
                    <Markup ReferencePath="HubParent.OutwardReferences">
                      <Markup.Operations>
                        <PublishDraft />
                      </Markup.Operations>
                    </Markup>
                    <!-- Delete current references from both the official reviewer task -->
                    <!-- and the main item record and then resave them -->
                    <Map Direction="None" ToPath="HubParent">
                      <Map.Assignments>
                        <Empty To="OutwardReferences" />
                      </Map.Assignments>
                    </Map>
                    <Map Direction="None" ToPath="HubRoot">
                      <Map.Assignments>
                        <Empty To="OutwardReferences" />
                      </Map.Assignments>
                    </Map>
                    <!-- <Map Direction="None" ToPath="HubParent" MapDef="SyncReferences" /> -->
                    <Map Direction="None" ToPath="HubRoot" MapDef="SyncReferences" />
                    <Message Subject="[MessageSubjectConsultantReviewer]" Body="[MessageBodyConsultantReviewerResponse]" Actors="HubParentOfficialReviewer" />
                    <TaskClose />
                  </Command.Directives>
                </Command>
              </TaskDef.Commands>
              <TaskDef.Mappings>
                <Mapping From="ReviewerResponseDueDate" To="Task_DueDateTime" />
              </TaskDef.Mappings>
            </TaskDef>
          </Step.TaskDefs>
          <Flow_Properties />
        </Step>
        <Step Name="CoordinatorReview" Label="[CoordinatorReviewStepLabel]" Save.Actors="AdministratorRole,ModeratorRole,ContributorRole,OfficialReviewer" Process.Disabled="True">
          <Step.Delete>
            <Delete.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Delete.VisibleWhen>
          </Step.Delete>
          <Step.Edit>
            <Edit.VisibleWhen>
              <AnyOf>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                </AllOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" Value="True" />
              </AnyOf>
            </Edit.VisibleWhen>
          </Step.Edit>
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="249" />
            <View Actors="Everyone" ViewDef="ReviseSubmittalItemView" Id="250" />
            <View ViewDef="NewView" Action="Edit" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator" Id="251" />
          </Step.Views>
          <Step.ItemActions>
            <Form FormName="ReviseSubmittal" Label="[ReviseFormActionLabel]" Actors="AdministratorRole,ModeratorRole,ContributorRole" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" />
          </Step.ItemActions>
          <Step.Commands>
            <Command Label="[ReturnToOfficialLabel]" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator" Name="ReturnToOfficial" Prompt.ViewDef="ReturnOfficialReasonPromptView" Prompt.Label="[ReturnReasonLabel]">
              <Command.Directives>
                <Event Name="ToSubmitReviewers" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[MarkCompleteLabel]" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator,OfficialReviewer" Name="MarkComplete">
              <Command.VisibleWhen>
                <AnyOf>
                  <AllOf>
                    <Permission Actors="OfficialReviewer" />
                    <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="True" />
                  </AllOf>
                  <AllOf>
                    <Permission Actors="SubmittalCoordinator,AdministratorRole,ModeratorRole" />
                    <Setting AppName="kahua_AEC_PackagedSubmittals" Name="OnlyOfficialReviewerCanMarkComplete" Type="EqualTo" Value="False" />
                  </AllOf>
                </AnyOf>
              </Command.VisibleWhen>
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Event Name="SetItemDateCompletedIfEmpty" />
                <Event Name="ToLocked" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[RequestCorrectionsLabel]" Actors="AdministratorRole,ModeratorRole,SubmittalCoordinator" Name="RequestCorrections" Prompt.ViewDef="ReturnCorrectionReasonPromptView" Prompt.Label="[ReturnReasonLabel]">
              <Command.Directives>
                <Directives Set="ValidateLinearLocation" />
                <Event Name="ToRequestSubmission" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="PromptReturnOfficialReason" />
                  </Map.Assignments>
                </Map>
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToReviseItem" />
            <OnEvent Event="ToLocked">
              <OnEvent.Directives>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="Locked" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToRequestSubmission">
              <OnEvent.Directives>
                <Event Direction="Up" Name="CheckSubmittingVendor" />
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <Variables Set="Flags" />
                <StepTo Step="SubmitItem" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToSubmitReviewers">
              <OnEvent.Directives>
                <Event Name="CheckOfficial" Direction="Up" />
                <Event Direction="Up" Name="CheckConsultantReviewers" />
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
                <StepTo Step="InReview">
                  <StepTo.Condition>
                    <Data Type="NotEqualTo" Value="True" Path="IsSequentialReview" />
                  </StepTo.Condition>
                </StepTo>
                <StepTo Step="InReviewSequential">
                  <StepTo.Condition>
                    <Data Type="IsTrue" Path="IsSequentialReview" />
                  </StepTo.Condition>
                </StepTo>
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Step.Save>
            <Save.Directives>
              <Directives Set="ValidateLinearLocation" />
            </Save.Directives>
          </Step.Save>
          <Flow_Properties />
        </Step>
        <Step Name="Locked" Label="[LockedStepLabel]" Edit.Actors="QualityGroupActor,AdministratorRole" Save.Actors="QualityGroupActor,AdministratorRole" Delete.Disabled="True" Process.Disabled="True">
          <Step.Views>
            <View Actors="Everyone" Action="Preview" ViewDef="PreviewView" Id="252" />
            <View Actors="QualityGroupActor,AdministratorRole" Action="Edit" ViewDef="LockedEditView" Id="253" />
          </Step.Views>
          <Step.Send>
            <Send.VisibleWhen>
              <AnyOf>
                <Permission Actors="PIMGroupActor,CentralAdminGroupActor,QualityGroupActor" />
                <AllOf>
                  <Permission Actors="AdministratorRole,ModeratorRole,ContributorRole" />
                  <Data Path="TurnoverIndex.PersonalInformation" Type="NotEqualTo" Value="True" />
                </AllOf>
              </AnyOf>
            </Send.VisibleWhen>
          </Step.Send>
          <Step.Commands>
            <Command Label="[ReopenLabel]" Name="Reopen">
              <Command.VisibleWhen>
                <AnyOf>
                  <Permission Actors="PIMGroupActor,CentralAdminGroupActor,QualityGroupActor" />
                  <AllOf>
                    <Permission Actors="AdministratorRole,ModeratorRole,ContributorRole" />
                    <Data Path="TurnoverIndex.PersonalInformation" Type="NotEqualTo" Value="True" />
                  </AllOf>
                </AnyOf>
              </Command.VisibleWhen>
              <Command.Directives>
                <Event Name="ToReopen" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Label="[DistributeLabel]" Actors="AdministratorRole,ModeratorRole,ContributorRole" Name="Distribute">
              <Command.VisibleWhen>
                <AnyOf>
                  <Permission Actors="PIMGroupActor,CentralAdminGroupActor,QualityGroupActor" />
                  <AllOf>
                    <Permission Actors="AdministratorRole,ModeratorRole,ContributorRole" />
                    <Data Path="TurnoverIndex.PersonalInformation" Type="NotEqualTo" Value="True" />
                  </AllOf>
                </AnyOf>
              </Command.VisibleWhen>
              <Command.Directives>
                <Event Name="ToDistribute" Direction="Up" />
              </Command.Directives>
            </Command>
            <Command Name="UpdateAssetTypeNoPackage" Rebind="True" Label="[SubmittalItemUpdateAssetType]" Action="Preview" Prompt.Type="UpdateAssetType" Prompt.Label="[SubmittalItemUpdateAssetType]">
              <Command.VisibleWhen>
                <AllOf>
                  <Count Path="AssetType" Type="GreaterThan" Value="0" />
                  <AnyOf>
                    <Data Path="SubmittalPackage" Type="HasNoValue" />
                    <AllOf>
                      <Data Path="SubmittalPackage" Type="HasValue" />
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                    </AllOf>
                  </AnyOf>
                </AllOf>
              </Command.VisibleWhen>
              <Command.EnabledWhen>
                <Count Path="OutwardReferences" Type="GreaterThan" Value="0" />
              </Command.EnabledWhen>
            </Command>
          </Step.Commands>
          <Step.OnEvents>
            <OnEvent Event="OnEnter">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Completed" />
                    <Text To="ReturnToClarificationReason" />
                    <Text To="ReturnForCorrectionsReason" />
                    <Text To="ReasonRecall" />
                    <Text To="RecallReason" />
                    <Text To="ReasonForReturnVendor" />
                    <Text To="PromptReturnOfficialReason" />
                    <Text To="PromptReturnConsultantReason" />
                    <Text To="ReturnToReviewersReason" />
                  </Map.Assignments>
                </Map>
                <TaskClose From="EventSource" />
                <Function Name="EmptyAssignedTo" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToReopen">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Reopened" />
                  </Map.Assignments>
                </Map>
                <StepTo Step="New" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="ToDistribute">
              <OnEvent.Directives>
                <MessageEvent Event="SuccessfullyDistributed" Actors="ResponseDistribution" Subject="[MessageSubjectDistribution]" Body="[MessageBodyDistribution]" MessageLinkFrom="Default" Attach.PortableViews="True" Attach.References="True" />
              </OnEvent.Directives>
            </OnEvent>
            <OnEvent Event="SuccessfullyDistributed">
              <OnEvent.Directives>
                <Map Direction="None">
                  <Map.Assignments>
                    <Text To="Status" Value="Distributed">
                      <Text.Condition>
                        <AnyOf>
                          <Setting AppName="kahua_AEC_SubmittalItem" Type="NotEqualTo" Value="True" Name="SettingDisableDistributedStatus" />
                          <Setting AppName="kahua_AEC_SubmittalItem" Type="HasNoValue" Name="SettingDisableDistributedStatus" />
                        </AnyOf>
                      </Text.Condition>
                    </Text>
                    <CurrentDate To="DateLastDistributed" />
                  </Map.Assignments>
                </Map>
              </OnEvent.Directives>
            </OnEvent>
          </Step.OnEvents>
          <Flow_Properties />
        </Step>
      </HubDef.Steps>
      <HubDef.Forms>
        <Form Name="ReviseSubmittal" EntityDef="kahua_AEC_SubmittalItem.ReviseSubmittalForm" ViewDef="ReviseSubmittalItemView">
          <Form.Behaviors>
            <AutoRevision />
          </Form.Behaviors>
          <Form.OpenActions>
            <Map From.UseOrigin="True" To.UseForm="True" />
          </Form.OpenActions>
          <Form.Operations>
            <Operation Label="[ActionSaveLabel]" Actors="Everyone" Name="Save">
              <Operation.Actions>
                <Assertion From.UseForm="True">
                  <Assertion.Asserts>
                    <Assert Message="[RevisionNotEmptyAssertionMessage]">
                      <Assert.Condition>
                        <Data Path="NewRevision" Type="HasValue" />
                      </Assert.Condition>
                    </Assert>
                  </Assertion.Asserts>
                </Assertion>
                <Variables From.UseForm="True">
                  <Data Name="IncludeReferencesOnNewRevisionValue" Value="{IncludeReferencesOnNewRevision}" />
                </Variables>
                <Map Direction="None" MapDef="RevisionsMap" From.UseOrigin="True" To.UseOrigin="True" MapCondition.UseForm="True" Merge.Mode="Append">
                  <Map.Condition>
                    <Data Type="HasValue" Path="NewRevision" />
                  </Map.Condition>
                </Map>
                <Map MappingExcludes="Reviewers" DisableAutoMap="True" From.UseForm="True" To.UseOrigin="True">
                  <Map.Assignments>
                    <Text To="Status" Value="Revised" />
                    <Empty To="Response" />
                    <Empty To="ResponseNotes" />
                    <Empty To="ResponseDueDate" />
                    <Empty To="DateSendToOfficialBy" />
                    <CurrentDate OffsetFrom="VendorResubmissionPeriod" OffsetType="Day" AppliesWhen="Always" To="SubmissionDueDate">
                      <CurrentDate.Condition>
                        <Setting AppName="kahua_AEC_PackagedSubmittals" Name="RecalculateSubmissionDueFromVendorDateOnReviseAction" Type="EqualTo" Value="True" />
                      </CurrentDate.Condition>
                    </CurrentDate>
                    <Empty To="DateSubmittedByVendor" />
                    <Empty To="DateSendToOfficialBy" />
                    <Empty To="DateReturnedToVendor" />
                    <Empty To="DateSubmittedToOfficial" />
                    <Empty To="DaysInReview" />
                    <Empty To="OfficialResponseDate" />
                    <Empty To="DateCompleted" />
                    <Empty To="DateLastDistributed" />
                  </Map.Assignments>
                  <Map.Mappings>
                    <Mapping From="NewRevision" To="Revision" />
                  </Map.Mappings>
                  <Map.Condition>
                    <Data Type="HasValue" Path="NewRevision" />
                  </Map.Condition>
                </Map>
                <Map MappingExcludes="Reviewers" DisableAutoMap="True" From.UseForm="True" To.UseOrigin="True">
                  <Map.Assignments>
                    <Empty To="OutwardReferences" />
                  </Map.Assignments>
                  <Map.Condition>
                    <AllOf>
                      <AnyOf>
                        <Variable Name="IncludeReferencesOnNewRevisionValue" Type="HasNoValue" />
                        <Variable Name="IncludeReferencesOnNewRevisionValue" Type="NotEqualTo" Value="True" />
                      </AnyOf>
                      <Data Type="HasValue" Path="NewRevision" />
                    </AllOf>
                  </Map.Condition>
                </Map>
                <StepTo Step="New" />
              </Operation.Actions>
            </Operation>
          </Form.Operations>
        </Form>
        <SubmittalRegistry Name="SubmittalRegistry" Title="Submittal Registry">
          <SubmittalRegistry.CreateFieldDefs>
            <FieldDef Name="TurnoverIndex" Path="TurnoverIndex.SubCategoryRecordTypeLabel" DataTag="FieldTurnoverIndexLabel" Edit.Path="TurnoverIndex" />
            <FieldDef Name="Subject" Path="Subject" Label="[FieldSubjectLabel]" Edit.Path="Subject" />
            <FieldDef Name="Description" Label="[FieldDescriptionLabel]" Path="Description" Edit.Path="Description" />
            <FieldDef Name="Location" Label="[FieldLocationLabel]" Path="Location" Edit.Path="Location" />
            <FieldDef Name="LinearLocation" Label="[FieldLinearLocationLabel]" Path="LinearLocation" Edit.Path="LinearLocation" />
            <FieldDef Name="SubmittalCoordinator" Path="SubmittalCoordinator.ShortLabel" Label="[FieldSubmittalCoordinatorLabel]" Edit.Path="SubmittalCoordinator" />
            <FieldDef Name="SubmittingVendor" Label="[FieldSubmittingVendorLabel]" Path="SubmittingVendor" Edit.Path="SubmittingVendor" />
            <FieldDef Name="SubmissionDueDate" Label="[FieldSubmissionDueDateLabel]" Path="SubmissionDueDate" Edit.Path="SubmissionDueDate" />
            <FieldDef Name="HardCopiesRequired" Label="[FieldHardCopiesRequired]" Path="HardCopiesRequired" Edit.Path="HardCopiesRequired" />
          </SubmittalRegistry.CreateFieldDefs>
          <SubmittalRegistry.ReviewFieldDefs>
            <FieldDef Name="Subject" Path="Subject" Label="[FieldSubjectLabel]" Edit.Path="Subject" />
            <FieldDef Name="Description" Path="Description" Label="[FieldDescriptionLabel]" Edit.Path="Description" />
            <FieldDef Name="Location" Label="[FieldLocationLabel]" Path="Location" Edit.Path="Location" />
            <FieldDef Name="LinearLocation" Label="[FieldLinearLocationLabel]" Path="LinearLocation" Edit.Path="LinearLocation" />
            <FieldDef Name="DateRequiredOnsite" Label="[FieldDateRequiredOnsiteLabel]" Path="DateRequiredOnsite" Edit.Path="DateRequiredOnsite" />
            <FieldDef Name="HardCopiesRequired" Label="[FieldHardCopiesRequired]" Path="HardCopiesRequired" Edit.Path="HardCopiesRequired" />
            <FieldDef Name="Priority" Label="[FieldPriorityLabel]" Path="Priority" Edit.Path="Priority" />
            <FieldDef Name="SubmittalCoordinator" Path="SubmittalCoordinator.ShortLabel" Label="[FieldSubmittalCoordinatorLabel]" Edit.Path="SubmittalCoordinator" />
            <FieldDef Name="SubmittingVendor" Label="[FieldSubmittingVendorLabel]" Path="SubmittingVendor" Edit.Path="SubmittingVendor" />
            <FieldDef Name="SubmissionDueDate" Label="[FieldSubmissionDueDateLabel]" Path="SubmissionDueDate" Edit.Path="SubmissionDueDate" />
            <FieldDef Name="VendorSubmissionPeriod" Label="[FieldVendorSubmissionPeriodLabel]" Path="VendorSubmissionPeriod" Edit.Path="VendorSubmissionPeriod" />
            <FieldDef Name="VendorResubmissionPeriod" Label="[FieldVendorResubmissionPeriodLabel]" Path="VendorResubmissionPeriod" Edit.Path="VendorResubmissionPeriod" />
            <FieldDef Name="OfficialReviewer" Label="[FieldOfficialReviewerLabel]" Path="OfficialReviewer.ShortLabel" Edit.Path="OfficialReviewer" />
            <FieldDef Name="ReviewPeriod" Path="ReviewPeriod" Label="[FieldReviewPeriodLabel]" Edit.Path="ReviewPeriod" />
            <FieldDef Name="DateSendToOfficialBy" Path="DateSendToOfficialBy" Label="[FieldDateSendToOfficialByLabel]" Edit.Path="DateSendToOfficialBy" />
          </SubmittalRegistry.ReviewFieldDefs>
        </SubmittalRegistry>
        <Import Name="ImportSubmittalItemsForm" ImportDef="SubmittalItemsImportDef" Title="[AppLabel]" />
      </HubDef.Forms>
      <HubDef.MapDefs>
        <MapDef Name="SourceToReviewer">
          <MapDef.Mappings>
            <Mapping FromType="Source" To="Reviewer" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="RevisionsMap">
          <MapDef.Mappings>
            <Mapping FromType="Source" To="Revisions" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="CopyReviewers">
          <MapDef.Mappings>
            <Mapping From="Index" To="Index" />
            <Mapping From="Order" To="Order" />
            <Mapping From="Reviewer" To="Reviewer" />
            <Mapping From="ReviewerResponseDueDate" To="ReviewerResponseDueDate" />
            <Mapping From="ReviewerNotes" To="ReviewerNotes" />
            <Mapping From="ReviewerResponseLookup" To="ReviewerResponseLookup" />
            <Mapping From="ReviewerResponseDate" To="ReviewerResponseDate" />
            <Mapping From="ReviewerDateSent" To="ReviewerDateSent" />
            <Mapping From="ResponseRequired" To="ResponseRequired" />
            <Mapping From="ReviewPeriod" To="ReviewPeriod" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="SyncReviewers">
          <MapDef.Mappings>
            <Mapping From="SubmittalCoordinator" To="SubmittalCoordinator" AppliesWhen="Always" />
            <Mapping From="SubmittingVendor" To="SubmittingVendor" AppliesWhen="Always" />
            <Mapping From="OfficialReviewer" To="OfficialReviewer" AppliesWhen="Always" />
            <Mapping From="InstructionsToOfficial" To="InstructionsToOfficial" AppliesWhen="Always" />
            <Mapping From="InstructionsToReviewers" To="InstructionsToReviewers" AppliesWhen="Always" />
            <Mapping From="SubmissionDueDate" To="SubmissionDueDate" AppliesWhen="Always" />
            <Mapping From="DateRequestedFromVendor" To="RequestedfromVendor" AppliesWhen="Always" />
            <Mapping From="DateSubmittedByVendor" To="DateSubmittedByVendor" AppliesWhen="Always" />
            <Mapping From="VendorSubmissionPeriod" To="VendorSubmissionPeriod" AppliesWhen="Always" />
            <Mapping From="DateSendToOfficialBy" To="DateSendToOfficialBy" AppliesWhen="Always" />
            <Mapping From="DateSubmittedToOfficial" To="DateSubmittedToOfficial" AppliesWhen="Always" />
            <Mapping From="ReviewPeriod" To="ReviewPeriod" AppliesWhen="Always" />
            <Mapping From="DaysInReview" To="DaysInReview" AppliesWhen="Always" />
            <Mapping From="ConsultantReviewPeriod" To="ConsultantReviewPeriod" AppliesWhen="Always" />
            <Mapping From="Priority" To="Priority" AppliesWhen="Always" />
            <Mapping From="ResponseDueDate" To="ResponseDueDate" AppliesWhen="Always" />
            <Mapping From="OfficialResponseDate" To="OfficialResponseDate" AppliesWhen="Always" />
            <Mapping From="DateReturnedToVendor" To="DateReturnedToVendor" AppliesWhen="Always" />
            <Mapping From="ConsultantCanSeeAllResponses" To="ConsultantCanSeeAllResponses" AppliesWhen="Always" />
            <Mapping From="ResponseDistribution" To="ResponseDistribution" AppliesWhen="Always" />
            <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer" />
            <Mapping From="VendorSubmissionPeriod" To="VendorSubmissionPeriod" AppliesWhen="Always" />
            <Mapping From="VendorResubmissionPeriod" To="VendorResubmissionPeriod" AppliesWhen="Always" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="SyncSequentialReviewers">
          <MapDef.Mappings>
            <Mapping From="SubmittalCoordinator" To="SubmittalCoordinator" AppliesWhen="Always" />
            <Mapping From="OfficialReviewer" To="OfficialReviewer" AppliesWhen="Always" />
            <Mapping From="InstructionsToOfficial" To="InstructionsToOfficial" AppliesWhen="Always" />
            <Mapping From="InstructionsToReviewers" To="InstructionsToReviewers" AppliesWhen="Always" />
            <Mapping From="SubmissionDueDate" To="SubmissionDueDate" AppliesWhen="Always" />
            <Mapping From="DateSubmittedByVendor" To="DateSubmittedByVendor" AppliesWhen="Always" />
            <Mapping From="DateSendToOfficialBy" To="DateSendToOfficialBy" AppliesWhen="Always" />
            <Mapping From="DateSubmittedToOfficial" To="DateSubmittedToOfficial" AppliesWhen="Always" />
            <Mapping From="ReviewPeriod" To="ReviewPeriod" AppliesWhen="Always" />
            <Mapping From="DaysInReview" To="DaysInReview" AppliesWhen="Always" />
            <Mapping From="ResponseDueDate" To="ResponseDueDate" AppliesWhen="Always" />
            <Mapping From="OfficialResponseDate" To="OfficialResponseDate" AppliesWhen="Always" />
            <Mapping From="DateReturnedToVendor" To="DateReturnedToVendor" AppliesWhen="Always" />
            <Mapping From="Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Index" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="SyncReviewPeriod">
          <MapDef.Mappings>
            <Mapping From="ReviewPeriod" To="ReviewPeriod" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="SyncResponseDateAndNotesReviewer">
          <MapDef.Mappings>
            <Mapping From="ReviewerNotes" To="ReviewerNotes" />
            <Mapping From="ReviewerResponseLookup" To="ReviewerResponseLookup" />
            <Mapping From="ReviewerResponseDueDate" To="ReviewerResponseDueDate" />
            <Mapping From="ReviewerResponseDate" To="ReviewerResponseDate" />
            <Mapping From="ReviewerDateSent" To="ReviewerDateSent" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="SyncReferences">
          <MapDef.Mappings>
            <Mapping From="OutwardReferences" To="OutwardReferences" />
          </MapDef.Mappings>
        </MapDef>
        <MapDef Name="PackageToItems">
          <MapDef.Mappings>
            <Mapping From="NotifyResponseDistributionOnCompleted" To="NotifyResponseDistributionOnCompleted" />
            <Mapping From="Scope" To="Scope">
              <Mapping.Condition>
                <AnyOf>
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                </AnyOf>
              </Mapping.Condition>
            </Mapping>
            <Mapping From="ConsultantCanSeeAllResponses" To="ConsultantCanSeeAllResponses" />
            <Mapping From="SubmittingVendor" To="SubmittingVendor" />
            <Mapping From="TurnoverIndexCategory" To="TurnoverIndexCategory" />
            <Mapping From="WorkPackage" To="WorkPackage" />
            <Mapping From="SubmittalCoordinator" To="SubmittalCoordinator" />
            <Mapping From="ResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
          </MapDef.Mappings>
        </MapDef>
      </HubDef.MapDefs>
      <HubDef.ViewDefs>
        <ViewDef Name="ReturnOfficialReasonPromptView" Title="[ProvideReasonLabel]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <TextBox DataTag="FieldPromptReasonLabel" Path="PromptReturnOfficialReason" Lines="6" IsRequired="True" />
        </ViewDef>
        <ViewDef Name="ReturnConsultantReasonPromptView" Title="[ProvideReasonLabel]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <ViewDef.DataLinks>
            <Text To="PromptReturnConsultantReason" RunOnInitialize="True">
              <Text.Condition>
                <Data Type="HasNoValue" Path="PromptInitialized" />
              </Text.Condition>
            </Text>
            <Text To="PromptInitialized" Value="Yes" />
          </ViewDef.DataLinks>
          <TextBox DataTag="FieldPromptReasonLabel" Path="PromptReturnConsultantReason" Lines="6" IsRequired="True" />
        </ViewDef>
        <ViewDef Name="ReturnCorrectionReasonPromptView" Title="[ProvideReasonLabel]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <TextBox DataTag="FieldPromptReasonLabel" Path="ReasonForReturnVendor" Lines="6" IsRequired="True" />
        </ViewDef>
        <ViewDef Name="NewView" Title="[NewSubmittalItemTitle]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <ViewDef.Tagging>
            <Tagging Kind="Location" Cardinality="OneToMany" />
            <Tagging Kind="AssetType" />
            <Tagging Kind="Asset" />
          </ViewDef.Tagging>
          <ViewDef.Explicits>
            <Data Path="SubmittingVendor.Company" />
            <Data Path="CreatedBy" />
            <Data Path="CreatedBy.Company" />
            <Data Path="DomainPartition" />
            <Data Path="DomainCompany" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <ViewDef.DataLinks>
            <!-- allow only 1 consultant flag to be on -->
            <Boolean To="DisplayConsultantResponseUponCompletion" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponConsultantResponse" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponConsultantResponse" />
              </Boolean.DependentPaths>
            </Boolean>
            <Boolean To="DisplayConsultantResponseUponConsultantResponse" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponCompletion" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponCompletion" />
              </Boolean.DependentPaths>
            </Boolean>
            <Queried Path="SubmittalPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Explicits>
                <Data Path="SubmittingVendor" />
                <Data Path="SubmittingVendor.Company" />
              </Queried.Explicits>
              <Queried.Query EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="SubmittalPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="ResponseDistribution" To="ResponseDistribution" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="ResponseDistribution" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="SubmittingVendor" To="SubmittingVendor">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="SubmittingVendor" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" AppliesWhen="Always">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="SubmittalCoordinator" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="OfficialReviewer" To="OfficialReviewer" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="OfficialReviewer" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="Reviewers" To="Reviewers" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="Reviewers" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="Scope" To="Scope">
                  <Map.Condition>
                    <AnyOf>
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="SubmittalPackage" DataType="Entity" />
              </Queried.DependentPaths>
            </Queried>
            <Function Name="SyncParentSubmittalPackage">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="SyncSubmittingVendor">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearConsultantReviewers">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.SubmittingVendor" To="SubmittingVendor">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.SubmittingVendor" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Attribute RunOnInitialize="True" From="SubmittingVendor.Company" To="SubmittingVendorCompany" />
            <Attribute RunOnInitialize="True" From="SubmittalPackage.DateCompleted" To="DateCompleted">
              <Attribute.Condition>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                  <Data Type="HasValue" Path="SubmittalPackage.DateCompleted" />
                  <Data Type="HasNoValue" Path="DateCompleted" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.Scope" To="Scope">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.Scope" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Entity RunOnInitialize="True" To="Reviewers" From="WorkPackage.Reviewers" CreateNewEntities="True" TargetEntityDefinition="kahua_AEC_PackagedSubmittals.SubmittalReviewer" Append="True">
              <Entity.DependentPaths>
                <DependentPath DataType="Entity" Path="TurnoverIndexCategory" />
              </Entity.DependentPaths>
              <Entity.Maps>
                <Map From="Order" To="Order" />
                <Map From="Reviewer" To="Reviewer" />
                <Map From="ResponseRequired" To="ResponseRequired" />
              </Entity.Maps>
              <Entity.Condition>
                <AnyOf>
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                </AnyOf>
              </Entity.Condition>
            </Entity>
            <Function RunOnInitialize="True" Name="SyncWorkPackage">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
            </Function>
            <!--Function Name="DefaultSubmittalCoordinator">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
              <Function.Condition>
              <AnyOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" />
                <Data Path="TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </AnyOf>                
              </Function.Condition>
            </Function-->
            <Function Name="ClearValidation">
              <Function.DependentPaths>
                <DependentPath Path="QualityValidation" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="DocumentCreator" />
                <DependentPath Path="Subject" />
                <DependentPath Path="DocumentCreator" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearRecordBoxBarcode">
              <Function.DependentPaths>
                <DependentPath Path="HardCopiesRequired" />
              </Function.DependentPaths>
            </Function>
            <!--Function Name="SetSubmittingVendor" RunOnInitialize="True">
              <Function.Condition>
                <AllOf>
                  <Data Path="SubmittingVendor" Type="HasNoValue" />
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                  </AnyOf>
                </AllOf>
              </Function.Condition>
              <Function.DependentPaths>
                <DependentPath Path="TurnoverIndexCategory" />
              </Function.DependentPaths>
            </Function-->
            <Queried RunOnInitialize="True" Path="WorkPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Query EntityDef="kahua_WorkPackage.WorkPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="WorkPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" />
                <Map From="SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="WorkPackage" DataType="Entity" />
              </Queried.DependentPaths>
              <Queried.Condition>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Queried.Condition>
            </Queried>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="SubmittingVendor" />
              </Function.DependentPaths>
              <Function.Condition>
                <Data Path="SubmittingVendor.Company.Id" Type="NotEqualTo" ValuePath="Scope.Company.Id" />
              </Function.Condition>
            </Function>
            <!-- <CurrentUser To="LoggedUser" RunOnInitialize="True" /> -->
          </ViewDef.DataLinks>
          <Region ContentRegion="SubmittalItemNewViewRegion">
            <Region.VisibleWhen>
              <AnyOf>
                <Data Path="Status" Type="EqualTo" Value="New" />
                <Data Path="Status" Type="EqualTo" Value="Response Received" />
              </AnyOf>
            </Region.VisibleWhen>
          </Region>
          <Region ContentRegion="SubmittalItemPreviewViewRegion">
            <Region.VisibleWhen>
              <NoneOf>
                <Data Path="Status" Type="EqualTo" Value="New" />
                <Data Path="Status" Type="EqualTo" Value="Response Received" />
              </NoneOf>
            </Region.VisibleWhen>
          </Region>
        </ViewDef>
        <ViewDef Name="NewEditView" Title="[EditSubmittalItemTitle]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <ViewDef.Tagging>
            <Tagging Kind="Location" Cardinality="OneToMany" />
            <Tagging Kind="AssetType" />
            <Tagging Kind="Asset" />
          </ViewDef.Tagging>
          <ViewDef.Explicits>
            <Data Path="SubmittingVendor.Company" />
            <Data Path="CreatedBy" />
            <Data Path="CreatedBy.Company" />
            <Data Path="DomainPartition" />
            <Data Path="DomainCompany" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <ViewDef.DataLinks>
            <!-- allow only 1 consultant flag to be on -->
            <Boolean To="DisplayConsultantResponseUponCompletion" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponConsultantResponse" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponConsultantResponse" />
              </Boolean.DependentPaths>
            </Boolean>
            <Boolean To="DisplayConsultantResponseUponConsultantResponse" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponCompletion" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponCompletion" />
              </Boolean.DependentPaths>
            </Boolean>
            <Queried Path="SubmittalPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Explicits>
                <Data Path="SubmittingVendor" />
                <Data Path="SubmittingVendor.Company" />
              </Queried.Explicits>
              <Queried.Query EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="SubmittalPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="ResponseDistribution" To="ResponseDistribution" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="ResponseDistribution" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="SubmittingVendor" To="SubmittingVendor">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="SubmittingVendor" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" AppliesWhen="Always">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="SubmittalCoordinator" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="OfficialReviewer" To="OfficialReviewer" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="OfficialReviewer" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="Reviewers" To="Reviewers" MatchType="Multiple">
                  <Map.Condition>
                    <AnyOf>
                      <AllOf>
                        <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="False" />
                        <Data Path="Reviewers" Type="HasNoValue" />
                      </AllOf>
                      <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
                <Map From="Scope" To="Scope">
                  <Map.Condition>
                    <AnyOf>
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                    </AnyOf>
                  </Map.Condition>
                </Map>
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="SubmittalPackage" DataType="Entity" />
              </Queried.DependentPaths>
            </Queried>
            <Function Name="SyncParentSubmittalPackage">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="SyncSubmittingVendor">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearConsultantReviewers">
              <Function.DependentPaths>
                <DependentPath Path="SubmittalPackage" />
              </Function.DependentPaths>
            </Function>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.SubmittingVendor" To="SubmittingVendor">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.SubmittingVendor" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Attribute RunOnInitialize="False" From="SubmittingVendor.Company" To="SubmittingVendorCompany" />
            <Attribute RunOnInitialize="True" From="SubmittalPackage.DateCompleted" To="DateCompleted">
              <Attribute.Condition>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                  <Data Type="HasValue" Path="SubmittalPackage.DateCompleted" />
                  <Data Type="HasNoValue" Path="DateCompleted" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.Scope" To="Scope">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.Scope" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Entity RunOnInitialize="True" To="Reviewers" From="WorkPackage.Reviewers" CreateNewEntities="True" TargetEntityDefinition="kahua_AEC_PackagedSubmittals.SubmittalReviewer" Append="True">
              <Entity.DependentPaths>
                <DependentPath DataType="Entity" Path="TurnoverIndexCategory" />
              </Entity.DependentPaths>
              <Entity.Maps>
                <Map From="Order" To="Order" />
                <Map From="Reviewer" To="Reviewer" />
                <Map From="ResponseRequired" To="ResponseRequired" />
              </Entity.Maps>
              <Entity.Condition>
                <AnyOf>
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                </AnyOf>
              </Entity.Condition>
            </Entity>
            <Function RunOnInitialize="True" Name="SyncWorkPackage">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
            </Function>
            <!--Function Name="DefaultSubmittalCoordinator">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
              <Function.Condition>
              <AnyOf>
                <Data Path="SubmittalPackage" Type="HasNoValue" />
                <Data Path="TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </AnyOf>                
              </Function.Condition>
            </Function-->
            <Function Name="ClearValidation">
              <Function.DependentPaths>
                <DependentPath Path="QualityValidation" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="DocumentCreator" />
                <DependentPath Path="Subject" />
                <DependentPath Path="DocumentCreator" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearRecordBoxBarcode">
              <Function.DependentPaths>
                <DependentPath Path="HardCopiesRequired" />
              </Function.DependentPaths>
            </Function>
            <!--Function Name="SetSubmittingVendor" RunOnInitialize="True">
              <Function.Condition>
                <AllOf>
                  <Data Path="SubmittingVendor" Type="HasNoValue" />
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Commissioning" />
                  </AnyOf>
                </AllOf>
              </Function.Condition>
              <Function.DependentPaths>
                <DependentPath Path="TurnoverIndexCategory" />
              </Function.DependentPaths>
            </Function-->
            <Queried RunOnInitialize="True" Path="WorkPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Query EntityDef="kahua_WorkPackage.WorkPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="WorkPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" />
                <Map From="SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="WorkPackage" DataType="Entity" />
              </Queried.DependentPaths>
              <Queried.Condition>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Queried.Condition>
            </Queried>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="SubmittingVendor" />
              </Function.DependentPaths>
              <Function.Condition>
                <Data Path="SubmittingVendor.Company.Id" Type="NotEqualTo" ValuePath="Scope.Company.Id" />
              </Function.Condition>
            </Function>
            <!-- <CurrentUser To="LoggedUser" RunOnInitialize="True" /> -->
          </ViewDef.DataLinks>
          <Region ContentRegion="SubmittalItemNewViewRegion">
            <Region.VisibleWhen>
              <AnyOf>
                <Data Path="Status" Type="EqualTo" Value="New" />
                <Data Path="Status" Type="EqualTo" Value="Response Received" />
              </AnyOf>
            </Region.VisibleWhen>
          </Region>
          <Region ContentRegion="SubmittalItemPreviewViewRegion">
            <Region.VisibleWhen>
              <NoneOf>
                <Data Path="Status" Type="EqualTo" Value="New" />
                <Data Path="Status" Type="EqualTo" Value="Response Received" />
              </NoneOf>
            </Region.VisibleWhen>
          </Region>
        </ViewDef>
        <ViewDef Name="PreviewView" Title="[ViewSubmittalItemTitle]" Permission.AnyOf="kahua_AEC_SubmittalItem.View">
          <ViewDef.Explicits>
            <Data Path="DomainPartition" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <ViewDef.DataLinks>
            <Queried RunOnInitialize="True" Path="WorkPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Query EntityDef="kahua_WorkPackage.WorkPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="WorkPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" />
                <Map From="SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                <Map From="IsSequentialReview" To="IsSequentialReview" />
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="WorkPackage" DataType="Entity" />
              </Queried.DependentPaths>
            </Queried>
            <Entity RunOnInitialize="True" To="Reviewers" From="WorkPackage.Reviewers" CreateNewEntities="True" TargetEntityDefinition="kahua_AEC_PackagedSubmittals.SubmittalReviewer" Append="True">
              <Entity.DependentPaths>
                <DependentPath DataType="Entity" Path="WorkPackage" />
              </Entity.DependentPaths>
              <Entity.Maps>
                <Map From="Order" To="Order" />
                <Map From="Reviewer" To="Reviewer" />
                <Map From="ResponseRequired" To="ResponseRequired" />
              </Entity.Maps>
              <Entity.Condition>
                <AnyOf>
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                </AnyOf>
              </Entity.Condition>
            </Entity>
            <Function RunOnInitialize="True" Name="SyncWorkPackage">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
            </Function>
          </ViewDef.DataLinks>
          <Region ContentRegion="SubmittalItemNewPreviewViewRegion">
            <Region.VisibleWhen>
              <Data Path="Status" Type="EqualTo" Value="New" />
            </Region.VisibleWhen>
          </Region>
          <Region ContentRegion="SubmittalItemPreviewViewRegion">
            <Region.VisibleWhen>
              <Data Path="Status" Type="NotEqualTo" Value="New" />
            </Region.VisibleWhen>
          </Region>
        </ViewDef>
        <ViewDef Name="SubmitItemTaskView" Title="Submit Item {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <ViewDef.Explicits>
            <Data Path="SubmittingVendor.Company" />
            <Data Path="DomainPartition" />
            <Data Path="DomainCompany" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <ViewDef.DataLinks>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.SubmittingVendor" To="SubmittingVendor">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.SubmittingVendor" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Function Name="ClearValidation">
              <Function.DependentPaths>
                <DependentPath Path="QualityValidation" />
              </Function.DependentPaths>
            </Function>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.Scope" To="Scope">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.Scope" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Queried RunOnInitialize="True" Path="WorkPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Query EntityDef="kahua_WorkPackage.WorkPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="WorkPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" />
                <Map From="SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="WorkPackage" DataType="Entity" />
              </Queried.DependentPaths>
            </Queried>
            <!--Entity RunOnInitialize="True" To="Reviewers" From="WorkPackage.Reviewers" CreateNewEntities="True" TargetEntityDefinition="kahua_AEC_PackagedSubmittals.SubmittalReviewer" Append="True">
              <Entity.DependentPaths>
                <DependentPath DataType="Entity" Path="WorkPackage" />
              </Entity.DependentPaths>
              <Entity.Maps>
                <Map From="Order" To="Order" />
                <Map From="Reviewer" To="Reviewer" />
                <Map From="ResponseRequired" To="ResponseRequired" />
              </Entity.Maps>
              <Entity.Condition>
                <AnyOf>
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                  <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />                  
                </AnyOf>
              </Entity.Condition>
            </Entity-->
            <Function RunOnInitialize="True" Name="SyncWorkPackage">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="SubmittingVendor" />
              </Function.DependentPaths>
              <Function.Condition>
                <Data Path="SubmittingVendor.Company.Id" Type="NotEqualTo" ValuePath="Scope.Company.Id" />
              </Function.Condition>
            </Function>
            <!-- <CurrentUser To="LoggedUser" RunOnInitialize="True" /> -->
          </ViewDef.DataLinks>
          <Region ContentRegion="SubmittalItemSubmitItemTaskViewRegion" />
        </ViewDef>
        <ViewDef Name="CoordinatorTriageTaskView" Title="Coordinator Triage {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <ViewDef.Explicits>
            <Data Path="SubmittingVendor.Company" />
            <Data Path="DomainPartition" />
            <Data Path="DomainCompany" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <ViewDef.DataLinks>
            <!-- allow only 1 consultant flag to be on -->
            <Boolean To="DisplayConsultantResponseUponCompletion" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponConsultantResponse" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponConsultantResponse" />
              </Boolean.DependentPaths>
            </Boolean>
            <Boolean To="DisplayConsultantResponseUponConsultantResponse" Value="False">
              <Boolean.Condition>
                <Data Path="DisplayConsultantResponseUponCompletion" Type="IsTrue" />
              </Boolean.Condition>
              <Boolean.DependentPaths>
                <DependentPath Path="DisplayConsultantResponseUponCompletion" />
              </Boolean.DependentPaths>
            </Boolean>
            <Attribute RunOnInitialize="True" From="SubmittalPackage.SubmittingVendor" To="SubmittingVendor">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.SubmittingVendor" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Attribute RunOnInitialize="True" From="SubmittingVendor.Company" To="SubmittingVendorCompany" />
            <Attribute RunOnInitialize="True" From="SubmittalPackage.Scope" To="Scope">
              <Attribute.Condition>
                <AllOf>
                  <Data Type="HasValue" Path="SubmittalPackage.Scope" />
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                </AllOf>
              </Attribute.Condition>
            </Attribute>
            <Queried RunOnInitialize="True" Path="WorkPackage" ClearMapsIfNoResults="false" KeepMapsOnRemoval="true">
              <Queried.Query EntityDef="kahua_WorkPackage.WorkPackage" Partition.Scope="DomainPartition">
                <Query.Matches>
                  <Match ToPath="WorkPackage" />
                </Query.Matches>
              </Queried.Query>
              <Queried.Maps>
                <Map From="SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Map From="SubmittalCoordinator" To="SubmittalCoordinator" />
                <Map From="SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
              </Queried.Maps>
              <Queried.DependentPaths>
                <DependentPath Path="WorkPackage" DataType="Entity" />
              </Queried.DependentPaths>
            </Queried>
            <Function RunOnInitialize="True" Name="SyncWorkPackage">
              <Function.DependentPaths>
                <DependentPath Path="WorkPackage" />
              </Function.DependentPaths>
            </Function>
            <Function Name="ClearScope">
              <Function.DependentPaths>
                <DependentPath Path="SubmittingVendor" />
              </Function.DependentPaths>
              <Function.Condition>
                <Data Path="SubmittingVendor.Company.Id" Type="NotEqualTo" ValuePath="Scope.Company.Id" />
              </Function.Condition>
            </Function>
            <!-- <CurrentUser To="LoggedUser" RunOnInitialize="True" /> -->
          </ViewDef.DataLinks>
          <Region ContentRegion="SubmittalItemCoordinatorTriageViewRegion" />
        </ViewDef>
        <ViewDef Name="OfficialReviewerTaskView" Title="Submittal Item Official Reviewer {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Region ContentRegion="SubmittalItemOfficialReviewerTaskViewRegion" />
        </ViewDef>
        <ViewDef Name="ConsultantReviewerTaskView" Title="Submittal Item Consultant Reviewer {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Item Path="HubParent">
            <Region ContentRegion="SubmittalItemDetailsPreviewRegion" />
            <Region ContentRegion="SubmittalItemWorkPackagePreviewRegion" />
            <Region ContentRegion="SubmittalItemOfficialReviewerPreviewRegion" />
          </Item>
          <Section Label="[AnchorSectionConsultantReviewersLabel]" LabelUpper="[AnchorSectionConsultantReviewersLabelCapitalized]" DataTag="AnchorSectionConstultantReviewers">
            <Section.VisibleWhen>
              <AnyOf>
                <Data Path="HubParent.TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                <Data Path="HubParent.TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
              </AnyOf>
            </Section.VisibleWhen>
            <TextBlock Label="[FieldInstructionsToReviewersLabel]" Path="HubParent.InstructionsToReviewers" DataTag="FieldInstructionsToReviewersLabel" Lines="5" />
            <TextBlock Label="[FieldReviewerLabel]" Path="Reviewer" DataTag="FieldReviewerLabel" />
            <TextBlock Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" />
            <ContactSelect Name="NewConsultants" SelectionMode="Multiple" Path="NewResponders" Label="[FieldNewConsultantReviewersLabel]" KahuaUser="True">
              <ContactSelect.VisibleWhen>
                <Data Path="HubParent.ConsultantsCanAddConsultants" Type="EqualTo" Value="True" />
              </ContactSelect.VisibleWhen>
            </ContactSelect>
            <Items Path="HubParent.Reviewers" DefaultEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" StretchIndex="3">
              <Items.Fields>
                <TextBlock Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldReviewerLabel" HeaderLabel="[FieldReviewerLabel]" WidthRatio="0.2" />
                <TextBlock Label="[FieldReviewerResponseSentDateLabel]" Path="ReviewerDateSent" DataTag="FieldReviewerResponseSentDateLabel" HeaderLabel="[FieldReviewerResponseSentDateLabel]" />
                <TextBlock Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" HeaderLabel="[FieldReviewerResponseDueDateLabel]" WidthRatio="0.2" />
                <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" HeaderLabel="[FieldReviewerResponseDateLabel]" WidthRatio="0.2" />
                <Lookup Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" HeaderLabel="[FieldConsultantResponseLabel]" List="kahua_AEC_SubmittalItem.SubmittalItemResponse">
                  <Lookup.EnabledWhen>
                    <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                  </Lookup.EnabledWhen>
                  <Lookup.VisibleWhen>
                    <AnyOf>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                      </AllOf>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                    </AnyOf>
                  </Lookup.VisibleWhen>
                </Lookup>
                <TextBox Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" Lines="4" HeaderLabel="[FieldReviewerNotesLabel]" WidthRatio="0.4">
                  <TextBox.EnabledWhen>
                    <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                  </TextBox.EnabledWhen>
                  <TextBox.VisibleWhen>
                    <AnyOf>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                      </AllOf>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                    </AnyOf>
                  </TextBox.VisibleWhen>
                </TextBox>
              </Items.Fields>
              <Items.Panel Title="[ConsultantReviewerPanelTitle]">
                <Section Name="DetailsSection" Label="[AnchorSectionDetailsLabel]" LabelUpper="[AnchorSectionDetailsLabelCapitalized]">
                  <TextBlock Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldReviewerLabel" />
                  <TextBlock DataTag="FieldReviewerResponseSentDateLabel" Path="ReviewerDateSent" />
                  <TextBlock Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" />
                  <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" />
                  <Lookup Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse">
                    <Lookup.VisibleWhen>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=3)]" />
                    </Lookup.VisibleWhen>
                  </Lookup>
                  <TextBlock Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse">
                    <TextBlock.VisibleWhen>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                        <Data Path="Reviewer.Id" Type="NotEqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=3)]" />
                      </AllOf>
                    </TextBlock.VisibleWhen>
                  </TextBlock>
                  <TextBox Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" Lines="5">
                    <TextBox.VisibleWhen>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=3)]" />
                    </TextBox.VisibleWhen>
                  </TextBox>
                  <TextBlock Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" Lines="5">
                    <TextBlock.VisibleWhen>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                        <Data Path="Reviewer.Id" Type="NotEqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=3)]" />
                      </AllOf>
                    </TextBlock.VisibleWhen>
                  </TextBlock>
                </Section>
              </Items.Panel>
            </Items>
          </Section>
          <Section Label="[AnchorSectionSubmittalDatesLabel]" LabelUpper="[AnchorSectionSubmittalDatesLabelCapitalized]">
            <Region Name="NoTrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="HubParent.SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="HubParent.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="HubParent.ReviewPeriod" DataTag="FieldReviewPeriodLabel" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="HubParent.ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" />
            </Region>
            <Region Name="TrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="HubParent.SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="HubParent.SubmittalPackage.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="HubParent.SubmittalPackage.ReviewPeriod" DataTag="FieldReviewPeriodLabel" MinValue="0" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="HubParent.SubmittalPackage.ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" />
            </Region>
          </Section>
          <Region ContentRegion="SubmittalItemReferencesReviewTaskRegion" />
        </ViewDef>
        <ViewDef Name="ReviseSubmittalItemView" Title="Revise Submittal Item {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Section Name="DetailsSection" Label="[AnchorSectionDetailsLabel]" LabelUpper="[AnchorSectionDetailsLabelCapitalized]">
            <TextBlock Label="[FieldNumberLabel]" Path="Number" />
            <TextBlock Label="[FieldSubjectLabel]" Path="Subject" />
            <TextBlock Label="[FieldResponseLabel]" Path="Response" DataTag="FieldResponseLabel" />
            <TextBlock Label="[FieldRevisionLabel]" Path="Revision" />
            <TextBlock Label="[FieldNewItemRevisionNumberLabel]" Path="NewRevision" HeaderLabel="New Revision No." />
            <CheckBox Path="IncludeReferencesOnNewRevision" Label="[FieldIncludeReferencesOnNewRevisionLabel]" />
          </Section>
        </ViewDef>
        <ViewDef Name="ConsultantReviewerSequentialTaskView" Title="Submittal Item Consultant Reviewer {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Item Path="HubParent">
            <Region ContentRegion="SubmittalItemDetailsPreviewRegion" />
            <Region ContentRegion="SubmittalItemWorkPackagePreviewRegion" />
            <Region ContentRegion="SubmittalItemOfficialReviewerPreviewRegion" />
          </Item>
          <Section Label="[AnchorSectionConsultantReviewersLabel]" LabelUpper="[AnchorSectionConsultantReviewersLabelCapitalized]" DataTag="AnchorSectionConstultantReviewers">
            <Section.VisibleWhen>
              <AnyOf>
                <Data Path="HubParent.TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                <Data Path="HubParent.TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
              </AnyOf>
            </Section.VisibleWhen>
            <TextBlock Label="[FieldInstructionsToReviewersLabel]" Path="HubParent.InstructionsToReviewers" DataTag="FieldInstructionsToReviewersLabel" Lines="5" />
            <TextBlock Label="[FieldReviewerLabel]" Path="Reviewer" DataTag="FieldReviewerLabel" />
            <TextBlock Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" />
            <TextBlock Path="HubParent.IsSequentialReview" DataTag="FieldInReviewSequentialLabel" />
            <ContactSelect Name="NewConsultants" SelectionMode="Multiple" Path="NewResponders" Label="[FieldNewConsultantReviewersLabel]" KahuaUser="True">
              <ContactSelect.VisibleWhen>
                <AllOf>
                  <Data Path="HubParent.ConsultantsCanAddConsultants" Type="EqualTo" Value="True" />
                  <HubPath Type="EqualTo" Value="kahua_AEC_SubmittalItem.Default\InReviewSequential\OfficialReviewerInReviewTask\ConsultantReviewerTask" />
                </AllOf>
              </ContactSelect.VisibleWhen>
            </ContactSelect>
            <Items Path="HubParent.Reviewers" DefaultEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" StretchIndex="3">
              <Items.Fields>
                <TextBlock Label="[FieldReviewerOrderLabel]" Path="Order" HeaderLabel="[FieldReviewerOrderLabel]" DataTag="FieldReviewerOrderLabel" WidthRatio="0.2" />
                <TextBlock Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldReviewerLabel" HeaderLabel="[FieldReviewerLabel]" WidthRatio="0.2" />
                <TextBlock Label="[FieldReviewerResponseSentDateLabel]" Path="ReviewerDateSent" DataTag="FieldReviewerResponseSentDateLabel" HeaderLabel="[FieldReviewerResponseSentDateLabel]" />
                <TextBlock Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" HeaderLabel="[FieldReviewerResponseDueDateLabel]" WidthRatio="0.2" />
                <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" HeaderLabel="[FieldReviewerResponseDateLabel]" WidthRatio="0.2" />
                <Lookup Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" HeaderLabel="[FieldConsultantResponseLabel]" List="kahua_AEC_SubmittalItem.SubmittalItemResponse">
                  <Lookup.EnabledWhen>
                    <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                  </Lookup.EnabledWhen>
                  <Lookup.VisibleWhen>
                    <AnyOf>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                      </AllOf>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                    </AnyOf>
                  </Lookup.VisibleWhen>
                </Lookup>
                <TextBox Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" Lines="4" HeaderLabel="[FieldReviewerNotesLabel]" WidthRatio="0.4">
                  <TextBox.EnabledWhen>
                    <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                  </TextBox.EnabledWhen>
                  <TextBox.VisibleWhen>
                    <AnyOf>
                      <AllOf>
                        <Data Path="ReviewerResponseDate" Type="HasValue" />
                        <Data Path="Parent.ConsultantCanSeeAllResponses" Type="EqualTo" Value="True" />
                      </AllOf>
                      <Data Path="Reviewer.Id" Type="EqualTo" Value="[Attribute(Reviewer.Id,AncestorLevel=1)]" />
                    </AnyOf>
                  </TextBox.VisibleWhen>
                </TextBox>
                <TextBlock HeaderLabel="[FieldResponseRequiredLabel]" Path="ResponseRequired" />
              </Items.Fields>
              <Items.Sorts>
                <Sort Direction="Ascending" Path="Order" />
              </Items.Sorts>
              <Items.Insert Disabled="True">
                <Insert.VisibleWhen>
                  <Constant Value="False" />
                </Insert.VisibleWhen>
              </Items.Insert>
              <Items.Delete Disabled="True">
                <Delete.VisibleWhen>
                  <Constant Value="False" />
                </Delete.VisibleWhen>
              </Items.Delete>
            </Items>
          </Section>
          <Section Label="[AnchorSectionSubmittalDatesLabel]" LabelUpper="[AnchorSectionSubmittalDatesLabelCapitalized]">
            <Region Name="NoTrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="HubParent.SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="HubParent.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="HubParent.ReviewPeriod" DataTag="FieldReviewPeriodLabel" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="HubParent.ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" />
            </Region>
            <Region Name="TrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="HubParent.SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="HubParent.SubmittalPackage.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="HubParent.SubmittalPackage.ReviewPeriod" DataTag="FieldReviewPeriodLabel" MinValue="0" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="HubParent.SubmittalPackage.ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" />
            </Region>
          </Section>
          <Region ContentRegion="SubmittalItemReferencesReviewTaskRegion" />
        </ViewDef>
        <ViewDef Name="OfficialReviewerSequentialTaskView" Title="Submittal Item Official Reviewer {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Region ContentRegion="SubmittalItemDetailsPreviewRegion" />
          <Region ContentRegion="SubmittalItemWorkPackagePreviewRegion" />
          <Section Label="[AnchorSectionReviewersLabel]" LabelUpper="[AnchorSectionReviewersLabelCapitalized]" DataTag="AnchorSectionReviewersLabel">
            <Region>
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Path="OfficialReviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldOfficialReviewerLabel" />
              <TextBlock Path="InstructionsToOfficial" DataTag="FieldInstructionsToOfficialLabel" Lines="5">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <Lookup Path="Response" DataTag="FieldResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
              <TextBox Path="ResponseNotes" DataTag="FieldResponseNotesLabel" Lines="5" />
            </Region>
            <Region>
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldOfficialReviewerLabel]" Path="SubmittalPackage.OfficialReviewer" Query="Contacts" SelectionMode="Single" />
              <TextBlock Label="[FieldInstructionsToOfficialLabel]" Path="SubmittalPackage.InstructionsToOfficial" DataTag="FieldInstructionsToOfficialLabel" Lines="5">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
          </Section>
          <Section Label="[AnchorSectionConsultantReviewersLabel]" LabelUpper="[AnchorSectionConsultantReviewersLabelCapitalized]" DataTag="AnchorSectionConstultantReviewers">
            <Section.VisibleWhen>
              <AnyOf>
                <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
              </AnyOf>
            </Section.VisibleWhen>
            <TextBox Label="[FieldInstructionsToReviewersLabel]" Path="InstructionsToReviewers" DataTag="FieldInstructionsToReviewersLabel" Lines="5" />
            <TextBlock Path="IsSequentialReview" DataTag="FieldInReviewSequentialLabel" />
            <TextBlock Name="DisplayConsultantResponseUponCompletion" Path="DisplayConsultantResponseUponCompletion" DataTag="FieldDisplayConsultantResponseUponCompletionLabel" />
            <TextBlock Name="DisplayConsultantResponseUponConsultantResponse" Path="DisplayConsultantResponseUponConsultantResponse" DataTag="FieldDisplayConsultantResponseUponConsultantResponseLabel" />
            <Items Path="Reviewers" IsReadOnly="false" StretchIndex="4">
              <Items.Delete>
                <Delete.EnabledWhen>
                  <Data Path="ReviewerDateSent" Type="HasNoValue" />
                </Delete.EnabledWhen>
              </Items.Delete>
              <Items.Fields>
                <Integer Label="[FieldReviewerOrderLabel]" Path="Order" HeaderLabel="[FieldReviewerOrderLabel]" DataTag="FieldReviewerOrderLabel" WidthRatio="0.2" MinValue="1" MaxValue="9999">
                  <Integer.EnabledWhen>
                    <Data Path="ReviewerDateSent" Type="HasNoValue" />
                  </Integer.EnabledWhen>
                </Integer>
                <TagBox Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" HeaderLabel="[FieldReviewerLabel]">
                  <TagBox.EnabledWhen>
                    <Data Path="ReviewerDateSent" Type="HasNoValue" />
                  </TagBox.EnabledWhen>
                </TagBox>
                <TextBlock Label="[FieldReviewerResponseSentDateLabel]" Path="ReviewerDateSent" DataTag="FieldReviewerResponseSentDateLabel" HeaderLabel="[FieldReviewerResponseSentDateLabel]" />
                <Date Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" HeaderLabel="[FieldReviewerResponseDueDateLabel]">
                  <Date.EnabledWhen>
                    <Data Path="ReviewerDateSent" Type="HasNoValue" />
                  </Date.EnabledWhen>
                </Date>
                <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" HeaderLabel="[FieldReviewerResponseDateLabel]" />
                <TextBlock Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" HeaderLabel="[FieldConsultantResponseLabel]" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
                <TextBlock Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" HeaderLabel="[FieldReviewerNotesLabel]" />
                <CheckBox HeaderLabel="[FieldResponseRequiredLabel]" Path="ResponseRequired">
                  <CheckBox.EnabledWhen>
                    <Data Path="ReviewerDateSent" Type="HasNoValue" />
                  </CheckBox.EnabledWhen>
                </CheckBox>
              </Items.Fields>
              <Items.Sorts>
                <Sort Direction="Ascending" Path="Order" />
              </Items.Sorts>
              <Items.Panel Title="[ConsultantReviewerPanelTitle]">
                <Section Name="DetailsSection" Label="[AnchorSectionDetailsLabel]" LabelUpper="[AnchorSectionDetailsLabelCapitalized]">
                  <Integer Label="[FieldReviewerOrderLabel]" Path="Order" DataTag="FieldReviewerOrderLabel" MinValue="1" MaxValue="9999">
                    <Integer.EnabledWhen>
                      <Data Path="ReviewerDateSent" Type="HasNoValue" />
                    </Integer.EnabledWhen>
                  </Integer>
                  <TagBox Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single">
                    <TagBox.EnabledWhen>
                      <Data Path="ReviewerDateSent" Type="HasNoValue" />
                    </TagBox.EnabledWhen>
                  </TagBox>
                  <TextBlock DataTag="FieldReviewerResponseSentDateLabel" Path="ReviewerDateSent" />
                  <Date Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel">
                    <Date.EnabledWhen>
                      <Data Path="ReviewerDateSent" Type="HasNoValue" />
                    </Date.EnabledWhen>
                  </Date>
                  <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" />
                  <TextBlock Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
                  <TextBlock Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" />
                  <CheckBox Label="[FieldResponseRequiredLabel]" Path="ResponseRequired">
                    <CheckBox.EnabledWhen>
                      <Data Path="ReviewerDateSent" Type="HasNoValue" />
                    </CheckBox.EnabledWhen>
                  </CheckBox>
                </Section>
              </Items.Panel>
            </Items>
          </Section>
          <Section Label="[AnchorSectionSubmittalDatesLabel]" LabelUpper="[AnchorSectionSubmittalDatesLabelCapitalized]">
            <Region Name="NoTrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="ReviewPeriod" DataTag="FieldReviewPeriodLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <TextBlock Label="[FieldOfficialResponseDateLabel]" Path="OfficialResponseDate" DataTag="FieldOfficialResponseDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
            <Region Name="TrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="SubmittalPackage.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="SubmittalPackage.ReviewPeriod" DataTag="FieldReviewPeriodLabel" MinValue="0" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="SubmittalPackage.ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel" />
              <TextBlock Label="[FieldOfficialResponseDateLabel]" Path="SubmittalPackage.OfficialResponseDate" DataTag="FieldOfficialResponseDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
          </Section>
          <Region ContentRegion="SubmittalItemPreviousRevisionsRegion">
            <Region.VisibleWhen>
              <Data Path="Revisions" Type="HasValue" />
            </Region.VisibleWhen>
          </Region>
          <Region ContentRegion="SubmittalItemCommentsRegion" />
          <Region ContentRegion="SubmittalItemReferencesOfficialReviewTaskRegion" />
        </ViewDef>
        <ViewDef Name="OfficialReviewerInReviewSequentialTaskView" Title="Submittal Item Official Reviewer {ShortLabel}" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <Region ContentRegion="SubmittalItemDetailsPreviewRegion" />
          <Region ContentRegion="SubmittalItemWorkPackagePreviewRegion" />
          <Section Label="[AnchorSectionReviewersLabel]" LabelUpper="[AnchorSectionReviewersLabelCapitalized]" DataTag="AnchorSectionReviewersLabel">
            <Region Name="NoTrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Path="OfficialReviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldOfficialReviewerLabel" />
              <TextBlock Path="InstructionsToOfficial" DataTag="FieldInstructionsToOfficialLabel" Lines="5">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <Lookup Path="Response" DataTag="FieldResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
              <TextBox Path="ResponseNotes" DataTag="FieldResponseNotesLabel" Lines="5" />
            </Region>
            <Region Name="TrackWithPackage">
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldOfficialReviewerLabel]" Path="SubmittalPackage.OfficialReviewer" Query="Contacts" SelectionMode="Single" />
              <TextBlock Label="[FieldInstructionsToOfficialLabel]" Path="SubmittalPackage.InstructionsToOfficial" DataTag="FieldInstructionsToOfficialLabel" Lines="5">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
          </Section>
          <Section Label="[AnchorSectionConsultantReviewersLabel]" LabelUpper="[AnchorSectionConsultantReviewersLabelCapitalized]" DataTag="AnchorSectionConstultantReviewers">
            <Section.VisibleWhen>
              <AnyOf>
                <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
              </AnyOf>
            </Section.VisibleWhen>
            <TextBox Label="[FieldInstructionsToReviewersLabel]" Path="InstructionsToReviewers" DataTag="FieldInstructionsToReviewersLabel" Lines="5" />
            <TextBlock Name="DisplayConsultantResponseUponCompletion" Path="DisplayConsultantResponseUponCompletion" DataTag="FieldDisplayConsultantResponseUponCompletionLabel" />
            <TextBlock Name="DisplayConsultantResponseUponConsultantResponse" Path="DisplayConsultantResponseUponConsultantResponse" DataTag="FieldDisplayConsultantResponseUponConsultantResponseLabel" />
            <TextBlock Path="IsSequentialReview" DataTag="FieldInReviewSequentialLabel" />
            <Items Path="Reviewers" IsReadOnly="True" StretchIndex="4">
              <Items.Delete>
                <Delete.EnabledWhen>
                  <Data Path="ReviewerDateSent" Type="HasNoValue" />
                </Delete.EnabledWhen>
              </Items.Delete>
              <Items.Fields>
                <Integer Label="[FieldReviewerOrderLabel]" Path="Order" HeaderLabel="[FieldReviewerOrderLabel]" DataTag="FieldReviewerOrderLabel" WidthRatio="0.2" MinValue="1" MaxValue="9999" />
                <TagBox Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldReviewerLabel" HeaderLabel="[FieldReviewerLabel]" />
                <!--<TextBlock Label="[FieldReviewPeriodLabel]" Path="ReviewPeriod" HeaderLabel="[FieldReviewPeriodLabel]" WidthRatio="0.2" />-->
                <TextBlock Label="[FieldReviewerResponseSentDateLabel]" Path="ReviewerDateSent" DataTag="FieldReviewerResponseSentDateLabel" HeaderLabel="[FieldReviewerResponseSentDateLabel]" />
                <Date Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel" HeaderLabel="[FieldReviewerResponseDueDateLabel]">
                  <Date.EnabledWhen>
                    <Data Path="ReviewerDateSent" Type="HasNoValue" />
                  </Date.EnabledWhen>
                </Date>
                <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" HeaderLabel="[FieldReviewerResponseDateLabel]" />
                <TextBlock Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" HeaderLabel="[FieldConsultantResponseLabel]" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
                <TextBlock Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" HeaderLabel="[FieldReviewerNotesLabel]" />
                <TextBlock HeaderLabel="[FieldResponseRequiredLabel]" Path="ResponseRequired" />
              </Items.Fields>
              <Items.Sorts>
                <Sort Direction="Ascending" Path="Order" />
              </Items.Sorts>
              <Items.Panel Title="[ConsultantReviewerPanelTitle]" IsReadOnly="True">
                <Section Name="DetailsSection" Label="[AnchorSectionDetailsLabel]" LabelUpper="[AnchorSectionDetailsLabelCapitalized]">
                  <Integer Label="[FieldReviewerOrderLabel]" DataTag="FieldReviewerOrderLabel" Path="Order" MinValue="1" MaxValue="9999" />
                  <TagBox Label="[FieldReviewerLabel]" Path="Reviewer" Query="Contacts" SelectionMode="Single" DataTag="FieldReviewerLabel" />
                  <!--<TextBlock Label="[FieldReviewPeriodLabel]" DataTag="FieldReviewPeriodLabel" Path="ReviewPeriod" />-->
                  <TextBlock DataTag="FieldReviewerResponseSentDateLabel" Path="ReviewerDateSent" />
                  <Date Label="[FieldReviewerResponseDueDateLabel]" Path="ReviewerResponseDueDate" DataTag="FieldConsultantDateDueLabel">
                    <Date.EnabledWhen>
                      <Data Path="ReviewerDateSent" Type="HasNoValue" />
                    </Date.EnabledWhen>
                  </Date>
                  <TextBlock Label="[FieldReviewerResponseDateLabel]" Path="ReviewerResponseDate" DataTag="FieldConsultantResponseDateLabel" />
                  <TextBlock Label="[FieldConsultantResponseLabel]" Path="ReviewerResponseLookup" DataTag="FieldConsultantResponseLabel" List="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
                  <TextBlock Label="[FieldReviewerNotesLabel]" Path="ReviewerNotes" DataTag="FieldReviewerNotesLabel" />
                  <TextBlock Label="[FieldResponseRequiredLabel]" Path="ResponseRequired" />
                </Section>
              </Items.Panel>
            </Items>
          </Section>
          <Section Label="[AnchorSectionSubmittalDatesLabel]" LabelUpper="[AnchorSectionSubmittalDatesLabelCapitalized]">
            <Region>
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="ReviewPeriod" DataTag="FieldReviewPeriodLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="ResponseDueDate" DataTag="FieldOfficialReviewerDueDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <TextBlock Label="[FieldOfficialResponseDateLabel]" Path="OfficialResponseDate" DataTag="FieldOfficialResponseDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
            <Region>
              <Region.VisibleWhen>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Region.VisibleWhen>
              <TextBlock Label="[FieldDateSubmittedToOfficialLabel]" Path="SubmittalPackage.DateSubmittedToOfficial" DataTag="FieldDateSubmittedToOfficialLabel" />
              <TextBlock Label="[FieldReviewPeriodLabel]" Path="SubmittalPackage.ReviewPeriod" DataTag="FieldReviewPeriodLabel" MinValue="0" />
              <TextBlock Label="[FieldResponseDueDateLabel]" Path="SubmittalPackage.ResponseDueDate" DataTag="FieldResponseDueDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
              <TextBlock Label="[FieldOfficialResponseDateLabel]" Path="SubmittalPackage.OfficialResponseDate" DataTag="FieldOfficialResponseDateLabel">
                <TextBlock.VisibleWhen>
                  <AnyOf>
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Construction" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                    <Data Path="TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                  </AnyOf>
                </TextBlock.VisibleWhen>
              </TextBlock>
            </Region>
          </Section>
          <Region ContentRegion="SubmittalItemCommentsRegion" />
          <Region ContentRegion="SubmittalItemReferencesOfficialReviewTaskRegion" />
        </ViewDef>
        <ViewDef Name="RecallView" Title="[ProvideReasonLabel]" Permission.AnyOf="kahua_AEC_SubmittalItem.Edit,kahua_AEC_SubmittalItem.Add">
          <TextBox DataTag="FieldRecallReasonLabel" Path="RecallReason" Lines="6" IsRequired="True" />
        </ViewDef>
        <ViewDef Name="LockedEditView" Title="[ViewSubmittalItemTitle]" Permission.AnyOf="kahua_AEC_SubmittalItem.View">
          <ViewDef.Explicits>
            <Data Path="DomainPartition" />
            <Data Path="WorkPackage" />
          </ViewDef.Explicits>
          <Region ContentRegion="SubmittalItemLockedEditViewRegion" />
        </ViewDef>
      </HubDef.ViewDefs>
      <HubDef.VariableSets>
        <VariableSet Name="Flags">
          <VariableSet.Variables>
            <Data Name="ReturnStatus" Value="Returned" />
          </VariableSet.Variables>
        </VariableSet>
      </HubDef.VariableSets>
      <HubDef.Send>
        <Send.To>
          <To From.Path="OfficialReviewer" />
        </Send.To>
      </HubDef.Send>
      <HubDef.DirectiveSets>
        <DirectiveSet Name="SubmittalItemStartOnSave">
          <DirectiveSet.Directives>
            <Directives Set="ValidateLinearLocation" />
            <Map>
              <Map.Condition>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="NotEqualTo" Value="True" />
                  <Data Path="WorkPackage" Type="HasValue" />
                </AllOf>
              </Map.Condition>
              <Map.Mappings>
                <Mapping From="WorkPackage.SubmittalOfficialReviewer" To="OfficialReviewer" MatchType="Multiple" />
                <Mapping From="WorkPackage.SubmittalCoordinator" To="SubmittalCoordinator" />
                <Mapping From="WorkPackage.SubmittalResponseDistribution" To="ResponseDistribution" MatchType="Multiple" />
                <Mapping From="WorkPackage.Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="ViewSubmittalItemTitleUnMatched" Match.Direction="None" Match.Attribute="Reviewer">
                  <Mapping.Condition>
                    <AnyOf>
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Engineering" />
                      <Data Path="SubmittalPackage.TurnoverIndexCategory" Type="EqualTo" Value="Procurement" />
                    </AnyOf>
                  </Mapping.Condition>
                </Mapping>
              </Map.Mappings>
            </Map>
            <Map>
              <Map.Condition>
                <AllOf>
                  <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
                  <Data Path="SubmittalPackage" Type="HasValue" />
                </AllOf>
              </Map.Condition>
              <Map.Mappings>
                <Mapping From="SubmittalPackage.OfficialReviewer" To="OfficialReviewer" />
                <Mapping From="SubmittalPackage.InstructionsToOfficial" To="InstructionsToOfficial" />
                <Mapping From="SubmittalPackage.SubmissionDueDate" To="SubmissionDueDate" />
                <Mapping From="SubmittalPackage.DateSubmittedByVendor" To="DateSubmittedByVendor" />
                <Mapping From="SubmittalPackage.DateSendToOfficialBy" To="DateSendToOfficialBy" />
                <Mapping From="SubmittalPackage.DateSubmittedToOfficial" To="DateSubmittedToOfficial" />
                <Mapping From="SubmittalPackage.ReviewPeriod" To="ReviewPeriod" />
                <Mapping From="SubmittalPackage.DaysInReview" To="DaysInReview" />
                <Mapping From="SubmittalPackage.ResponseDueDate" To="ResponseDueDate" />
                <Mapping From="SubmittalPackage.OfficialResponseDate" To="OfficialResponseDate" />
                <Mapping From="SubmittalPackage.DateReturnedToVendor" To="DateReturnedToVendor" />
                <Mapping From="SubmittalPackage.InstructionsToReviewers" To="InstructionsToReviewers" />
                <Mapping From="SubmittalPackage.Reviewers" To="Reviewers" MapDef="CopyReviewers" Match.Mode="RemoveUnMatched" Match.Direction="None" Match.Attribute="Reviewer" />
                <Mapping From="SubmittalPackage.TurnoverIndexCategory" To="TurnoverIndexCategory" />
              </Map.Mappings>
            </Map>
            <Map>
              <Map.Condition>
                <Data Path="SubmittalPackage" Type="HasValue" />
              </Map.Condition>
              <Map.Mappings>
                <Mapping From="SubmittalPackage.IsSequentialReview" To="IsSequentialReview" />
              </Map.Mappings>
            </Map>
            <Function Name="UpdateDaysInReview" />
            <Map MapDef="SyncReviewers" Direction="None" FromPath="SubmittalPackage">
              <Map.Condition>
                <Data Path="SubmittalPackage.TrackItemsWithPackage" Type="EqualTo" Value="True" />
              </Map.Condition>
            </Map>
            <!--
            <Map>
              <Map.Mappings>
                <Mapping To="TurnoverIndexCategoryCache" From="TurnoverIndexCategory" />
              </Map.Mappings>
            </Map>
            -->
            <StepTo Step="New" />
          </DirectiveSet.Directives>
        </DirectiveSet>
      </HubDef.DirectiveSets>
      <HubDef.ImportDefs>
        <ImportDef Name="SubmittalItemsImportDef" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem">
          <ImportDef.Sheets>
            <Sheet Name="Submittal Items" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Activity="SubmittalItemImportActivity">
              <Sheet.Columns>
                <Column Name="Submittal Package Number" AttributeName="SubmittalPackage" LinkedEntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" LinkedEntityDefKeyPath="Number" SkipInImport="True" />
                <Column Name="Item Number" IsKey="True" AttributeName="Number" />
                <Column Name="Revision" AttributeName="Revision" NullValue="0" />
                <Column Name="Subject" IsRequired="True" AttributeName="Subject" />
                <Column Name="Description" AttributeName="Description" />
                <Link Name="Location" AttributeName="Location" Description="[ExportInfo_LocationPath]" LinkedEntityDef="kahua_Location.Location" LinkedEntityDefKeyPath="ParentPath" />
                <Column Name="Status" AttributeName="Status" />
                <Column Name="Linear Location" AttributeName="LinearLocation" />
                <Link Name="Workflow Matrix" AttributeName="WorkPackage" LinkedEntityDef="kahua_WorkPackage.WorkPackage" LinkedEntityDefKeyPath="ShortLabel" />
                <Column Name="Priority" AttributeName="Priority" />
                <Link Name="Submittal Coordinator" AttributeName="SubmittalCoordinator" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Column Name="Category" IsRequired="True" AttributeName="TurnoverIndexCategory" />
                <Link Name="SubCategory ID" AttributeName="TurnoverIndex" LinkedEntityDef="enbridge_TurnoverIndex.TurnoverIndex" LinkedEntityDefKeyPath="Id" />
                <Column Name="Reason" AttributeName="Reason" />
                <Link Name="Submitter" AttributeName="SubmittingVendor" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Column Name="Response Distribution" AttributeName="ResponseDistribution" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="ShortLabel" SkipInImport="True" />
                <Column Name="Notes" AttributeName="Notes" />
                <Link Name="Official Reviewer" AttributeName="OfficialReviewer" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Column Name="Instructions To Official" AttributeName="InstructionsToOfficial" />
                <Column Name="Response" AttributeName="Response" />
                <Column Name="Response Notes" AttributeName="ResponseNotes" />
                <Link Name="Assets" AttributeName="Asset" Description="[Export_AssetIdsDescription]" LinkedEntityDef="kahua_AssetManager_Assets.Asset" LinkedEntityDefPattern="kahua_AssetManager_Assets\..*Asset" LinkedEntityDefKeyPath="Name" />
                <Link Name="Asset Type" AttributeName="AssetType" Description="[Export_TypeName]" LinkedEntityDefKeyPath="Name" LinkedEntityDef="kahua_AssetManager_Types.Type" LinkedEntityDefPattern="kahua_AssetManager_Types\..+Type" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="Submittal Packages" EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" Activity="System:SkipImport">
              <Sheet.Columns>
                <Column Name="Number" AttributeName="Number" IsKey="True" />
                <Column Name="Revision" AttributeName="Revision" NullValue="0" />
                <Column Name="Subject" AttributeName="Subject" IsRequired="True" />
                <Column Name="Description" AttributeName="Description" />
                <Column Name="Priority" AttributeName="Priority" />
                <Column Name="Status" AttributeName="Status" />
                <Link Name="Workflow Matrix" IsRequired="True" AttributeName="WorkPackage" LinkedEntityDef="kahua_WorkPackage.WorkPackage" LinkedEntityDefKeyPath="ShortLabel" />
                <Link Name="Scope" AttributeName="Scope" LinkedEntityDef="enbridge_ScopeIndex.Scope" LinkedEntityDefKeyPath="ShortLabel" />
                <Link Name="Assigned To" AttributeName="AssignedTo" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" SkipInImport="True" />
                <Link Name="Submittal Coordinator" AttributeName="SubmittalCoordinator" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" SkipInImport="True" />
                <Column Name="Category" IsRequired="True" AttributeName="TurnoverIndexCategory" />
                <Link Name="Submitter" AttributeName="SubmittingVendor" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Link Name="Response Distribution" AttributeName="ResponseDistribution" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" SkipInImport="True" />
                <Link Name="Items" AttributeName="Items" LinkedEntityDef="kahua_AEC_SubmittalItem.SubmittalItem" LinkedEntityDefKeyPath="Number" SkipInImport="True" />
                <Column Name="Notes" AttributeName="Notes" />
                <Link Name="Official Reviewer" AttributeName="OfficialReviewer" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" SkipInImport="True" />
                <Column Name="Instructions To Official" AttributeName="InstructionsToOfficial" />
                <Column Name="Response Notes" AttributeName="ResponseNotes" />
                <Column Name="Instructions To Reviewers" AttributeName="InstructionsToReviewers" />
                <Column Name="Submission Due from Submitter" AttributeName="SubmissionDueDate" />
                <Column Name="Submitter Submission Period" AttributeName="VendorSubmissionPeriod" />
                <Column Name="Date Submitted By Submitter" AttributeName="DateSubmittedByVendor" />
                <Column Name="Official Reviewer Review Period" AttributeName="ReviewPeriod" />
                <Column Name="Consultant Review Period" AttributeName="ConsultantReviewPeriod" />
                <Column Name="Official Reviewer Response Due Date" AttributeName="ResponseDueDate" />
                <Column Name="Official Response Date" AttributeName="OfficialResponseDate" />
                <Column Name="Date Returned To Submitter" AttributeName="DateReturnedToVendor" />
                <Column Name="Date Completed" AttributeName="DateCompleted" />
                <Column Name="Date Last Distributed" AttributeName="DateLastDistributed" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="Workflow Matrix" EntityDef="kahua_WorkPackage.WorkPackage" Activity="System:SkipImport">
              <Sheet.Columns>
                <Column Name="Workflow Matrix" AttributeName="ShortLabel" IsKey="True" />
                <Column Name="Description" AttributeName="Description" />
                <Column Name="Submittal Official Reviewer" AttributeName="SubmittalOfficialReviewer" />
                <Column Name="Submittal Coordinator" AttributeName="SubmittalCoordinator" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Column Name="Category" AttributeName="TurnoverIndexCategory" />
                <Column Name="Submitter" AttributeName="SubmittingVendor" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" />
                <Column Name="Response Distribution" AttributeName="SubmittalResponseDistribution" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" LinkedSheetName="Contacts" />
                <Column Name="CC and Notification" AttributeName="SubmittalCCNotification" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" LinkedSheetName="Contacts" />
                <Column Name="Is Sequential" AttributeName="IsSequentialReview" />
                <Column Name="Reviewers" AttributeName="Reviewers" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" LinkedEntityDefKeyPath="EmailAddress" LinkedSheetName="Contacts" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="SubCategories" EntityDef="enbridge_TurnoverIndex.TurnoverIndex" Activity="System:SkipImport" Query="kahua_AEC_SubmittalItem:AllTurnoverIndexes">
              <Sheet.Columns>
                <Column AttributeName="Id" Name="Id" />
                <Column AttributeName="Number" Name="Number" />
                <Column AttributeName="SubCategoryRecordTypeLabel" Name="Label" />
                <Column AttributeName="BusinessUnit" Name="Business Unit" />
                <Column AttributeName="Category" Name="Category" />
                <Column AttributeName="SubCategory" Name="Subcategory" />
                <Column AttributeName="RecordType" Name="Record Type" />
                <Column AttributeName="TypeFlag" Name="Type Flag" />
                <Column AttributeName="TurnoverType" Name="Turnover Type" />
                <Column AttributeName="RecordCategory" Name="Record Category" />
                <Column AttributeName="RecordClassification" Name="Record Classification" />
                <Column AttributeName="Active" Name="Active" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="Contacts" EntityDef="kahua_PeopleManager.kahua_Contact" Activity="System:SkipImport" Query="kahua_AEC_SubmittalItem:Contacts">
              <Sheet.Columns>
                <Column Name="Id" IsKey="True" />
                <Column Name="Contact" AttributeName="ContactCompanyLabel" />
                <Column Name="First Name" AttributeName="FirstName" />
                <Column Name="Last Name" AttributeName="LastName" />
                <Column Name="Company" LinkedEntityDef="kahua_CompanyManager.kahua_Company" LinkedEntityDefKeyPath="ShortLabel" />
                <Column Name="Email Address" AttributeName="EmailAddress" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="Assets" Activity="System:SkipImport" EntityDef.Lookup="System:LookupAssetByAssetClass">
              <Sheet.Columns>
                <Link Name="Class" AttributeName="Class" LinkedEntityDef="kahua_AssetDefinition_ClassesMaster.AssetClass" LinkedEntityDefKeyPath="Label" />
                <Link Name="Type" AttributeName="Type" LinkedEntityDefKeyPath="Name" LinkedEntityDef="kahua_AssetManager_Types.Type" LinkedEntityDefPattern="kahua_AssetManager_Types\..+Type" />
                <Column Name="Name" />
                <Link Name="Supplied By" AttributeName="SuppliedBy" LinkedEntityDef="kahua_CompanyManager.kahua_Company" LinkedEntityDefKeyPath="Name" />
                <Link Name="LocationPath" AttributeName="Location" Description="[ExportInfo_LocationPath]" LinkedEntityDef="kahua_Location.Location" LinkedEntityDefKeyPath="ParentPath" />
              </Sheet.Columns>
            </Sheet>
            <Sheet Name="Asset Types" Activity="System:SkipImport" Dynamic.AttributeMatchPath="Class.TypeAttributes.AssetAttribute.Name" EntityDef.Lookup="System:LookupAssetTypeByAssetClass">
              <Sheet.Columns>
                <Link Name="Class Master" AttributeName="Class" LinkedEntityDef="kahua_AssetDefinition_ClassesMaster.AssetClass" LinkedEntityDefKeyPath="Label" />
                <Column Name="Name" />
                <Column Name="Description" />
              </Sheet.Columns>
            </Sheet>
          </ImportDef.Sheets>
        </ImportDef>
      </HubDef.ImportDefs>
      <HubDef.Activities>
        <Activity Name="SubmittalItemImportActivity">
          <Activity.Flow>
            <Iterate Set="Submittal Items">
              <Iterate.New DefaultStep="New">
                <New.Directives>
                  <Variables>
                    <Entities Name="item" Entity.Source="Current" />
                    <Entities Name="parent" Path="Parent" EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" />
                    <Data Name="submittalPackageTurnoverIndexCategory" Value="{TurnoverIndexCategory}" Entity.Variable="parent" Entity.Source="Variable" Entity.EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" />
                  </Variables>
                  <Assertion>
                    <Assertion.Asserts>
                      <Assert Message="[TurnoverIndexAssertionMessage]">
                        <Assert.Condition>
                          <AnyOf>
                            <Variable Name="submittalPackageTurnoverIndexCategory" Type="EqualTo" ValuePath="TurnoverIndexCategory" />
                            <Data Path="SubmittalPackage" Type="HasNoValue" />
                          </AnyOf>
                        </Assert.Condition>
                      </Assert>
                      <Assert Message="[CanOnlyAddItemsToNewPackagesAssertionMessage]">
                        <Assert.Condition>
                          <AnyOf>
                            <Data Path="SubmittalPackage" Type="HasNoValue" />
                            <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                            <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="Revised" />
                            <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="Reopened" />
                          </AnyOf>
                        </Assert.Condition>
                      </Assert>
                      <Assert Message="[SubCategoryMustMatchBusinessUnit]">
                        <Assert.Condition>
                          <AnyOf>
                            <Data Path="DomainPartition.BusinessUnit" Type="EqualTo" ValuePath="TurnoverIndex.BusinessUnit" />
                            <Data Path="TurnoverIndex" Type="HasNoValue" />
                          </AnyOf>
                        </Assert.Condition>
                      </Assert>
                      <Assert Message="[MustBeNewAssertionMessage]">
                        <Assert.Condition>
                          <Data Path="Status" Value="New" />
                          <Data Path="Status" Value="Revised" />
                          <Data Path="Status" Value="Reopened" />
                        </Assert.Condition>
                      </Assert>
                    </Assertion.Asserts>
                  </Assertion>
                  <Persist />
                  <Update EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" Entities="{variable:parent}">
                    <Update.Attributes>
                      <Attribute Name="Items">
                        <Attribute.Value Entity.From="{variable:item}" />
                      </Attribute>
                    </Update.Attributes>
                  </Update>
                  <Map>
                    <Map.Mapping>
                      <Mapping FromType="variable" From="parent" To="SubmittalPackage" MapDef="PackageToItems" />
                    </Map.Mapping>
                  </Map>
                  <Map MapDef="SyncReviewers" Direction="None" ToPath="Items" />
                  <Persist />
                  <Directives Set="SubmittalItemStartOnEnter" />
                  <Directives Set="SubmittalItemStartOnSave" />
                </New.Directives>
              </Iterate.New>
              <Iterate.Existing>
                <Existing.Directives>
                  <!-- TODO: Assert that both item and package must be in new state if adding -->
                  <Assertion>
                    <Assertion.Asserts>
                      <Assert Message="[MustBeNewAssertionMessage]">
                        <Assert.Condition>
                          <Data Path="Status" Value="New" />
                        </Assert.Condition>
                      </Assert>
                      <Assert Message="[CanOnlyAddItemsToNewPackagesAssertionMessage]">
                        <Assert.Condition>
                          <AnyOf>
                            <Data Path="SubmittalPackage" Type="HasNoValue" />
                            <Data Path="SubmittalPackage.Status" Type="EqualTo" Value="New" />
                          </AnyOf>
                        </Assert.Condition>
                      </Assert>
                    </Assertion.Asserts>
                  </Assertion>
                  <!-- 
                  <Map>
                    <Map.Mappings>
                      <Mapping From="TurnoverIndexCategoryCache" To="TurnoverIndexCategory" />
                    </Map.Mappings>
                  </Map>
                  -->
                </Existing.Directives>
              </Iterate.Existing>
            </Iterate>
          </Activity.Flow>
        </Activity>
        <Activity Name="MigrateToLocked">
          <Activity.Flow>
            <Iterate Set="SubmittalItem">
              <Iterate.New>
                <New.Directives>
                  <StepTo Step="Locked" />
                </New.Directives>
              </Iterate.New>
              <Iterate.Existing>
                <Existing.Directives>
                  <StepTo Step="Locked" />
                </Existing.Directives>
              </Iterate.Existing>
            </Iterate>
          </Activity.Flow>
        </Activity>
      </HubDef.Activities>
    </HubDef>
  </App.HubDefs>
  <App.Launch />
  <AppConfigurations>
    <AppConfiguration DisplayName="[EntityDefSubmittalItemLabelPlural]" ItemDisplayName="[EntityDefSubmittalItemLabel]" AllowRootItems="true" CountType="Total" ListVisibility="Visible" DefaultView="kahua_AEC_Submittal.SubmittalItemListView" DefaultDataView="All">
      <Key />
      <DataTagConfiguration>
        <Key />
        <DataTags>
          <DataTag Name="FieldNumberLabel" Label="[FieldNumberLabel]" CultureLabelKey="FieldNumberLabel" IsVisible="True">
            <Key />
          </DataTag>
          <DataTag Name="FieldRevisionLabel" Label="[FieldRevisionLabel]" CultureLabelKey="FieldRevisionLabel" IsRequired="True" IsRequiredLocked="True" IsVisible="True">
            <Key />
          </DataTag>
          <DataTag Name="FieldSubjectLabel" Label="[FieldSubjectLabel]" CultureLabelKey="FieldSubjectLabel" IsRequired="True" IsRequiredLocked="False" IsVisible="True">
            <Key />
          </DataTag>
        </DataTags>
      </DataTagConfiguration>
      <EntityConfigurations>
        <EntityConfiguration EntityDefName="kahua_AEC_SubmittalItem.SubmittalItem">
          <Key />
          <AttributeConfigurations>
            <AttributeConfiguration DataType="AutoNumber" EntityDefAttributeName="ShortLabel" MaxLength="0">
              <Key />
              <DefaultValue>
                <DefaultText Text="[EntityDefSubmittalItemLabel]: [Number]" />
              </DefaultValue>
            </AttributeConfiguration>
            <AttributeConfiguration DataType="AutoNumber" EntityDefAttributeName="LongLabel" MaxLength="0">
              <Key />
              <DefaultValue>
                <DefaultText Text="[EntityDefSubmittalItemLabel]: [Number] - [Description]" />
              </DefaultValue>
            </AttributeConfiguration>
            <AttributeConfiguration DataType="AutoNumber" EntityDefAttributeName="DetailLabel" MaxLength="0">
              <Key />
              <DefaultValue>
                <DefaultText Text="[EntityDefSubmittalItemLabel]: [Number] - [Description]" />
              </DefaultValue>
            </AttributeConfiguration>
            <AttributeConfiguration DataType="Lookup" EntityDefAttributeName="Status" MaxLength="0">
              <Key />
              <DefaultValue>
                <DefaultText Text="New" />
              </DefaultValue>
            </AttributeConfiguration>
            <AttributeConfiguration DataType="Entity" EntityDefAttributeName="ResponseDistribution" IsXMLValue="true" Label="[AttributeResponseDistributionLabel]" MaxLength="0" LinkedEntityDefName="kahua_MessageManager.kahua_MessageParticipant">
              <Key />
              <DataLoadSettings DisplayAttribute="kahua_MessageParticipant.ContactCompanyLabel" DataSource="kahua_MessageManager.MessageParticipantSearch" OneToMany="true" FilterParameter="SearchField" />
            </AttributeConfiguration>
          </AttributeConfigurations>
        </EntityConfiguration>
      </EntityConfigurations>
      <AutoNumberConfigurations>
        <AutoNumberConfiguration AllowDuplicates="true" EntityDefAttributeName="Number" EntityDefName="kahua_AEC_SubmittalItem.SubmittalItem" StartingNumber="1" Type="Auto" Width="4">
          <Key />
        </AutoNumberConfiguration>
      </AutoNumberConfigurations>
      <WorkflowConfiguration>
        <Key />
      </WorkflowConfiguration>
      <EulaConfiguration />
      <DataViewConfiguration>
        <DataViewDefs />
        <DataViews />
      </DataViewConfiguration>
      <PublishingConfiguration />
      <ExportImportConfigurations>
        <Exports>
          <Document Name="SubmitalItemExportDefinition">
            <Sheet DataSource="kahua_AEC_SubmittalItem.SubmittalItemListExport" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" DataSourceScope="App">
              <Field Attribute="Number" />
              <Field Attribute="Revision" />
              <Field Attribute="CurrentRevision" />
              <Field Attribute="Subject" />
              <Field Attribute="Description" />
              <Field Attribute="Scope" />
              <Field Attribute="System" />
              <Field Attribute="Location" />
              <Field Attribute="LinearLocation" />
              <Field Attribute="WorkPackage" />
              <Field Attribute="Priority" />
              <Field Attribute="SubmittalPackage" IsLink="true" />
              <Field Attribute="Status" />
              <Field Attribute="AssignedTo" />
              <Field Attribute="SubmittalCoordinator" IsLink="true" />
              <Field Attribute="TurnoverIndexCategory" />
              <Field Attribute="TurnoverIndex" />
              <Field Attribute="Reason" />
              <Field Attribute="SubmittingVendor" IsLink="true" />
              <Field Attribute="RecordBoxBarcode" />
              <Field Attribute="VendorNotes" />
              <Field Attribute="ResponseDistribution" />
              <Field Attribute="Notes" />
              <Field Attribute="HardCopiesRequired" />
              <Field Attribute="OfficialReviewer" IsLink="true" />
              <Field Attribute="InstructionsToOfficial" />
              <Field Attribute="Response" />
              <Field Attribute="ResponseNotes" />
              <Field Attribute="InstructionsToReviewers" />
              <Field Attribute="Reviewers" IsLink="true" />
              <Field Attribute="ApprovedSubmittalRequiredBy" />
              <Field Attribute="RequestedFromVendor" />
              <Field Attribute="SubmissionDueDate" />
              <Field Attribute="DateSubmittedByVendor" />
              <Field Attribute="DateSubmittedToOfficial" />
              <Field Attribute="ReviewPeriod" />
              <Field Attribute="FieldConsultantReviewPeriodLabel" />
              <Field Attribute="ResponseDueDate" />
              <Field Attribute="OfficialResponseDate" />
              <Field Attribute="DateReturnedToVendor" />
              <Field Attribute="DateCompleted" />
              <Field Attribute="DateLastDistributed" />
              <Field Attribute="QualityValidation" />
              <Field Attribute="QualityValidationReason" />
              <Field Attribute="QualityComment" />
            </Sheet>
            <Sheet DataSource="kahua_AEC_SubmittalPackage.SubmittalPackageListExport" EntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" DataSourceScope="App">
              <Field Attribute="Number" />
              <Field Attribute="Revision" />
              <Field Attribute="CurrentRevision" />
              <Field Attribute="TrackItemsWithPackage" />
              <Field Attribute="Subject" />
              <Field Attribute="Description" />
              <Field Attribute="SubmittalPackage" IsLink="true" />
              <Field Attribute="Status" />
              <Field Attribute="SubmittalCoordinator" IsLink="true" />
              <Field Attribute="Reviewers" IsLink="true" />
              <Field Attribute="Location" IsLink="true" />
              <Field Attribute="LinearLocation" />
              <Field Attribute="SubmittingVendor" IsLink="true" />
              <Field Attribute="Notes" />
              <Field Attribute="OfficialReviewer" IsLink="true" />
              <Field Attribute="InstructionsToOfficial" />
              <Field Attribute="Response" />
              <Field Attribute="InstructionsToReviewers" />
              <Field Attribute="SubmissionDueDate" />
              <Field Attribute="DateSubmittedByVendor" />
              <Field Attribute="DateSendToOfficialBy" />
              <Field Attribute="DateSubmittedToOfficial" />
              <Field Attribute="ReviewPeriod" />
              <Field Attribute="ResponseDueDate" />
              <Field Attribute="OfficialResponseDate" />
              <Field Attribute="DateReturnedToVendor" />
            </Sheet>
            <Sheet DataSource="kahua_AEC_PackagedSubmittals.SubmittalReviewerListExport" EntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" DataSourceScope="App">
              <Field Attribute="ReviewerNotes" />
              <Field Attribute="Reviewer" IsLink="true" />
              <Field Attribute="ReviewerResponseDueDate" />
              <Field Attribute="ReviewerResponseDate" />
              <Field Attribute="ReviewerDateSent" />
            </Sheet>
            <Sheet DataSource="kahua_PeopleManager.kahua_PeopleListExport" EntityDef="kahua_PeopleManager.kahua_Contact" DataSourceScope="App">
              <Field Attribute="Prefix" />
              <Field Attribute="FirstName" />
              <Field Attribute="LastName" />
              <Field Attribute="Suffix" />
              <Field Attribute="Title" />
              <Field Attribute="EmailAddress" />
              <Field Attribute="Direct" />
              <Field Attribute="Mobile" />
              <Field Attribute="Fax" />
              <Field Attribute="Company" />
              <Field Attribute="Office" />
              <Field Attribute="Facebook" />
              <Field Attribute="Twitter" />
              <Field Attribute="LinkedIn" />
              <Field Attribute="AIM" />
              <Field Attribute="YahooMessenger" />
              <Field Attribute="LiveMessenger" />
              <Field Attribute="Skype" />
              <Field Attribute="Notes" />
            </Sheet>
            <Sheet DataSource="kahua_Location.LocationListExport" EntityDef="kahua_Location.Location" DataSourceScope="App" IsReadOnly="true">
              <Field Attribute="Type" />
              <Field Attribute="Name" />
              <Field Attribute="Description" />
              <Field Attribute="Notes" />
            </Sheet>
          </Document>
        </Exports>
        <Imports NewItemsRequireWorkflow="false" />
      </ExportImportConfigurations>
      <SharingConfiguration ExchangeEnabled="true">
        <Key />
        <DataSource Ref="kahua_AEC_SubmittalItem.SubmittalItem" SelectMode="Data" SaveMode="IsDirty" ChildPartitionMode="Default" Access="Read" />
        <FilterColumns>
          <FilterColumn DataSourceFieldName="SubmittalItem.CreatedBy.ContactCompanyLabel" Label="[FieldCreatedByLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Number" Label="[FieldNumberLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.PackageNumber" Label="[ControlItemNumberPackageLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Description" Label="[ControlDescriptionsLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.SubmittingVendor.ContactCompanyLabel" Label="[ControlSubmittingVendorLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Response" Label="[ControlResponseLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Attachments" Label="[ControlAttachmentsLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Revision" Label="[ControlRevisionLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Status" Label="[ControlStatusLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.Location.Description" Label="[ControlLocationLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.SubmittalCoordinator.ContactCompanyLabel" Label="[ControlSubmittalCoordinatorLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.OfficialReviewer.ContactCompanyLabel" Label="[ControlOfficialReviewerLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.SubmissionDueDate" Label="[ControlSubmissionDueDateLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.DateSubmittedByVendor" Label="[ControlDateSubmittedByVendorLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.DateSendToOfficialBy" Label="[ControlDateSendToOfficialByLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.ReviewPeriod" Label="[ControlReviewPeriodLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.ResponseDueDate" Label="[ControlResponseDueDateLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.ReviewerResponseDate" Label="[ControlReviewerResponseDateLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.DateReturnedToVendor" Label="[ControlDateReturnedToVendorLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.ApprovedSubmittalRequiredBy" Label="[ControlApprovedSubmittalRequiredByLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.DateRequiredOnsite" Label="[ControlDateRequiredOnsiteLabel]" DataType="Text" />
          <FilterColumn DataSourceFieldName="SubmittalItem.RequestedfromVendor" Label="[ControlRequestedfromVendorLabel]" DataType="Text" />
        </FilterColumns>
      </SharingConfiguration>
      <ReportConfiguration>
        <ReportWizardConfiguration />
      </ReportConfiguration>
    </AppConfiguration>
  </AppConfigurations>
  <Apps>
    <App Ref="kahua_AEC_SubmittalItem" />
    <App Ref="kahua_PeopleManager" />
    <App Ref="kahua_Workflow" />
    <App Ref="kahua_AEC_SubmittalPackage" />
    <App Ref="kahua_Location" />
    <App Ref="kahua_MessageManager" />
    <App Ref="kahua_AEC_PackagedSubmittals" />
    <App Ref="kahua_Core" />
    <App Ref="kahua_CompanyManager" />
    <App Ref="kahua_WorkflowLabels" />
    <App Ref="kahua_WorkPackage" />
    <App Ref="kahua_UniversalLookup" />
    <App Ref="enbridge_TurnoverIndex" />
    <App Ref="enbridge_ScopeIndex" />
    <App Ref="kahua_AssetManager_Systems" />
  </Apps>
  <Cultures ImportCultures="kahua_Core,kahua_WorkflowLabels,kahua_UniversalLookup" AppHostType="Default">
    <Culture Code="en">
      <Labels>
        <Label Key="NewStartGroupLabel">NEW</Label>
        <Label Key="StartConstructionLabel">Construction</Label>
        <Label Key="StartEngineeringLabel">Engineering</Label>
        <Label Key="StartProcurementLabel">Procurement</Label>
        <Label Key="StartCommissioningLabel">Commissioning</Label>
        <Label Key="ActionAcceptRegisterLabel">Accept Register</Label>
        <Label Key="ActionAddResponsesToFinalResponseLabel">Add Consultant Response to Final Response</Label>
        <Label Key="ActionAddResponsesToOfficialResponseLabel">Add Consultant Response to Official Response</Label>
        <Label Key="ActiondAddResponseLabel">Add Responses to Official Response</Label>
        <Label Key="ActionDistributeLabel">Distribute</Label>
        <Label Key="ActionEndToRespondLabel">End Review To Respond</Label>
        <Label Key="ActionGeneratePackagesCapitalized">GENERATE PACKAGES</Label>
        <Label Key="ActionLockLabel">Lock</Label>
        <Label Key="ActionNewCapitalized">NEW</Label>
        <Label Key="ActionPrimaryReturnClarificationLabel">Return for Clarification</Label>
        <Label Key="ActionRecallLabel">Recall</Label>
        <Label Key="ActionRecallToNewLabel">Reset to New</Label>
        <Label Key="ActionRequestRegisterLabel">Request Register</Label>
        <Label Key="ActionRequestSubmissionLabel">Request Submission</Label>
        <Label Key="ActionRespondLabel">Respond</Label>
        <Label Key="ActionReturnApprovedLabel">Forward to Sub (Approved)</Label>
        <Label Key="ActionReturnClarificationLabel">Return for Clarification</Label>
        <Label Key="ActionReturnForCorrectionsLabel">Return for Corrections</Label>
        <Label Key="ActionReturnForResubmissionLabel">Forward to Sub (Resubmission)</Label>
        <Label Key="ActionReturnToReviewerLabel">Return to Primary Reviewer</Label>
        <Label Key="ActionReviseCapitalized">REVISE</Label>
        <Label Key="ActionSendForReviewLabel">Submit for Review</Label>
        <Label Key="ActionSendToConsultantsLabel">Send To Consultant Reviewers</Label>
        <Label Key="ActionSendToOfficialReviewerLabel">Send to Official Reviewer</Label>
        <Label Key="ActionSendToSecondaryResponderLabel">Send to Consultant Reviewers </Label>
        <Label Key="ActionSubmitLabel">Submit</Label>
        <Label Key="ActionSubmitRegisterLabel">Submit Register</Label>
        <Label Key="ActionUnlockLabel">Unlock</Label>
        <Label Key="AddSecondaryRespondersLabel">Add New Reviewers</Label>
        <Label Key="AnchorSectionCommentsLabel">Comments</Label>
        <Label Key="AnchorSectionCommentsLabelCapitalized">COMMENTS</Label>
        <Label Key="AnchorSectionConsultantResponseReferencesLabel">Consultant Response References</Label>
        <Label Key="AnchorSectionConsultantResponseReferencesLabelCapitalized">CONSULTANT RESPONSE REFERENCES</Label>
        <Label Key="AnchorSectionConsultantReviewersLabel">Consultant Reviewers</Label>
        <Label Key="AnchorSectionDateLabel">Submittal Dates</Label>
        <Label Key="AnchorSectionDateLabelCapitalized">SUBMITTAL DATES</Label>
        <Label Key="AnchorSectionMaterialTrackingLabel">Material Tracking</Label>
        <Label Key="AnchorSectionMaterialTrackingLabelCapitalized">MATERIAL TRACKING</Label>
        <Label Key="AnchorSectionPreviousRevisionsLabel">Previous Revisions</Label>
        <Label Key="AnchorSectionReferencesLabel">References</Label>
        <Label Key="AnchorSectionReviewersLabel">Reviewers</Label>
        <Label Key="AnchorSectionSecondaryResponsesLabel">Secondary Responses</Label>
        <Label Key="AnchorSectionSecondaryResponsesLabelCapitalized">SECONDARY RESPONSES</Label>
        <Label Key="AnchorSectionSubmittalDatesLabel">Submittal Dates</Label>
        <Label Key="AppDesc">Submittal Items</Label>
        <Label Key="AppLabel">Submittal Items</Label>
        <Label Key="AppRoleReviewerLabel">Reviewer</Label>
        <Label Key="AppRoleSubmitterLabel">Submitter</Label>
        <Label Key="AppSettingRequireConsultantItemResponseNotesLabelKey">Require Consultant Item Response Notes</Label>
        <Label Key="Assertion_Calculated_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialCalc">Official Reviewer Response Due Date cannot be before Consultant Response Due Date. When using review periods to calculate both due dates, the Official Review Period must be equal to or greater than the Consultant Review Period.</Label>
        <Label Key="Assertion_Calculated_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialManual">Consultant Review Period Places Consultant Response Due Date after Official Reviewer Response Due Date. Official Reviewer Response Due Date cannot be before Consultant Response Due Date.</Label>
        <Label Key="Assertion_ConsultantResponseRequired_EndReview">A consultant reviewer is marked as response required. Wait for them to respond or uncheck the response required field to respond.</Label>
        <Label Key="Assertion_Manual_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialCalc">Official Review Period Places Official Reviewer Response Due Date Before Consultant Due date. Official Reviewer Response Due Date cannot be before Consultant Reviewer Response Due Date.</Label>
        <Label Key="Assertion_Manual_ConsultantResponseDueDateMustBeAfterOfficialResponseDueDate_OfficialManual">Official Reviewer Response Due Date cannot be before Consultant Reviewer Response Due Date.</Label>
        <Label Key="Assertion_ResponseDueDateMustBeTheFuture">Response Due Date must be greater than or equal to Current Date</Label>
        <Label Key="Assertion_SecondaryDateDueMustBeTheFuture">Consultant Due Date must be greater than or equal to Current Date</Label>
        <Label Key="AssignToCoordinatorLabel">Assign To Coordinator</Label>
        <Label Key="AttributeAddToResponseLabel">Add to Response</Label>
        <Label Key="AttributeApprovedSubmittalRequiredByDescription">Approved Submittal Required By</Label>
        <Label Key="AttributeApprovedSubmittalRequiredByLabel">Approved Submittal Required By</Label>
        <Label Key="AttributeConsultantCanSeeAllResponsesLabel">Responders See All Responses </Label>
        <Label Key="AttributeConsultantsCanAddConsultantsLabel">Responders Can Add Responders </Label>
        <Label Key="AttributeCurrentReviewers">Current Reviewers</Label>
        <Label Key="AttributeCurrentSequentialReviewNumberLabel">Current Sequential Review Number</Label>
        <Label Key="AttributeDateRespondedLabel">Date Responded</Label>
        <Label Key="FieldDateReturnedToSubcontractorLabel">Date Returned to Subcontractor</Label>
        <Label Key="AttributeDateReturnedToVendorDescription">Date Returned to Submitter</Label>
        <Label Key="AttributeDateReturnedToVendorLabel">Date Returned to Submitter</Label>
        <Label Key="AttributeDateSendToOfficialByDescription">Send To Official Reviewer By</Label>
        <Label Key="AttributeDateSendToOfficialByLabel">Send To Official Reviewer By</Label>
        <Label Key="AttributeDateSendToOfficialByLabelCapitalized">SEND TO OFFICIAL REVIEWER BY</Label>
        <Label Key="AttributeDateSentLabel">Date Sent</Label>
        <Label Key="AttributeDateSentToReviewersDescription">Date Sent to Reviewers</Label>
        <Label Key="AttributeDateSentToReviewersLabel">Date Sent to Reviewers</Label>
        <Label Key="AttributeDateSubmittedByVendorDescription">Date Submitted by Submitter</Label>
        <Label Key="AttributeDateSubmittedByVendorLabel">Date Submitted by Submitter</Label>
        <Label Key="AttributeDateSubmittedByVendorLabelCapitalized">DATE SUBMITTED BY Submitter</Label>
        <Label Key="AttributeDaysInReviewDescription">Days In Review</Label>
        <Label Key="AttributeDaysInReviewLabel">Days In Review</Label>
        <Label Key="AttributeDescriptionDescription">Description</Label>
        <Label Key="AttributeInReviewSequentialLabel">Sequential Review</Label>
        <Label Key="AttributeInternalProcessingDurationLabel">Internal Processing Duration</Label>
        <Label Key="AttributeItemLocationDescription">Item Location</Label>
        <Label Key="AttributeItemLocationLabel">Location</Label>
        <Label Key="AttributeItemNumberDescription">Item Number</Label>
        <Label Key="AttributeNotesLabel">Notes</Label>
        <Label Key="AttributeNotifyAllReviewersLabel">Notify All Reviewers</Label>
        <Label Key="AttributeNotifyResponseDistributionDescription">Notify Response Distribution on Submit to Review</Label>
        <Label Key="AttributeNotifyResponseDistributionLabel">Notify Response Distribution on Submit to Review</Label>
        <Label Key="AttributeNotifyResponseDistributionOnCompletedDescription">Notify Response Distribution on Completed Review</Label>
        <Label Key="AttributeNotifyResponseDistributionOnCompletedLabel">Notify Response Distribution on Completed Review</Label>
        <Label Key="AttributeOfficialNotesDescription">Official's Response Notes</Label>
        <Label Key="AttributeOfficialNotesLabel">Official's Response Notes</Label>
        <Label Key="AttributeOfficialResponseDescription">Official's Response</Label>
        <Label Key="AttributeOfficialResponseLabel">Official's Response</Label>
        <Label Key="AttributeOfficialReviewerDescription">Official Reviewer</Label>
        <Label Key="AttributeOfficialReviewerLabel">Official Reviewer</Label>
        <Label Key="AttributePackageNumberDescription">Package Number</Label>
        <Label Key="AttributePackageNumberLabel">Package Number</Label>
        <Label Key="AttributeReasonDescription">Reason</Label>
        <Label Key="AttributeReasonLabel">Reason</Label>
        <Label Key="FieldRecallReasonLabel">Recall Reason </Label>
        <Label Key="FieldRecallReasonLabelDesc">Recall Reason</Label>
        <Label Key="FieldReasonRecallLabel">Recall Reason </Label>
        <Label Key="FieldReasonRecallLabelDesc">Recall Reason</Label>
        <Label Key="AttributeReleaseDateDescription">Release Date</Label>
        <Label Key="AttributeReleaseDateLabel">Release Date</Label>
        <Label Key="AttributeRequestedfromVendorDescription">Requested from Submitter</Label>
        <Label Key="AttributeRequestedfromVendorLabel">Requested from Submitter</Label>
        <Label Key="AttributeResponseDescription">Response</Label>
        <Label Key="AttributeResponseDistributionLabel">Response Distribution</Label>
        <Label Key="AttributeResponseDueDateDescription">Official Reviewer Response Due Date</Label>
        <Label Key="AttributeResponseDueDateLabel">Official Reviewer Response Due Date</Label>
        <Label Key="AttributeResponseLabel">Response</Label>
        <Label Key="AttributeResponseNotesDescription">Response Notes</Label>
        <Label Key="AttributeResponseNotesLabel">Response Notes</Label>
        <Label Key="FieldResponseRequiredLabel">Response Required</Label>
        <Label Key="FieldReturnForCorrectionsReasonLabel">Return for Corrections Reason</Label>
        <Label Key="FieldReturnToClarificationReasonLabel">Return for Clarification Reason</Label>
        <Label Key="FieldReturnToReviewersReasonLabel">Return To Reviewers Reason</Label>
        <Label Key="AttributeReviewerResponseDateDescription">Reviewer Response Date</Label>
        <Label Key="AttributeReviewerResponseDateLabel">Reviewer Response Date</Label>
        <Label Key="AttributeReviewersDescription">Reviewers</Label>
        <Label Key="AttributeReviewersLabel">Reviewers</Label>
        <Label Key="AttributeReviewPeriodDescription">Official Reviewer Review Period (Days)</Label>
        <Label Key="AttributeReviewPeriodLabel">Official Reviewer Review Period (Days)</Label>
        <Label Key="AttributeRevisionDescription">Revision No.</Label>
        <Label Key="AttributeRevisionLabel">Revision No.</Label>
        <Label Key="AttributeSubmissionDueDateDescription">Submission Due Date</Label>
        <Label Key="AttributeSubmissionDueDateLabel">Submission Due Date</Label>
        <Label Key="AttributeSubmittalCoordinatorDescription">Submittal Coordinator</Label>
        <Label Key="AttributeSubmittalCoordinatorLabel">Submittal Coordinator</Label>
        <Label Key="AttributeSubmittingVendorDescription">Submitter</Label>
        <Label Key="AttributeSubmittingVendorLabel">Submitter</Label>
        <Label Key="AttributeRecordBoxBarcodeLabel">Record Box Barcode</Label>
        <Label Key="FieldRecordBoxBarcodeLabel">Record Box Barcode</Label>
        <Label Key="AttributeSubstitutionDescription">Substitution</Label>
        <Label Key="AttributeSubstitutionLabel">Substitution</Label>
        <Label Key="AttributeWorkflowStepLabel">Workflow Step</Label>
        <Label Key="AttributeWorkPackageDescription">Workflow Matrix</Label>
        <Label Key="AttributeWorkPackageLabel">Workflow Matrix</Label>
        <Label Key="AttributeOrderLabel">Order</Label>
        <Label Key="AttributeOrderDescription">Order</Label>
        <Label Key="BasicWorkflowDefLabel">Kahua Submittal Items Workflow</Label>
        <Label Key="BasicWorkflowStartActionLabel">NEW</Label>
        <Label Key="BodyMsgToConsultantRecallLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="BodyMsgToConsultantRecallRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="BodyMsgToOfficialRecallLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="BodyMsgToOfficialRecallRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)]..</Label>
        <Label Key="BodyMsgToVendorRecallLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="BodyMsgToVendorRecallRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has been recalled by [UserFullName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="CheckCompanyMessage">Current User Company must be the same as the Submitter Company.</Label>
        <Label Key="ConfirmContinueReviewCaptionLabel">Continue Review?</Label>
        <Label Key="ConfirmContinueReviewMessageBody">Are you sure you want to continue the review? Doing so will cancel the current review request and cancel any pending consultant review requests.</Label>
        <Label Key="ConfirmRecallCaptionLabel">Restart Review?</Label>
        <Label Key="ConfirmReviewRecallMessageBody">Are you sure you want to Recall this Review Request? Doing so will restart the Sequential Review process.</Label>
        <Label Key="ConsultantResponseAssertionMessage">Consultant Response can't be empty</Label>
        <Label Key="ConsultantResponseNotesAssertionMessage">Consultant Response Notes can't be empty</Label>
        <Label Key="ConsultantReviewerAssertionMessage">Consultant Reviewer(s) must be Kahua users</Label>
        <Label Key="ConsultantReviewerPanelTitle">Consultant Reviewer</Label>
        <Label Key="ConsultantReviewerTaskLabel">Submittal Item [Attribute(Number)].[Attribute(Revision)] Consultant Reviewer Task</Label>
        <Label Key="ConsultantReviewPeriodReviewerAssertion">Consultant Review Period must be a positive number</Label>
        <Label Key="ContinueReviewLabel">Continue Review</Label>
        <Label Key="CoordinatorReviewStepLabel">Coordinator Review</Label>
        <Label Key="CoordinatorReviewTaskLabel">Submittal Item [Attribute(Number)].[Attribute(Revision)] Coordinator Review Task</Label>
        <Label Key="CoordinatorTriageStepLabel">Coordinator Triage</Label>
        <Label Key="CoordinatorTriageTaskLabel">Submittal Item [Attribute(Number)].[Attribute(Revision)] Coordinator Triage Task</Label>
        <Label Key="CreateSubmittalItemTitle">Create Submittal Item</Label>
        <Label Key="DataTrackingLabel">Date Tracking</Label>
        <Label Key="DeleteConfirmationCaption">Delete</Label>
        <Label Key="DeleteConformationDetail">Are you sure you want to move this item to the recycle bin?</Label>
        <Label Key="DistributeLabel">Distribute</Label>
        <Label Key="DistributeResponseStepLabel">Distribute Response</Label>
        <Label Key="EntityDefSubmittalItemDescription">Submittal Item</Label>
        <Label Key="EntityDefSubmittalItemLabel">Submittal Item</Label>
        <Label Key="EntityDefSubmittalItemLabelAbbv">Submittal Item</Label>
        <Label Key="EntityDefSubmittalItemLabelAbbvPlural">Submittal Items</Label>
        <Label Key="EntityDefSubmittalItemLabelPlural">Submittal Items</Label>
        <Label Key="FeedSubmittalItemByAssignedToLabel">[AppLabel] by [FieldAssignedToLabel]</Label>
        <Label Key="FieldAdditionalNotificationsLabel">Additional Notification</Label>
        <Label Key="FieldAddToOfficialResponseCapLabel">ADD TO RESPONSE</Label>
        <Label Key="FieldAddToResponseLabel">Add to Response</Label>
        <Label Key="FieldApprovedSubmittalRequiredByBasicWorkflowLabel">Approved Submittal Required By ([BasicWorkflowDefLabel])</Label>
        <Label Key="FieldApprovedSubmittalRequiredByLabel">Approved Submittal Required By</Label>
        <Label Key="FieldAssetTrackingLabel">Asset Tracking</Label>
        <Label Key="FieldAssignedToLabel">Assigned To</Label>
        <Label Key="FieldAsSpecifiedLabel">As Specified Only</Label>
        <Label Key="FieldAutosendToConsultantReviewersDescription">Autosend To Consultant Reviewers</Label>
        <Label Key="FieldAutosendToConsultantReviewersLabel">Autosend to Consultant Reviewers</Label>
        <Label Key="FieldAutoSendToOfficialReviewerDescription">Autosend To Official Reviewer</Label>
        <Label Key="FieldAutoSendToOfficialReviewerLabel">Autosend to Official Reviewer</Label>
        <Label Key="FieldCommentsLabel">Comments</Label>
        <Label Key="FieldCommentstoConsultantLabel">Comments to Consultant</Label>
        <Label Key="FieldConsultantDateSentCapLabel">CONSULTANT DATE SENT</Label>
        <Label Key="FieldConsultantDateSentLabel">Consultant Date Sent</Label>
        <Label Key="FieldConsultantReviewerCapLabel">CONSULTANT REVIEWER</Label>
        <Label Key="FieldConsultantReviewerLabel">Consultant Reviewer</Label>
        <Label Key="FieldConsultantCanAddConsultantLabel">Consultant Reviewers can add Consultant Reviewers</Label>
        <Label Key="FieldConsultantCanSeeAllResponsesLabel">Consultant Reviewers can see all Responses</Label>
        <Label Key="FieldConsultantDateDueCapLabel">CONSULTANT DUE DATE</Label>
        <Label Key="FieldConsultantDateDueLabel">Consultant Due Date</Label>
        <Label Key="FieldConsultantDateSentCultureKey">Date Sent to Consultant</Label>
        <Label Key="FieldConsultantResponseDateCapLabel">CONSULTANT RESPONSE DATE</Label>
        <Label Key="FieldConsultantResponseDateLabel">Consultant Response Date</Label>
        <Label Key="FieldConsultantResponseLabel">Consultant Response</Label>
        <Label Key="FieldConsultantResponseNotesLabel">Consultant Response Notes</Label>
        <Label Key="FieldConsultantReviewersCanSeeAllResponsesLabel">Consultant Reviewers can see all Responses</Label>
        <Label Key="FieldReviewersLabel">Reviewers</Label>
        <Label Key="FieldCurrentRevisionLabel">Current Revision</Label>
        <Label Key="FieldDateDueLabel">Date Due</Label>
        <Label Key="FieldDateRequiredOnsiteLabel">Date Required Onsite</Label>
        <Label Key="FieldDateRespondedLabel">Date Responded</Label>
        <Label Key="FieldDateReturnedToVendorLabel">Date Returned To Submitter</Label>
        <Label Key="FieldDateSendToOfficialByLabel">Send To Official Reviewer By</Label>
        <Label Key="FieldDateSentLabel">Date Sent</Label>
        <Label Key="FieldDateSentToReviewersLabel">Date Submitted to Reviewer</Label>
        <Label Key="FieldDateSubmittedByVendorLabel">Date Submitted By Submitter</Label>
        <Label Key="FieldDateSubmittedToOfficialLabel">Date Submitted To Official Reviewer</Label>
        <Label Key="FieldDaysInReviewLabel">Days In Review</Label>
        <Label Key="FieldDisplayConsultantResponseUponCompletionLabel">Display Consultant Responses Upon Completion</Label>
        <Label Key="FieldDisplayConsultantResponseUponConsultantResponseLabel">Display Consultant Responses Upon Consultant Response</Label>
        <Label Key="FieldFinalResponseLabel">Final Response</Label>
        <Label Key="FieldFinalResponseNotesLabel">Final Response Notes</Label>
        <Label Key="FieldIncludeReferencesOnNewRevisionLabel">Include References on New Revision</Label>
        <Label Key="FieldInstructionsToConsultantReviewers">Instructions to Consultant Reviewers</Label>
        <Label Key="FieldInstructionsToOfficialLabel">Instructions To Official Reviewer</Label>
        <Label Key="FieldInstructionsToReviewersLabel">Instructions</Label>
        <Label Key="FieldLineItemAttachmentCountLabel">Ref Count</Label>
        <Label Key="FieldNewConsultantReviewersLabel">New Consultant Reviewers</Label>
        <Label Key="FieldNewItemRevisionNumberLabel">New Revision No.</Label>
        <Label Key="FieldNotesLabel">Notes</Label>
        <Label Key="FieldNotifyAllReviewersLabel">Notify All Reviewers</Label>
        <Label Key="FieldNotifyOfResponseLabel">Notify of Response</Label>
        <Label Key="FieldNotifyResponseDistributionLabel">Notify Response Distribution on Submit to Review</Label>
        <Label Key="FieldNotifyResponseDistributionOnCompletedLabel">Notify Response Distribution on Completed Review</Label>
        <Label Key="FieldOfficialNotesLabel">Official's Response Notes</Label>
        <Label Key="FieldOfficialResponseDateLabel">Official Reviewer Response Date</Label>
        <Label Key="FieldOfficialResponseDueDateLabel">Official Reviewer Response Due Date</Label>
        <Label Key="FieldOfficialResponseLabel">Official's Response</Label>
        <Label Key="FieldOfficialReviewerDueDateLabel">Official Reviewer Response Due Date</Label>
        <Label Key="FieldOfficialReviewerLabel">Official Reviewer</Label>
        <Label Key="FieldOfficialReviewerLabelCapitalized">OFFICIAL REVIEWER</Label>
        <Label Key="FieldOfficialReviewerResponseDateLabel">Official Reviewer Response Date</Label>
        <Label Key="FieldOfficialReviewPeriodDescription">Official Reviewer Review Period</Label>
        <Label Key="FieldOfficialReviewPeriodLabel">Official Reviewer Review Period</Label>
        <Label Key="FieldPriorityLabel">Priority</Label>
        <Label Key="FieldPromptReasonLabel">Reason</Label>
        <Label Key="FieldRequestedfromVendorLabel">Items Requested from Submitter</Label>
        <Label Key="FieldResponseDistributionLabel">Response Distribution</Label>
        <Label Key="FieldResponseDueDateLabel">Consultant Response Due Date</Label>
        <Label Key="FieldResponseLabel">Response</Label>
        <Label Key="FieldResponseNotesLabel">Response Notes</Label>
        <Label Key="FieldReturnReasonLabel">Return Reason</Label>
        <Label Key="FieldReviewerLabel">Reviewer</Label>
        <Label Key="FieldReviewerNotesLabel">Reviewer Notes</Label>
        <Label Key="FieldReviewerOrderLabel">Order</Label>
        <Label Key="FieldReviewerResponseDateLabel">Reviewer Response Date</Label>
        <Label Key="FieldReviewerResponseDueDateCultureKeyLabel">Reviewer Response Due Date</Label>
        <Label Key="FieldReviewerResponseSentDateLabel">Sent Date</Label>
        <Label Key="FieldReviewPeriodLabel">Official Reviewer Review Period</Label>
        <Label Key="FieldReviewPeriodNotRequiredLabel">Official Reviewer Review Period (Never Required, Date Provided or Submitter View)</Label>
        <Label Key="FieldRevisionLabel">Revision</Label>
        <Label Key="FieldSequentialReviewStartedDescription">Sequential Review Started</Label>
        <Label Key="FieldSequentialReviewStartedLabel">Sequential Review Started</Label>
        <Label Key="FieldSubmissionDueDateLabel">Submission Due from Submitter</Label>
        <Label Key="FieldSubmissionNotesLabel">Submission Notes</Label>
        <Label Key="FieldSubmittalCoordinatorLabel">Submittal Coordinator</Label>
        <Label Key="FieldSubmittalPackageLabel">Submittal Package</Label>
        <Label Key="FieldSubmittedByVendorLabel">Submitted by Submitter</Label>
        <Label Key="FieldSubmittedFromVendorLabel">Submitted from Submitter</Label>
        <Label Key="FieldSubmittingResponseLabel">Response</Label>
        <Label Key="FieldSubmittingVendorCompany">Submitter Company</Label>
        <Label Key="FieldSubmittingVendorCompanyLabel">Submitter Company</Label>
        <Label Key="FieldSubmittingVendorCompanyLabelKey">Submitter Company (Log Column Only)</Label>
        <Label Key="FieldSubstitutionLabel">Substitution</Label>
        <Label Key="FieldTrackItemsWithPackageLabel">Track with Package</Label>
        <Label Key="FieldVendorLabel">Submitter</Label>
        <Label Key="FieldVendorNotesLabel">Submitter Notes</Label>
        <Label Key="FieldVendorResubmissionPeriodDescription">Submitter Resubmission Period</Label>
        <Label Key="FieldVendorResubmissionPeriodLabel">Submitter Resubmission Period</Label>
        <Label Key="FieldVendorSubmissionPeriodDescription">Submitter Submission Period</Label>
        <Label Key="FieldVendorSubmissionPeriodLabel">Submitter Submission Period</Label>
        <Label Key="FieldWorkPackageLabel">Workflow Matrix</Label>
        <Label Key="FieldWorkPackageDescription">Workflow Matrix</Label>
        <Label Key="GroupArchitectEngineerDescription">Architect/Engineer</Label>
        <Label Key="GroupArchitectEngineerLabel">Architect/Engineer</Label>
        <Label Key="GroupInternalUserDescription">Internal User</Label>
        <Label Key="GroupInternalUserLabel">Internal User</Label>
        <Label Key="GroupProjectAdminDescription">Project Admin</Label>
        <Label Key="GroupProjectAdminLabel">Project Admin</Label>
        <Label Key="GroupVendorDescription">Submitter</Label>
        <Label Key="GroupVendorLabel">Submitter</Label>
        <Label Key="InReviewSequentialStepLabel">In Review Sequential</Label>
        <Label Key="InternalReviewStepLabel">Internal Review</Label>
        <Label Key="IsSequentialReviewLabel">Sequential Review?</Label>
        <Label Key="LogDefault">Default</Label>
        <Label Key="LogSubmittalItems">Submittal Items</Label>
        <Label Key="LogSubmittalItemsWithDescription">Submittal Items with Description</Label>
        <Label Key="LogViewSubmittalItemGroupedbyStatus">Grouped by Status</Label>
        <Label Key="LogViewSubmittalItemsGroupedbyAssignedTo">Grouped by Assigned To</Label>
        <Label Key="LogViewSubmittalItemsGroupedbyCoordinator">Grouped by Submittal Coordinator</Label>
        <Label Key="LogViewSubmittalItemsGroupedbyPackage">Grouped by Package</Label>
        <Label Key="LogViewSubmittalItemsGroupedbyVendor">Grouped by Submitter</Label>
        <Label Key="LogViewSubmittalItemsConstructionOnly">Construction Only</Label>
        <Label Key="LogViewSubmittalItemsEngineeringnOnly">Engineering Only</Label>
        <Label Key="LogViewSubmittalItemsProcurementOnly">Procurement Only</Label>
        <Label Key="LogViewSubmittalItemsCommissioningOnly">Commissioning Only</Label>
        <Label Key="LookupListResponseDescription">Response</Label>
        <Label Key="LookupListResponseLabel">Response</Label>
        <Label Key="LookupListTypeDescription">Type</Label>
        <Label Key="LookupListTypeLabel">Type</Label>
        <Label Key="MarkCompleteLabel">Mark Complete</Label>
        <Label Key="MenuGroupMoreLabel">More</Label>
        <Label Key="MenuItemSubmittalsLabel">Submittals</Label>
        <Label Key="MessageBodyAssignToCoordinator">Submittal Item [Attribute(Number)].[Attribute(Revision)] has been submitted for your review. &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] </Label>
        <Label Key="MessageBodyConsultantReviewerResponse">Consultant Reviewer [UserFullName] with [UserCompanyName] has completed their review of Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] on [DomainPartitionName]. \n\n Item Subject: [Attribute(HubParent.Subject)] \n\n Item Description: &lt;br/&gt;[Attribute(HubParent.Description)] \n\n Reviewer Notes: \n [Attribute(ReviewerNotes)]&lt;br/&gt;&lt;br/&gt; &lt;p&gt;[NavigateLink(Target=HubParent)]&lt;/p&gt; </Label>
        <Label Key="MessageBodyConsultantReviewerTaskRevision">Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] on [DomainPartitionName] has been returned to you. Your response is due by [Date(TaskSource=Attribute,Path=ReviewerResponseDueDate)]. &lt;br/&gt;&lt;br/&gt; Item Subject: [Attribute(HubParent.Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(HubParent.Description)] &lt;br/&gt;&lt;br/&gt;Reason for Return: [Attribute(HubParent.PromptReturnConsultantReason)] </Label>
        <Label Key="MessageBodyConsultantReviewRecalledOnContinue">Official Reviewer [Attribute(Parent.OfficialReviewer.ContactCompanyLabel)] has added new consultant reviewers and continued sequential review on submittal item [Attribute(Parent.Number)].[Attribute(Parent.Revision)] on Project [DomainPartitionName]. As a result your pending consultant reviewer response task has been canceled. Please reach out to the Official Reviewer with any questions.</Label>
        <Label Key="MessageBodyConsultantReviewRecalledOnRestart">Official Reviewer [Attribute(Parent.OfficialReviewer.ContactCompanyLabel)] has restarted sequential review on submittal item [Attribute(Parent.Number)].[Attribute(Parent.Revision)] on Project [DomainPartitionName]. As a result your pending consultant reviewer response task has been canceled. You will receive a new task as a part of the sequential review when it is your turn in the sequential review order. Please reach out to the Official Reviewer with any questions.</Label>
        <Label Key="MessageBodyCoordinatorNotification">[Attribute(SubmittingVendor.ShortLabel)] with [Attribute(SubmittingVendor.Company.ShortLabel)] has submitted Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName] for your review and submission. &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] &lt;br/&gt; &lt;p&gt;[NavigateLink]&lt;/p&gt;</Label>
        <Label Key="MessageBodyDistribution">For your coordination, Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been completed. Please contact [Attribute(SubmittalCoordinator.ShortLabel)] if you have any questions. View the record at the link below for more detailed information. &lt;br/&gt;&lt;br/&gt; &lt;p&gt;[NavigateLink(Target=Source)]&lt;/p&gt; </Label>
        <Label Key="MessageBodyForwardToSubResubmissionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned [Attribute(Response)].\n\n Reviewer Notes: [Attribute(ResponseNotes)] \n\n We will be requesting a revision shortly. Please resubmit, addressing reviewer comments, immediately to avoid potential schedule delay. \n\n [NavigateLink(Target=Source)] \n\n If you have any questions, please contact the Submittal Coordinator:\n\n [Attribute(SubmittalCoordinator.ContactFullNameLabel)]\n [Attribute(SubmittalCoordinator.Title)]\n [Attribute(SubmittalCoordinator.Company.ShortLabel)]\n [Attribute(SubmittalCoordinator.Direct)]\n\n [NavigateLink(Target=Source)] </Label>
        <Label Key="MessageBodyForwardToSubResubmissionRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned [Attribute(Response)].\n\n Reviewer Notes: [Attribute(ResponseNotes)] \n\n We will be requesting a revision shortly. Please resubmit, addressing reviewer comments, immediately to avoid potential schedule delay. \n\n [NavigateLink(Target=Source)] \n\n If you have any questions, please contact the Submittal Coordinator:\n\n [Attribute(SubmittalCoordinator.ContactFullNameLabel)]\n [Attribute(SubmittalCoordinator.Title)]\n [Attribute(SubmittalCoordinator.Company.ShortLabel)]\n [Attribute(SubmittalCoordinator.Direct)]\n\n [NavigateLink(Target=Source)] </Label>
        <Label Key="MessageBodyFromInternalLabel">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodyFromInternalReviewLabel">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission, with the following remarks: [Attribute(ReturnForCorrectionsReason)]. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodyFromInternalReviewWithRevisionLabel">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission, with the following remarks: [Attribute(ReturnForCorrectionsReason)]. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodyFromInternalRevisionLabel">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodyFromNewLabel">Please submit the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] by [Attribute(SubmissionDueDate)].</Label>
        <Label Key="MessageBodyFromNewRevisionLabel">Please submit the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] by [Attribute(SubmissionDueDate)].</Label>
        <Label Key="MessageBodyItemReSubmittedForReviewAllReviewers">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Re-submitted for Review by the Submittal Coordinator [Attribute(SubmittalCoordinator)].&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;Consultant Reviewers: [AttributeList(Path=Reviewers.Reviewer.ContactCompanyLabel,Entity=List,Delimiter=", ")]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyItemReSubmittedForReviewOnlyOfficial">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Re-submitted for Review by the Submittal Coordinator [Attribute(SubmittalCoordinator)].&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyItemReSubmittedForReviewWithConsultant">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Re-submitted for Review by the Submittal Coordinator [Attribute(SubmittalCoordinator)].&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;Consultant Reviewers: [AttributeList(Path=Reviewers.Reviewer.ContactCompanyLabel,Entity=List,Delimiter=", ")]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyItemSubmittedForReviewAllReviewers">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Submitted for Review.&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;Consultant Reviewers: [AttributeList(Path=Reviewers.Reviewer.ContactCompanyLabel,Entity=List,Delimiter=", ")]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyItemSubmittedForReviewOnlyOfficial">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Submitted for Review.&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyItemSubmittedForReviewWithConsultant">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Submitted for Review.&lt;br/&gt;&lt;br/&gt;Official Reviewer: [Attribute(OfficialReviewer)]&lt;br/&gt;Consultant Reviewers: [AttributeList(Path=Reviewers.Reviewer.ContactCompanyLabel,Entity=List,Delimiter=", ")]&lt;br/&gt;&lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodyOfficialReviewerResponse">Official Reviewer [Attribute(CurrentOfficial.ShortLabel)] with [Attribute(CurrentOfficial.Company.ShortLabel)] has completed their review of Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName]. \n\n Reviewer Notes: \n [Attribute(ResponseNotes)] &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] &lt;br/&gt; &lt;p&gt;[NavigateLink(Target=Source)]&lt;/p&gt; </Label>
        <Label Key="MessageBodyOfficialReviewerResponseWithCC">Official Reviewer [Attribute(CurrentOfficial.ShortLabel)] with [Attribute(CurrentOfficial.Company.ShortLabel)] has completed their review of Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName]. \n\n Reviewer Notes: \n [Attribute(ResponseNotes)] &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] &lt;p&gt;This message sent to additional recipients: [Attribute(ResponseDistribution.ShortLabel)] &lt;br/&gt;</Label>
        <Label Key="MessageBodyResponseDistributionForResubmissionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] [Attribute(Subject)] on [DomainPartitionName] has been returned [Attribute(Response)]. \n\n Reviewer Notes: [Attribute(ResponseNotes)] \n\n Please resubmit, addressing reviewer comments, immediately to avoid potential schedule dalay. \n\n [NavigateLink(Target=Source)] \n\n If you have any questions, please contact the Submittal Coordinator:\n\n [Attribute(SubmittalCoordinator.ContactFullNameLabel)]\n [Attribute(SubmittalCoordinator.Title)]\n [Attribute(SubmittalCoordinator.Company.ShortLabel)]\n [Attribute(SubmittalCoordinator.Direct)]\n\n [NavigateLink(Target=Source)] </Label>
        <Label Key="MessageBodyResponseDistributionLabel">For your coordination and use, Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned [Attribute(Response)].\n\n Reviewer Notes: [Attribute(ResponseNotes)] \n\n [NavigateLink(Target=Source)] \n\n If you have any questions, please contact the Submittal Coordinator:\n\n [Attribute(SubmittalCoordinator.ContactFullNameLabel)]\n [Attribute(SubmittalCoordinator.Title)]\n [Attribute(SubmittalCoordinator.Company.ShortLabel)]\n [Attribute(SubmittalCoordinator.Direct)]\n\n [NavigateLink(Target=Source)] </Label>
        <Label Key="MessageBodyResponseDistributionRevisionLabel">For your coordination and use, Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned [Attribute(Response)].\n\n Reviewer Notes: [Attribute(ResponseNotes)] \n\n [NavigateLink(Target=Source)] \n\n If you have any questions, please contact the Submittal Coordinator:\n\n [Attribute(SubmittalCoordinator.ContactFullNameLabel)]\n [Attribute(SubmittalCoordinator.Title)]\n [Attribute(SubmittalCoordinator.Company.ShortLabel)]\n [Attribute(SubmittalCoordinator.Direct)]\n\n [NavigateLink(Target=Source)] </Label>
        <Label Key="MessageBodySubmitConsultantReviewer">Please review Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] on [DomainPartitionName]. Your response is due by [Date(TaskSource=Attribute,Path=ReviewerResponseDueDate)]. &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(HubParent.Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(HubParent.Description)] </Label>
        <Label Key="MessageBodySubmittedForReview">&lt;br/&gt;For your information, Submittal Package [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) has been submitted on [DomainPartitionName].&lt;br/&gt;If you have any questions concerning this Submittal Package, please contact [Attribute(SubmittalCoordinator.ContactFullNameLabel)].&lt;br/&gt; &lt;br/&gt;[NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBodySubmitItemTask_1Label">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodySubmitItemTask_1RevisionLabel">The following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] has been returned for correction and resubmission. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodySubmitOfficialReviewer">Please review Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] on [DomainPartitionName]. Your response is due by [Date(Source=Attribute,Path=ResponseDueDate)]. &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] </Label>
        <Label Key="MessageBodySubmitOfficialReviewerReturned">Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName] has been returned to you. Your response is due by [Date(Source=Attribute,Path=ResponseDueDate)]. &lt;br/&gt;&lt;br/&gt;Reason for Return: [Attribute(PromptReturnOfficialReason)] &lt;br/&gt;&lt;br/&gt; Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] </Label>
        <Label Key="MessageBodySubmitOfficialReviewerWithConsultants">Please review Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] on [DomainPartitionName]. Your response is due by [Date(Source=Attribute,Path=ResponseDueDate)]. &lt;br/&gt;&lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)] &lt;br/&gt;&lt;br/&gt;Pending Consultant Reviewers: [AttributeList(Path=Reviewers.Reviewer.ContactCompanyLabel,Entity=List,Delimiter=", ")]</Label>
        <Label Key="MessageBodySubmittingVendor">Please submit the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - [Attribute(Description)] on [DomainPartitionName] by [Date(Source=Attribute,Path=SubmissionDueDate)].</Label>
        <Label Key="MessageBodySubmittingVendorSubmittal">Please submit Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName]. &lt;br/&gt;&lt;br/&gt;Due Date: [Date(Source=Attribute,Path=SubmissionDueDate)] &lt;br/&gt;Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)].</Label>
        <Label Key="MessageBodySubmittingVendorSubmittalReturned">Submittal Item [Attribute(Number)].[Attribute(Revision)] on [DomainPartitionName] has been returned for corrections. &lt;br/&gt;&lt;br/&gt;Due Date: [Date(Source=Attribute,Path=SubmissionDueDate)] &lt;br/&gt;&lt;br/&gt;Reason for Return: [Attribute(ReasonForReturnVendor)] &lt;br/&gt; Item Subject: [Attribute(Subject)] &lt;br/&gt;Item Description: &lt;br/&gt;[Attribute(Description)].</Label>
        <Label Key="MessageBodyTaskClosedToConsultantFromOfficial">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has returned for clarification by [Attribute(SubmittalCoordinator.ContactFullNameLabel)] with the following remarks: [Attribute(ReturnToClarificationReason)]. Please contact [Attribute(SubmittalCoordinator.ContactFullNameLabel)] at [Attribute(SubmittalCoordinator.Mobile)] if you have any questions.</Label>
        <Label Key="MessageBodyTaskClosedToConsultantFromOfficialRevision">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) has returned for clarification by [Attribute(CurrentOfficial.ContactFullNameLabel)] with the following remarks: [Attribute(ReturnToClarificationReason)]. Please contact [Attribute(CurrentOfficial.ContactFullNameLabel)] at [Attribute(CurrentOfficial.Mobile)] if you have any questions.</Label>
        <Label Key="MessageBodyToTaskRegisterEntry">Please provide shipment and fabrication durations for the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBodyToTaskRegisterEntryRevision">Please provide shipment and fabrication durations for the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. \n\n [Attribute(Comments.Comment)] </Label>
        <Label Key="MessageBody_CurrentOfficialReturned">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] [Attribute(ReturnToClarificationReason)]. \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBody_CurrentOfficialReturnedRevision">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(ReturnToClarificationReason)]. \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="MessageBody_CurrentOfficialReturnedRevisionTask">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(ReturnToClarificationReason)]. </Label>
        <Label Key="MessageBody_CurrentOfficialReturnedTask">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] [Attribute(ReturnToClarificationReason)].</Label>
        <Label Key="MessageNotificationBodyInternalReviewRecalledLabel">[Attribute(CurrentOfficial.ContactFullNameLabel)] has recalled the Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="MessageNotificationBodyInternalReviewRecalledREvisionLabel">[Attribute(CurrentOfficial.ContactFullNameLabel)] has recalled the Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(RecallReason)].</Label>
        <Label Key="MessageNotificationBodyToSubmittingVendorLabel">Please submit the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] by [Attribute(SubmissionDueDate)]. \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="MessageNotificationBodyToSubmittingVendorRevisionLabel">Please submit the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] by [Attribute(SubmissionDueDate)]. \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="MessageSubject">Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantResponded">Consultant Response Received on Submittal Package [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantReviewer">Consultant Response Received on Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantReviewerTask">Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantReviewerTaskRevision">Returned Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantReviewRecalledOnContinue">Sequential Review Continued on Submittal Item [Attribute(Parent.Number)].[Attribute(Parent.Revision)] on Project [DomainPartitionName]</Label>
        <Label Key="MessageSubjectConsultantReviewRecalledOnRestart">Sequential Review Restarted on Submittal Item [Attribute(Parent.Number)].[Attribute(Parent.Revision)] on Project [DomainPartitionName]</Label>
        <Label Key="MessageSubjectCoordinatorNotification">Submittal Item [Attribute(Number)].[Attribute(Revision)] Submitted on [DomainPartitionName] by [Attribute(SubmittingVendor.Company.ShortLabel)]</Label>
        <Label Key="MessageSubjectCoordinatorTriage">Please Review Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="MessageSubjectDistribution">[DomainPartitionName] - Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) is Complete</Label>
        <Label Key="MessageSubjectForwardToSubResubmissionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectForwardToSubResubmissionRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectFromInternalReviewWithRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectInReview">Official Review Requested for Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="MessageSubjectInReviewReturned">Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) Returned for Clarification</Label>
        <Label Key="MessageSubjectInSequentialReview">Review Distributed to Consultants for Sequential Review</Label>
        <Label Key="MessageSubjectItemReSubmittedForReview">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Re-submitted for Review</Label>
        <Label Key="MessageSubjectItemSubmittedForReview">Submittal Item [Attribute(Number)].[Attribute(Revision)] – [Attribute(Subject)] on [DomainPartitionName] has Been Submitted for Review</Label>
        <Label Key="MessageSubjectResponded">Response Received on Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectOfficialReviewerResponded">Official Reviewer Response Received on Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectResponseDistributionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectResponseDistributionRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectReturnOfficial">Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]). Returned for Clarification</Label>
        <Label Key="MessageSubjectReturnVendor">Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]). Returned for Corrections</Label>
        <Label Key="MessageSubjectSequentialComplete">Sequential Review Complete and Ready for Official Review [Attribute(Number)].[Attribute(Revision)] - [Attribute(Subject)]</Label>
        <Label Key="MessageSubjectSequentialReviewStart">Sequential Review Ready for Official Responder [Attribute(Number)].[Attribute(Revision)] - [Attribute(Subject)]</Label>
        <Label Key="MessageSubjectSubmission">Submission Requested for Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="MessageSubjectSubmittedForReview">Submittal Package [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) submitted for Review</Label>
        <Label Key="MessageSubjectTaskClosedLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectTaskClosedRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="MessageSubjectToConsultantReviewer">Consultant Review Requested for Submittal Item [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="NonUserRestrictionLabel">A Kahua user must be named to continue. Please remove any non-users and include at least one Kahua user to proceed. </Label>
        <Label Key="NotificationRespondConsultantForOfficial">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName].\n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n [NavigateLink(Target=Source)]</Label>
        <Label Key="NotificationRespondConsultantForOfficialRevision">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName].\n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n [NavigateLink(Target=Source)]</Label>
        <Label Key="NotificationRespondOfficialForConsultant">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName].\n Official Response: [Attribute(OfficialResponse)]. \n\n[Attribute(OfficialNotes)]\n\n[NavigateLink(Target=Source)]</Label>
        <Label Key="NotificationRespondOfficialForConsultantRevision">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName].\n Official Response: [Attribute(OfficialResponse)]. \n\n[Attribute(OfficialNotes)]</Label>
        <Label Key="NotificationRespondOfficialForOfficialRevision">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. Final Response: [Attribute(Response)]. \n\n[Attribute(ResponseNotes)]</Label>
        <Label Key="NotificationRespondOfficialForOfficialRevisionWithCC">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. Final Response: [Attribute(Response)]. \n\n[Attribute(ResponseNotes)] &lt;p&gt;This message sent to additional recipients: [Attribute(ResponseDistribution.ShortLabel)]</Label>
        <Label Key="Notification_GenericSubjectLabel">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_GenericSubjectRevisionLabel">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_Respond_ConsultantRevisionSubject">Submittal [Attribute(HubRoot.Number)].[Attribute(HubRoot.Revision)] - ([Attribute(HubRoot.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_Respond_ConsultantSubject">Submittal [Attribute(HubRoot.Number)].[Attribute(HubRoot.Revision)] - ([Attribute(HubRoot.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_Respond_OfficialOfficialRevisionSubject">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_ReviewerResoponseToNotifyOfResponseBodyLabel">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName]. \n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n\n[NavigateLink(Target=Source)]</Label>
        <Label Key="Notification_ReviewerResoponseToNotifyOfResponseRevisionBodyLabel">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]. \n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)]\n\n[NavigateLink(Target=Source)] </Label>
        <Label Key="Notification_ReviewerResponseBodyLabel">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName]. \n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="Notification_ReviewerResponseBodyRevisionLabel">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]. \n Consultant Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="Notification_ReviewerResponseToOfficialBodyLabel">[Attribute(Reviewer.ContactFullNameLabel)] has responded to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Description)]) on [DomainPartitionName]. \n Response: [Attribute(ReviewerResponseLookup)]. \n\n [Attribute(ReviewerNotes)] \n\n [NavigateLink(Target=Source)]</Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromOfficial">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(ReturnToClarificationReason)].</Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromOfficialRevision">[Attribute(CurrentOfficial.ShortLabel)] has returned for clarification Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] with the following remarks: [Attribute(ReturnToClarificationReason)].</Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromRegisterEntry">Please approve shipment and fabrication durations for the following Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) on [DomainPartitionName].</Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromRegisterEntryRevision">Please approve shipment and fabrication durations for the following Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName].</Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromSubmitItem">[Attribute(SubmittingVendor.ShortLabel)] has submitted Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) on [DomainPartitionName] for your review and submission. </Label>
        <Label Key="Notification_SubmittalCoordinatorBodyFromSubmitItemRevision">[Attribute(SubmittingVendor.ShortLabel)] has submitted Submittal Item [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName] for your review and submission. </Label>
        <Label Key="Notification_SubmittalCoordinatorRecalledSubject">Recalled: Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_SubmittalCoordinatorRecalledSubjectRevision">Recalled: Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_SubmittalCoordinatorRevisionSubject">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_SubmittalCoordinatorSubject">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_TaskBody">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) has been submitted to you for review on [DomainPartitionName]. Please sign in to review and respond to this Submittal. </Label>
        <Label Key="Notification_TaskBodyConsultantReturned">[Attribute(HubParent.CurrentOfficial.ContactFullNameLabel)] has returned your response to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) on [DomainPartitionName] for additional information. \n\n [Attribute(HubParent.Reviewer.Comments.Comment)]</Label>
        <Label Key="Notification_TaskBodyConsultantReturnedRevision">[Attribute(HubParent.CurrentOfficial.ContactFullNameLabel)] has returned your response to Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName] for additional information. \n\n [Attribute(HubParent.Reviewer.Comments.Comment)]</Label>
        <Label Key="Notification_TaskBodyReturnedFromDistribute">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] ([Attribute(HubParent.Subject)]) has been returned to you on [DomainPartitionName], with the following remarks: [Attribute(HubParent.ReturnToReviewersReason)]. Please sign in to review and respond to this Submittal.</Label>
        <Label Key="Notification_TaskBodyReturnedFromDistributeRevision">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) has been returned to you on [DomainPartitionName], with the following remarks: [Attribute(HubParent.ReturnToReviewersReason)]. Please sign in to review and respond to this Submittal.</Label>
        <Label Key="Notification_TaskBodyReturnedFromDistributeRevisionToConsultant">Submittal [Attribute(HubRoot.Number)].[Attribute(HubRoot.Revision)] - ([Attribute(HubRoot.Subject)]) has been returned to you on [DomainPartitionName], with the following remarks: [Attribute(HubRoot.ReturnToReviewersReason)]. Please sign in to review and respond to this Submittal.</Label>
        <Label Key="Notification_TaskBodyReturnedFromDistributeToConsultant">Submittal [Attribute(HubRoot.Number)].[Attribute(HubRoot.Revision)] ([Attribute(HubRoot.Subject)]) has been returned to you on [DomainPartitionName], with the following remarks: [Attribute(HubRoot.ReturnToReviewersReason)]. Please sign in to review and respond to this Submittal.</Label>
        <Label Key="Notification_TaskRevisionBody">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) has been submitted to you for review on [DomainPartitionName]. Please sign in to review and respond to this Submittal. </Label>
        <Label Key="Notification_TaskSubject">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="Notification_TaskSubjectRevision">Submittal [Attribute(HubParent.Number)].[Attribute(HubParent.Revision)] - ([Attribute(HubParent.Subject)]) on [DomainPartitionName]</Label>
        <Label Key="OfficialResponseAssertionMessage">Official's Response is Required</Label>
        <Label Key="OfficialReviewerAssertionMessage">Official Reviewer must be a Kahua user</Label>
        <Label Key="OfficialReviewerRequiredDetail">Official Reviewer is required.</Label>
        <Label Key="OfficialReviewerStepLabel">Official Reviewer</Label>
        <Label Key="OfficialReviewerTaskLabel">Submittal Item [Attribute(Number)].[Attribute(Revision)] Official Reviewer Task</Label>
        <Label Key="OfficialReviewerTaskViewLabel">Submittal Item Official Reviewer</Label>
        <Label Key="PackageReviewerNotesAssertionMessage">Reviewer notes are required on each submittal item</Label>
        <Label Key="PermissionFilterNamedOnRecord">User’s Company is Named on Record</Label>
        <Label Key="ProcessLabel">Process</Label>
        <Label Key="ProvideReasonLabel">Provide a Reason</Label>
        <Label Key="RecallLabel">Recall</Label>
        <Label Key="RegisterApprovalStepLabel">Register Approval</Label>
        <Label Key="RegisterEntryStepLabel">Register Entry</Label>
        <Label Key="ReopenLabel">Reopen</Label>
        <Label Key="RequestCorrectionsLabel">Request Corrections</Label>
        <Label Key="RequestSubmissionLabel">Request Submission</Label>
        <Label Key="RespondLabel">Respond</Label>
        <Label Key="ResponseDistributionRequiredAssertionMessage">Response Distribution is required</Label>
        <Label Key="ResponseRequiredDetail">Response is required.</Label>
        <Label Key="RestartReviewLabel">Restart Review</Label>
        <Label Key="ResubmitLabel">Resubmit</Label>
        <Label Key="ReturnReasonLabel">Return Reason</Label>
        <Label Key="ReturnToOfficialLabel">Return to Official</Label>
        <Label Key="ReturnToReviewers">Return to Consultant</Label>
        <Label Key="ReviewerAssertionMessage">Reviewer(s) must be Kahua users</Label>
        <Label Key="ReviewerNotesAssertionMessage"> Reviewer notes can't be empty</Label>
        <Label Key="ReviewerResponseAssertionMessage">The reviewer notes field is required to complete your submission.</Label>
        <Label Key="ReviewerResponseLookupAssertionMessage">The response field is required to complete your submission.</Label>
        <Label Key="ReviseFormActionLabel">REVISE</Label>
        <Label Key="ReviseLabel">Revise</Label>
        <Label Key="ReviseViewTitleLabel">Revise Submittal Item</Label>
        <Label Key="RevisionNotEmptyAssertionMessage">Revision number for item can not be empty</Label>
        <Label Key="ActionSaveLabel">Save</Label>
        <Label Key="ActionSaveCloseLabel">Save/Close</Label>
        <Label Key="SendSecondaryRespondersLabel">Send to New Consultant Reviewers</Label>
        <Label Key="SendSubjectLabel">[Attribute(DomainPartition.Number)] [Attribute(DomainPartition.Name)] [Attribute(AppNameLabel)] [Attribute(Number)].[Attribute(Revision)] [Attribute(Revision)] [Attribute(Subject)]</Label>
        <Label Key="SettingConsultantResponsePeriodCalendarLabel">Consultant Response Period Calendar</Label>
        <Label Key="SettingDaysInReviewCalendarLabel">Days In Review Calendar</Label>
        <Label Key="SettingDisableDistributedStatusLabel">Disable Distributed Status (Kahua Submittal Item Workflow Only)</Label>
        <Label Key="SettingOfficialResponsePeriodCalendarLabel">Official Response Period Calendar</Label>
        <Label Key="SettingOptionCalendarDaysLabel">Calendar Days</Label>
        <Label Key="SettingOptionOfficeDaysLabel">Office Days</Label>
        <Label Key="SettingOptionWorkDaysLabel">Job Site Days</Label>
        <Label Key="SettingRequireConsultantItemResponse">Require Consultant Item Response</Label>
        <Label Key="SettingSubmittalCoordinatorMustBeDomainUser">Submittal Coordinator Must Be Domain User</Label>
        <Label Key="SettingVendorSubmissionPeriodCalendarLabel">Submitter Submission Period Calendar</Label>
        <Label Key="StartReviewLabel">Send to Consultants</Label>
        <Label Key="SubjecMessageRespondToOfficialReviewersLabel">Review Completed on Submittal Item [Attribute(Number)].[Attribute(Revision)] ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="SubjMsgToConsultantRecallLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToConsultantRecallRevisionLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToOfficialRecallLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToOfficialRecallRevisionLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToVendorRecallLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToVendorRecallRegisterEntryLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToVendorRecallRegisterEntryRevisionLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubjMsgToVendorRecallRevisionLabel">Recalled: Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)])</Label>
        <Label Key="SubmissionDueDateRequired">Submission Due From Submitter is required</Label>
        <Label Key="SubmitItemStepLabel">Submit Item</Label>
        <Label Key="SubmitItemTaskLabel">Submittal Item [Attribute(Number)].[Attribute(Revision)] Submit Item Task</Label>
        <Label Key="SubmitLabel">Submit</Label>
        <Label Key="SubmittalAppNameLabel">Submittal Items</Label>
        <Label Key="SubmittalCoordinatorAssertionMessage">Submittal Coordinator must be a Kahua User</Label>
        <Label Key="SubmittalCoordinatorRequired">Submittal Coordinator is required</Label>
        <Label Key="SubmittalItemConsultantTaskViewTitleLabel">Submittal Item Consultant Reviewer</Label>
        <Label Key="SubmittalItemReportDetailsDesc">Submittal Detail Report</Label>
        <Label Key="SubmittalItemReportDetailsLabel">Submittal Detail Report</Label>
        <Label Key="SubmittalItemsOfficialTaskTitleLabel">Submittal Items Official Reviewer</Label>
        <Label Key="SubmittalItemPortableViewLabel">Submittal Item</Label>
        <Label Key="SubmittalItemUpdateAssetType">Update Asset Type</Label>
        <Label Key="SubmittalItemViewLabel">Submittal</Label>
        <Label Key="SubmittalItemViewTitleLabel">Submittal Item ([Attribute(WorkflowStep)]) </Label>
        <Label Key="FieldReturnToVendorDescription">Return To Submitter</Label>
        <Label Key="FieldReturnToVendorLabel">Return To Submitter</Label>
        <Label Key="SubmittalReportTitle">Submittal Report</Label>
        <Label Key="SubmittalRevisionLabel">Revision</Label>
        <Label Key="SubmittalViewReportDescription">Submittal Item</Label>
        <Label Key="SubmittalViewReportLabel">Submittal Item</Label>
        <Label Key="SubmittingCompany">Submitting Company</Label>
        <Label Key="SubmittingVendorAssertionMessage">Submitter must be a Kahua user</Label>
        <Label Key="SubmittingVendorRequiredDetail">Submitter must be a Kahua user.</Label>
        <Label Key="SubmittingVendorRequiredLabel">Submitter is required</Label>
        <Label Key="SubmitToCoordinatorLabel">Submit To Coordinator</Label>
        <Label Key="SubmitToReviewersLabel">Submit To Reviewers</Label>
        <Label Key="TaskLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="TaskMessageFromOfficialWithFinalResponse">[Attribute(CurrentOfficial.FirstName)] [Attribute(CurrentOfficial.LastName)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. Final Response: [Attribute(Response)]. \n\n [Attribute(ResponseNotes)] </Label>
        <Label Key="TaskMessageFromOfficialWithFinalResponseWithCC">[Attribute(CurrentOfficial.FirstName)] [Attribute(CurrentOfficial.LastName)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. Final Response: [Attribute(Response)]. \n\n [Attribute(ResponseNotes)] &lt;p&gt;This message sent to additional recipients: [Attribute(ResponseDistribution.ShortLabel)] </Label>
        <Label Key="TaskMessagefromPrimaryBodyLabel">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. </Label>
        <Label Key="TaskMessagefromPrimaryBodyRevisionLabel">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. Final Response: [Attribute(Response)]. \n\n [Attribute(ResponseNotes)]</Label>
        <Label Key="TaskMessagefromPrimaryRevisionBodyLabel">[Attribute(CurrentOfficial.ContactFullNameLabel)] has responded to Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]. </Label>
        <Label Key="TaskRevisionLabel">Submittal [Attribute(Number)].[Attribute(Revision)] - ([Attribute(Subject)]) on [DomainPartitionName]</Label>
        <Label Key="ValidationMessageOrderInvalidLabel">New consultant reviewer's order number must be after the order number of the existing consultant reviewers.</Label>
        <Label Key="ValidationMessageOrderNumberLabel">Must enter a Order number for each reviewer</Label>
        <Label Key="ValidationMessage_StartSequentialReview_NoNewConsultantsLabel">Cannot continue sequential review without adding new consultant reviewers.</Label>
        <Label Key="ValidationMessage_StartSequentialReview_OrderLabel">Order is required</Label>
        <Label Key="ValidationMessage_StartSequentialReview_ResponseDateDueLabel">Response Date Due is required</Label>
        <Label Key="ValidationMessage_StartSequentialReview_ReviewerLabel">Reviewer is required</Label>
        <Label Key="Validation_DescriptionRequired">Description is required.</Label>
        <Label Key="Validation_NumberRequired">Number is required.</Label>
        <Label Key="Validation_RevisionRequired">Revision Number is required.</Label>
        <Label Key="WorkflowStatus_CoordinatorReview">Coordinator Review</Label>
        <Label Key="WorkflowStatus_InReview">In Review</Label>
        <Label Key="WorkflowStatus_InternalReview">Internal Review</Label>
        <Label Key="WorkflowStatus_Locked">Completed</Label>
        <Label Key="WorkflowStatus_New">New</Label>
        <Label Key="WorkflowStatus_NotSubmitted">Not Submitted</Label>
        <Label Key="WorkflowStatus_PendingSubmission">Pending Submission</Label>
        <Label Key="WorkflowStatus_Recalled">Recalled</Label>
        <Label Key="WorkflowStatus_RegisterApproval">Register Approval</Label>
        <Label Key="WorkflowStatus_RegisterRequested">Register Requested</Label>
        <Label Key="WorkflowStatus_Reopened">Reopened</Label>
        <Label Key="WorkflowStatus_Requested">Requested</Label>
        <Label Key="WorkflowStatus_Responded">Responded</Label>
        <Label Key="WorkflowStatus_ResponseDistributed">Response Distributed</Label>
        <Label Key="WorkflowStatus_ResponseDistribution">Response Distribution</Label>
        <Label Key="WorkflowStatus_ResponseReceived">Response Received</Label>
        <Label Key="WorkflowStatus_Returned">Returned</Label>
        <Label Key="WorkflowStatus_Reviewed">Reviewed</Label>
        <Label Key="WorkflowStatus_Revised">Revised</Label>
        <Label Key="WorkflowStatus_SubmittedByVendor">Submitted By Submitter</Label>
        <Label Key="WorkflowStatus_SubmittedForReview">Submitted for Review</Label>
        <Label Key="WorkflowStatus_Unlocked">Unlocked</Label>
        <Label Key="WorkspaceSubmittalsLabel">Submittals</Label>
        <Label Key="FieldLinearLocationLabel">Linear Location</Label>
        <Label Key="FieldLinearLocationDescription">Linear Location</Label>
        <Label Key="FieldHardCopiesRequiredLabel">Hard Copies Required</Label>
        <Label Key="FieldHardCopiesRequiredDescription">Hard Copies Required</Label>
        <Label Key="FieldQualityValidationLabel">Quality Validation</Label>
        <Label Key="FieldQualityValidationDescription">Quality Validation</Label>
        <Label Key="FieldQualityValidationReasonLabel">Quality Validation Reason</Label>
        <Label Key="FieldQualityValidationReasonDescription">Quality Validation Reason</Label>
        <Label Key="FieldQualityCommentLabel">Quality Comment</Label>
        <Label Key="FieldQualityCommentDescription">Quality Comment</Label>
        <Label Key="AnchorSectionQualityLabel">Quality Validation</Label>
        <Label Key="AnchorSectionQualityLabelCapitalized">QUALITY VALIDATION</Label>
        <Label Key="FieldTurnoverIndexLabel">Sub-Category</Label>
        <Label Key="FieldScopeLabel">Scope</Label>
        <Label Key="FieldScopeLabelDescription">Scope</Label>
        <Label Key="FieldSystemLabel">System</Label>
        <Label Key="FieldSystemLabelDescription">System</Label>
        <Label Key="FieldTurnoverIndexCategoryLabel">Category</Label>
        <Label Key="FieldReasonForReturnVendorLabel">Reason for Return to Submitter</Label>
        <Label Key="AttributeReasonForReturnVendorDescription">Reason for Return to Submitter</Label>
        <Label Key="AttributeReasonForReturnVendorLabel">Reason for Return to Submitter</Label>
        <Label Key="FieldPromptReturnConsultantReasonLabel">Reason for Return to Consultant Reviewer</Label>
        <Label Key="FieldFieldReturnOfficialReasonLabel">Reason for Return to Official</Label>
        <Label Key="FieldSubmittingVendorLabel">Submitter</Label>
        <Label Key="AnchorSectionWorkPackageLabel">Workflow Matrix</Label>
        <Label Key="AnchorSectionWorkPackageLabelCapitalized">WORKFLOW MATRIX</Label>
        <Label Key="NewSubmittalItemTitle">New Submittal Item</Label>
        <Label Key="EditSubmittalItemTitle">Edit {ShortLabel}</Label>
        <Label Key="MenuGroupMoreLabelCapitalized">MORE</Label>
        <Label Key="MenuImport">IMPORT</Label>
        <Label Key="MenuExport">EXPORT</Label>
        <Label Key="TurnoverIndexAssertionMessage">Submittal Item Category must match Submittal Package Category</Label>
        <Label Key="MustBeNewAssertionMessage">Only items with a status of "New", "Revised", or "Reopened" can be updated or added via the import</Label>
        <Label Key="CanOnlyAddItemsToNewPackagesAssertionMessage">Can only add items to package with a status of "New", "Revised", or "Reopened"</Label>
        <Label Key="SubCategoryMustMatchBusinessUnit">Sub-Category Business Unit must match Project Business Unit</Label>
        <Label Key="ViewSubmittalItemTitle">View {ShortLabel}</Label>
        <Label Key="FieldMaterialRequisitionNumberLabel">Material Requisition</Label>
        <Label Key="FieldMaterialRequisitionNumberDescription">Material Requisition</Label>
        <Label Key="FieldOracleRequisitionLabel">Oracle Requisition</Label>
        <Label Key="FieldOracleRequisitionDescription">Oracle Requisition</Label>
        <Label Key="FieldPurchaseOrderNumberLabel">Purchase Order</Label>
        <Label Key="FieldPurchaseOrderNumberDescription">Purchase Order</Label>
        <Label Key="FieldAssetLabel">Asset</Label>
        <Label Key="FieldAssetTypeLabel">Asset Type</Label>
        <Label Key="AssertionInvalidLinearLocationLabel">Linear Location is invalid</Label>
      </Labels>
    </Culture>
  </Cultures>
  <DataTags>
    <DataTag Name="AnchorSectionReviewersLabel" Label="[AnchorSectionReviewersLabel]" CultureLabelKey="AnchorSectionReviewersLabel" IsRequired="False" IsRequiredLocked="True" IsVisible="True">
      <Key />
    </DataTag>
    <DataTag Name="AnchorSectionQuality" Label="[AnchorSectionQualityLabel]" CultureLabelKey="AnchorSectionQualityLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldRecallReasonLabel" Label="[FieldRecallReasonLabel]" CultureLabelKey="FieldRecallReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReasonRecallLabel" Label="[FieldReasonRecallLabel]" CultureLabelKey="FieldReasonRecallLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReturnForCorrectionsReasonLabel" Label="[FieldReturnForCorrectionsReasonLabel]" CultureLabelKey="FieldReturnForCorrectionsReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReturnToClarificationReasonLabel" Label="[FieldReturnToClarificationReasonLabel]" CultureLabelKey="FieldReturnToClarificationReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReturnToReviewersReasonLabel" Label="[FieldReturnToReviewersReasonLabel]" CultureLabelKey="FieldReturnToReviewersReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldAdditionalNotificationsLabel" Label="[FieldAdditionalNotificationsLabel]" CultureLabelKey="FieldAdditionalNotificationsLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldAddToResponseLabel" Label="[FieldAddToResponseLabel]" CultureLabelKey="FieldAddToResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldApprovedSubmittalRequiredByLabel" Label="[FieldApprovedSubmittalRequiredByLabel]" CultureLabelKey="FieldApprovedSubmittalRequiredByBasicWorkflowLabel">
      <Key />
      <DataTag.AttributeGroups>
        <AttributeGroup Name="GCAttributes" />
      </DataTag.AttributeGroups>
    </DataTag>
    <DataTag Name="FieldAssignedToLabel" Label="[FieldAssignedToLabel]" CultureLabelKey="FieldAssignedToLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldAutosendToConsultantReviewersLabel" Label="[FieldAutosendToConsultantReviewersLabel]" CultureLabelKey="FieldAutosendToConsultantReviewersLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldAutoSendToOfficialReviewerLabel" Label="[FieldAutoSendToOfficialReviewerLabel]" CultureLabelKey="FieldAutoSendToOfficialReviewerLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldCommentsLabel" Label="[FieldCommentsLabel]" CultureLabelKey="FieldCommentsLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldCommentstoConsultantLabel" Label="[FieldCommentstoConsultantLabel]" CultureLabelKey="FieldCommentstoConsultantLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantDateSentLabel" Label="[FieldConsultantDateSentLabel]" CultureLabelKey="FieldConsultantDateSentLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantReviewerLabel" Label="[FieldConsultantReviewerLabel]" CultureLabelKey="FieldConsultantReviewerLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantCanAddConsultantLabel" Label="[FieldConsultantCanAddConsultantLabel]" CultureLabelKey="FieldConsultantCanAddConsultantLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantDateDueLabel" Label="[FieldConsultantDateDueLabel]" CultureLabelKey="FieldConsultantDateDueLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantResponseDateLabel" Label="[FieldConsultantResponseDateLabel]" CultureLabelKey="FieldConsultantResponseDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantResponseLabel" Label="[FieldConsultantResponseLabel]" CultureLabelKey="FieldConsultantResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantResponseNotesLabel" Label="[FieldConsultantResponseNotesLabel]" CultureLabelKey="FieldConsultantResponseNotesLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantReviewersCanSeeAllResponsesLabel" Label="[FieldConsultantReviewersCanSeeAllResponsesLabel]" CultureLabelKey="FieldConsultantReviewersCanSeeAllResponsesLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldCurrentRevisionLabel" Label="[FieldCurrentRevisionLabel]" CultureLabelKey="FieldCurrentRevisionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateDueLabel" Label="[FieldDateDueLabel]" CultureLabelKey="FieldDateDueLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateRespondedLabel" Label="[FieldDateRespondedLabel]" CultureLabelKey="FieldDateRespondedLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateReturnedToSubcontractorLabel" Label="[FieldDateReturnedToSubcontractorLabel]" CultureLabelKey="FieldDateReturnedToSubcontractorLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateSendToOfficialByLabel" Label="[FieldDateSendToOfficialByLabel]" CultureLabelKey="FieldDateSendToOfficialByLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateSentLabel" Label="[FieldDateSentLabel]" CultureLabelKey="FieldDateSentLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateSubmittedToOfficialLabel" Label="[FieldDateSubmittedToOfficialLabel]" CultureLabelKey="FieldDateSubmittedToOfficialLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldResponseDueDateLabel" Label="[FieldResponseDueDateLabel]" CultureLabelKey="FieldResponseDueDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDaysInReviewLabel" Label="[FieldDaysInReviewLabel]" CultureLabelKey="FieldDaysInReviewLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldDisplayConsultantResponseUponCompletionLabel" Label="[FieldDisplayConsultantResponseUponCompletionLabel]" CultureLabelKey="FieldDisplayConsultantResponseUponCompletionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDisplayConsultantResponseUponConsultantResponseLabel" Label="[FieldDisplayConsultantResponseUponConsultantResponseLabel]" CultureLabelKey="FieldDisplayConsultantResponseUponConsultantResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldFinalResponseLabel" Label="[FieldFinalResponseLabel]" CultureLabelKey="FieldFinalResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldFinalResponseNotesLabel" Label="[FieldFinalResponseNotesLabel]" CultureLabelKey="FieldFinalResponseNotesLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldInReviewSequentialLabel" Label="[AttributeInReviewSequentialLabel]" CultureLabelKey="AttributeInReviewSequentialLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldInstructionsToConsultantReviewers" Label="[FieldInstructionsToConsultantReviewers]" CultureLabelKey="FieldInstructionsToConsultantReviewers">
      <Key />
    </DataTag>
    <DataTag Name="FieldInstructionsToOfficialLabel" Label="[FieldInstructionsToOfficialLabel]" CultureLabelKey="FieldInstructionsToOfficialLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldNewConsultantReviewersLabel" Label="[FieldNewConsultantReviewersLabel]" CultureLabelKey="FieldNewConsultantReviewersLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldNotifyAllReviewersLabel" Label="[FieldNotifyAllReviewersLabel]" CultureLabelKey="FieldNotifyAllReviewersLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldNotifyOfResponseLabel" Label="[FieldNotifyOfResponseLabel]" CultureLabelKey="FieldNotifyOfResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldNotifyResponseDistributionLabel" Label="[FieldNotifyResponseDistributionLabel]" CultureLabelKey="FieldNotifyResponseDistributionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldNotifyResponseDistributionOnCompletedLabel" Label="[FieldNotifyResponseDistributionOnCompletedLabel]" CultureLabelKey="FieldNotifyResponseDistributionOnCompletedLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialNotesLabel" Label="[FieldOfficialNotesLabel]" CultureLabelKey="FieldOfficialNotesLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialResponseDueDateLabel" Label="[FieldOfficialResponseDueDateLabel]" CultureLabelKey="FieldOfficialResponseDueDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialResponseLabel" Label="[FieldOfficialResponseLabel]" CultureLabelKey="FieldOfficialResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialReviewerDueDateLabel" Label="[FieldOfficialReviewerDueDateLabel]" CultureLabelKey="FieldOfficialReviewerDueDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialReviewerResponseDateLabel" Label="[FieldOfficialReviewerResponseDateLabel]" CultureLabelKey="FieldOfficialReviewerResponseDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOfficialReviewPeriodLabel" Label="[FieldOfficialReviewPeriodLabel]" CultureLabelKey="FieldReviewPeriodNotRequiredLabel" IsRequiredLocked="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldPriorityLabel" Label="[FieldPriorityLabel]" CultureLabelKey="FieldPriorityLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldPromptReasonLabel" Label="[FieldPromptReasonLabel]" CultureLabelKey="FieldPromptReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReviewerResponseSentDateLabel" Label="[FieldReviewerResponseSentDateLabel]" CultureLabelKey="FieldReviewerResponseSentDateLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReviewPeriodLabel" Label="[FieldReviewPeriodLabel]" CultureLabelKey="FieldReviewPeriodLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldSubmittalPackageLabel" Label="[FieldSubmittalPackageLabel]" CultureLabelKey="FieldSubmittalPackageLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldSubmittingVendorCompanyLabel" Label="[FieldSubmittingVendorCompanyLabel]" CultureLabelKey="FieldSubmittingVendorCompanyLabelKey">
      <Key />
    </DataTag>
    <DataTag Name="FieldSubmittingVendorLabel" Label="[FieldSubmittingVendorLabel]" CultureLabelKey="FieldSubmittingVendorLabel" IsRequired="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldTrackItemsWithPackageLabel" Label="[FieldTrackItemsWithPackageLabel]" CultureLabelKey="FieldTrackItemsWithPackageLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldVendorResubmissionPeriodLabel" Label="[FieldVendorResubmissionPeriodLabel]" CultureLabelKey="FieldVendorResubmissionPeriodLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldVendorSubmissionPeriodLabel" Label="[FieldVendorSubmissionPeriodLabel]" CultureLabelKey="FieldVendorSubmissionPeriodLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldWorkPackageLabel" Label="[FieldWorkPackageLabel]" CultureLabelKey="FieldWorkPackageLabel" IsRequired="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldLinearLocationLabel" Label="[FieldLinearLocationLabel]" CultureLabelKey="FieldLinearLocationLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldHardCopiesRequiredLabel" Label="[FieldHardCopiesRequiredLabel]" CultureLabelKey="FieldHardCopiesRequiredLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldMaterialRequistionNumberLabel" Label="[FieldMaterialRequistionNumberLabel]" CultureLabelKey="FieldMaterialRequistionNumberLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldOracleRequisitionLabel" Label="[FieldOracleRequisitionLabel]" CultureLabelKey="FieldOracleRequisitionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldPurchaseOrderLabel" Label="[FieldPurchaseOrderLabel]" CultureLabelKey="FieldPurchaseOrderLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldQualityValidationLabel" Label="[FieldQualityValidationLabel]" CultureLabelKey="FieldQualityValidationLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldQualityValidationReasonLabel" Label="[FieldQualityValidationReasonLabel]" CultureLabelKey="FieldQualityValidationReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReviewerOrderLabel" Label="[FieldReviewerOrderLabel]" CultureLabelKey="FieldReviewerOrderLabel">
      <Key />
    </DataTag>
    <DataTag Name="AnchorSectionConstultantReviewers" Label="[AnchorSectionConsultantReviewersLabelCapitalized]" CultureLabelKey="AnchorSectionConsultantReviewersLabel">
      <Key />
      <DataTag.AttributeGroups>
        <AttributeGroup IsEnabled="False" Name="GCAttributes" />
      </DataTag.AttributeGroups>
    </DataTag>
    <DataTag Name="FieldReviewerLabel" Label="[FieldReviewerLabel]" CultureLabelKey="FieldReviewerLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldConsultantResponseLabel" Label="[FieldConsultantResponseLabel]" CultureLabelKey="FieldConsultantResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReviewerNotesLabel" Label="[FieldReviewerNotesLabel]" CultureLabelKey="FieldReviewerNotesLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldResponseRequiredLabel" Label="[FieldResponseRequiredLabel]" CultureLabelKey="FieldResponseRequiredLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDateRequiredOnsiteLabel" Label="[FieldDateRequiredOnsiteLabel]" CultureLabelKey="FieldDateRequiredOnsiteLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldQualityComment" Label="[FieldQualityCommentLabel]" CultureLabelKey="FieldQualityCommentLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldInstructionsToReviewersLabel" Label="[FieldInstructionsToReviewersLabel]" CultureLabelKey="FieldInstructionsToReviewersLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldSubmittalPackageReviewers" Label="[FieldReviewersLabel]" CultureLabelKey="FieldReviewersLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldTurnoverIndexLabel" Label="[FieldTurnoverIndexLabel]" CultureLabelKey="FieldTurnoverIndexLabel" IsRequired="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldReasonLabel" Label="[FieldReasonLabel]" CultureLabelKey="FieldReasonLabel" IsRequired="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldScopeLabel" Label="[FieldScopeLabel]" CultureLabelKey="FieldScopeLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldSystemLabel" Label="[FieldSystemLabel]" CultureLabelKey="FieldSystemLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldSubmittalCoordinatorLabel" Label="[FieldSubmittalCoordinatorLabel]" CultureLabelKey="FieldSubmittalCoordinatorLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldTurnoverIndexCategoryLabel" Label="[FieldTurnoverIndexCategoryLabel]" CultureLabelKey="FieldTurnoverIndexCategoryLabel" IsRequired="True">
      <Key />
    </DataTag>
    <DataTag Name="FieldCurrentRevisionLabel" Label="[FieldCurrentRevisionLabel]" CultureLabelKey="FieldCurrentRevisionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldReasonForReturnVendorLabel" Label="[FieldReasonForReturnVendorLabel]" CultureLabelKey="FieldReasonForReturnVendorLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldPromptReturnConsultantReasonLabel" Label="[FieldPromptReturnConsultantReasonLabel]" CultureLabelKey="FieldPromptReturnConsultantReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldFieldReturnOfficialReasonLabel" Label="[FieldFieldReturnOfficialReasonLabel]" CultureLabelKey="FieldFieldReturnOfficialReasonLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldResponseLabel" Label="[FieldResponseLabel]" CultureLabelKey="FieldResponseLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldDescriptionLabel" Label="[FieldDescriptionLabel]" CultureLabelKey="FieldDescriptionLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldRecordBoxBarcodeLabel" Label="[FieldRecordBoxBarcodeLabel]" CultureLabelKey="FieldRecordBoxBarcodeLabel" IsVisible="False">
      <Key />
    </DataTag>
    <DataTag Name="FieldMaterialRequisitionNumberLabel" Label="[FieldMaterialRequisitionNumberLabel]" CultureLabelKey="FieldMaterialRequisitionNumberLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldPurchaseOrderNumberLabel" Label="[FieldPurchaseOrderNumberLabel]" CultureLabelKey="FieldPurchaseOrderNumberLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldAssetLabel" Label="[FieldAssetLabel]" CultureLabelKey="FieldAssetLabel">
      <Key />
    </DataTag>
    <DataTag Name="FieldAssetTypeLabel" Label="[FieldAssetTypeLabel]" CultureLabelKey="FieldAssetTypeLabel">
      <Key />
    </DataTag>
  </DataTags>
  <App.DataSources>
    <LegacyDataSource type="Legacy" Name="SubmittalItem">
      <LegacyDataSource.DataSourceXml Name="SubmittalItem" SelectMode="Data" SaveMode="IsDirty" ChildPartitionMode="Default" Access="Read">
        <Parameters>
          <Parameter Name="EntityId" />
        </Parameters>
        <Select>
          <Attribute Name="SubmittalItem.Number" />
          <Attribute Name="SubmittalItem.SubmittalPackage.Number" Alias="PackageNumber" />
          <Attribute Name="SubmittalItem.Revision" />
          <Attribute Name="SubmittalItem.Status" />
          <Attribute Name="SubmittalItem.Subject" />
          <Attribute Name="SubmittalItem.Description" />
          <Attribute Name="SubmittalItem.ResponseDistribution" />
          <Attribute Name="SubmittalItem.Notes" />
          <Attribute Name="SubmittalItem.Location" SelectTemplate="kahua_Location.LocationForRef" />
          <Attribute Name="SubmittalItem.Reason" />
          <Attribute Name="SubmittalItem.SubmittingVendor.ContactCompanyLabel" />
          <Attribute Name="SubmittalItem.SubmittalCoordinator.ContactCompanyLabel" />
          <Attribute Name="SubmittalItem.OfficialReviewer.ContactCompanyLabel" />
          <Attribute Name="SubmittalItem.Response" />
          <Attribute Name="SubmittalItem.ResponseNotes" />
          <Attribute Name="SubmittalItem.SubmissionDueDate" />
          <Attribute Name="SubmittalItem.DateSubmittedByVendor" />
          <Attribute Name="SubmittalItem.DateSubmittedToOfficial" />
          <Attribute Name="SubmittalItem.OfficialResponseDate" />
          <Attribute Name="SubmittalItem.DateSendToOfficialBy" />
          <Attribute Name="SubmittalItem.DateReturnedToVendor" />
          <Attribute Name="SubmittalItem.DateSentToReviewers" />
          <Attribute Name="SubmittalItem.ResponseDueDate" />
          <Attribute Name="SubmittalItem.ReviewerResponseDate" />
          <Attribute Name="SubmittalItem.ReviewPeriod" />
          <Attribute Name="SubmittalItem.RequestedfromVendor" />
          <Attribute Name="SubmittalItem.ApprovedSubmittalRequiredBy" />
          <Attribute Name="SubmittalItem.OutwardReferences" SelectTemplate="kahua_Reference.ReferenceForReport" />
          <Attribute Name="SubmittalItem.SubmittingVendor" SelectTemplate="kahua_PeopleManager.ContactForRefPlus" />
          <Attribute Name="SubmittalItem.OfficialReviewer" SelectTemplate="kahua_PeopleManager.ContactForRefPlus" />
          <Attribute Name="SubmittalItem.Reviewers">
            <Attributes>
              <Attribute Name="Reviewers.ContactCompanyLabel" DataType="AutoNumber" />
              <Attribute Name="Reviewers.ReviewerDateSent" />
            </Attributes>
          </Attribute>
          <Attribute Name="SubmittalItem.LinearLocation" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.HardCopiesRequired" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.MaterialRequistionNumber" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.OracleRequisition" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.PurchaseOrder" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityValidation" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityValidationReason" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityComment" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.TurnoverIndex" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.Scope" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.System" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.RecordBoxBarcode" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.MaterialRequisitionNumber" DataType="Text" />
          <Attribute Name="SubmittalItem.OracleRequisition" DataType="Text" />
          <Attribute Name="SubmittalItem.PurchaseOrderNumber" DataType="Text" />
        </Select>
        <From>
          <Entity EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Alias="SubmittalItem" Name="kahua_AEC_SubmittalItem.SubmittalItem" />
        </From>
        <Where>
          <Attribute Name="SubmittalItem.Id" ComparisonType="Default" DateType="Default" DateOffsetType="Default">
            <Equals Parameter="EntityId" />
          </Attribute>
        </Where>
      </LegacyDataSource.DataSourceXml>
    </LegacyDataSource>
    <LegacyDataSource type="Legacy" Name="SubmittalItemListExport">
      <LegacyDataSource.DataSourceXml Name="SubmittalItemListExport" SelectMode="Data" SaveMode="IsDirty" ChildPartitionMode="Default" Access="Read|Write">
        <Select>
          <Attribute Name="SubmittalItem.Number" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.Revision" DataType="Number" />
          <Attribute Name="SubmittalItem.CurrentRevision" />
          <Attribute Name="SubmittalItem.Subject" DataType="Text" />
          <Attribute Name="SubmittalItem.Description" DataType="Text" />
          <Attribute Name="SubmittalItem.SubmittalPackage" DataType="Entity" SelectTemplate="kahua_AEC_SubmittalPackage.SubmittalPackageForRef" />
          <Attribute Name="SubmittalItem.Status" DataType="Lookup" />
          <Attribute Name="SubmittalItem.Priority" DataType="Lookup" />
          <Attribute Name="SubmittalItem.SubmittalCoordinator" DataType="Entity" SelectTemplate="kahua_PeopleManager.ContactForRefPlus" />
          <Attribute Name="SubmittalItem.Reason" DataType="Lookup" />
          <Attribute Name="SubmittalItem.Location" DataType="Entity" SelectTemplate="kahua_Location.LocationForRefWithAddress" />
          <Attribute Name="SubmittalItem.RequestedfromVendor" DataType="Date" />
          <Attribute Name="SubmittalItem.ApprovedSubmittalRequiredBy" DataType="Date" />
          <Attribute Name="SubmittalItem.SubmittingVendor" DataType="Entity" SelectTemplate="kahua_PeopleManager.ContactForRefPlus" />
          <Attribute Name="SubmittalItem.VendorNotes" DataType="Text" />
          <Attribute Name="SubmittalItem.OfficialReviewer" DataType="Entity" SelectTemplate="kahua_PeopleManager.ContactForRefPlus" />
          <Attribute Name="SubmittalItem.InstructionsToOfficial" DataType="Text" />
          <Attribute Name="SubmittalItem.Response" DataType="Lookup" />
          <Attribute Name="SubmittalItem.ResponseNotes" DataType="Text" />
          <Attribute Name="SubmittalItem.Notes" DataType="Text" />
          <Attribute Name="SubmittalItem.OfficialNotes" DataType="Text" />
          <Attribute Name="SubmittalItem.OfficialResponse" DataType="Lookup" />
          <Attribute Name="SubmittalItem.InstructionsToReviewers" DataType="Text" />
          <Attribute Name="SubmittalItem.Reviewers" DataType="Entity" SelectTemplate="kahua_AEC_PackagedSubmittals.SubmittalReviewer" />
          <Attribute Name="SubmittalItem.SubmissionDueDate" DataType="Date" />
          <Attribute Name="SubmittalItem.DateSubmittedByVendor" DataType="Date" />
          <Attribute Name="SubmittalItem.DateSendToOfficialBy" DataType="Date" />
          <Attribute Name="SubmittalItem.DateSubmittedToOfficial" DataType="Date" />
          <Attribute Name="SubmittalItem.ReviewPeriod" DataType="Integer" />
          <Attribute Name="SubmittalItem.ResponseDueDate" DataType="Date" />
          <Attribute Name="SubmittalItem.OfficialResponseDate" DataType="Date" />
          <Attribute Name="SubmittalItem.DateReturnedToVendor" DataType="Date" />
          <Attribute Name="SubmittalItem.LinearLocation" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.HardCopiesRequired" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityValidation" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityValidationReason" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.QualityComment" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.TurnoverIndex" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.Scope" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.System" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.RecordBoxBarcode" DataType="AutoNumber" />
          <Attribute Name="SubmittalItem.MaterialRequisitionNumber" DataType="Text" />
          <Attribute Name="SubmittalItem.OracleRequisition" DataType="Text" />
          <Attribute Name="SubmittalItem.PurchaseOrderNumber" DataType="Text" />
        </Select>
        <From>
          <Entity EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" Alias="SubmittalItem" Name="kahua_AEC_SubmittalItem.SubmittalItem" />
        </From>
      </LegacyDataSource.DataSourceXml>
    </LegacyDataSource>
  </App.DataSources>
  <EntityDefs>
    <EntityDef Name="SubmittalItem" IsAttachable="True" IsConfigurable="True" Description="[EntityDefSubmittalItemDescription]" Label="[EntityDefSubmittalItemLabel]" LabelPlural="[EntityDefSubmittalItemLabelPlural]" LabelAbbv="[EntityDefSubmittalItemLabelAbbv]" LabelAbbvPlural="[EntityDefSubmittalItemLabelAbbvPlural]" EntityType="Document" IsSearchable="True" IsReportable="True" DefaultEntityActionList="kahua_AEC_SubmittalItem.SubmittalDefaultEntityActions" OwnerDeleteDeactivatesOwnerChildren="False" DeleteDeactivatesLinks="True">
      <Attributes>
        <Attribute Name="ShortLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[Number].[Revision] - [Subject]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="Revision" Label="[AttributeRevisionLabel]" Description="[AttributeRevisionDescription]" DataType="Text" IsConfigurable="true" MaxLength="30">
          <DefaultValue>
            <DefaultText Text="0" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="VendorNotes" Label="[AttributeVendorNotesLabel]" Description="[AttributeVendorNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="ReviewersMulti" Label="[AttributeReviewersLabel]" Description="[AttributeReviewersLabel]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" Cardinality="OneToMany" />
        <Attribute Name="FromStep" DataType="Text" />
        <Attribute Name="FromReason" DataType="Text" />
        <Attribute Name="AssignedTo" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" Cardinality="OneToMany" />
        <Attribute Name="SubmittedFromVendor" Label="[FieldSubmittedFromVendorLabel]" DataType="Boolean" />
        <Attribute Name="PromptReturnOfficialReason" DataType="Text" />
        <Attribute Name="ReasonForReturnVendor" Label="[AttributeReasonForReturnVendorLabel]" Description="[AttributeReasonForReturnVendorDescription]" DataType="Text" />
        <Attribute Name="CurrentSequentialReviewNumber" Label="[AttributeCurrentSequentialReviewNumberLabel]" DataType="Integer" />
        <Attribute Name="IsSequentialReview" Label="[IsSequentialReviewLabel]" Description="[IsSequentialReviewLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="CurrentOfficial" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="AutosendToOfficial" Label="[FieldAutoSendToOfficialReviewerLabel]" Description="[FieldAutoSendToOfficialReviewerDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="AutosendToConsultants" Label="[FieldAutosendToConsultantReviewersLabel]" Description="[FieldAutosendToConsultantReviewersDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="true" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DocumentCreator" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact">
          <DefaultValue>
            <DefaultEntity Text="[CurrentUser]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="PackageNumber" Label="[AttributePackageNumberLabel]" Description="[AttributePackageNumberDescription]" DataType="Text" />
        <Attribute Name="Reference" Label="[AttributeReferencesLabel]" Description="[AttributeReportedByDescription]" DataType="Text" />
        <Attribute Name="SubmissionNotes" Label="[FieldSubmissionNotesLabel]" DataType="Text" />
        <Attribute Name="ResponseDistribution" Label="[AttributeResponseDistributionLabel]" Description="[AttributeResponseDistributionLabel]" DataType="Entity" LinkedEntityDef="kahua_MessageManager.kahua_MessageParticipant" IsConfigurable="true" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="ConsultantsCanAddConsultants" Label="[AttributeConsultantsCanAddConsultantsLabel]" Description="[AttributeConsultantsCanAddConsultantsLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ConsultantCanSeeAllResponses" Label="[AttributeConsultantCanSeeAllResponsesLabel]" Description="[AttributeConsultantCanSeeAllResponsesLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="true" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DateSentToReviewers" Label="[AttributeDateSentLabel]" Description="[AttributeDateSentLabel]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateSubmittedByVendor" Label="[AttributeDateSubmittedByVendorLabel]" Description="[AttributeDateSubmittedByVendorDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="InternalProcessingDuration" Label="[AttributeInternalProcessingDurationLabel]" Description="[AttributeInternalProcessingDurationLabel]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="ReviewPeriod" Label="[AttributeReviewPeriodLabel]" Description="[AttributeReviewPeriodDescription]" DataType="Integer" IsConfigurable="true" MaxLength="30" />
        <Attribute Name="DaysInReview" Label="[AttributeDaysInReviewLabel]" Description="[AttributeDaysInReviewDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="ReviewerResponseDate" Label="[AttributeDateRespondedLabel]" Description="[AttributeDateRespondedLabel]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="NotifyAllReviewers" Label="[AttributeNotifyAllReviewersLabel]" Description="[AttributeNotifyAllReviewersLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ReleaseDate" Label="[AttributeReleaseDateLabel]" Description="[AttributeReleaseDateDescription]" DataType="Date" />
        <Attribute Name="WorkflowStep" Label="[AttributeWorkflowStepLabel]" Description="[AttributeWorkflowStepLabel]" DataType="Text">
          <DefaultValue>
            <DefaultText Text="New" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="LoggedUser" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="Reviewers" Label="[AttributeReviewersLabel]" Description="[AttributeReviewersDescription]" DataType="Entity" LinkedEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="SelectedConsultant" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="ConsultantReviewPeriod" Label="[FieldConsultantReviewPeriodLabel]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="NotifyOfResponse" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" Cardinality="OneToMany" />
        <Attribute Name="OfficialResponse" Label="[AttributeOfficialResponseLabel]" Description="[AttributeOfficialResponseDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
        <Attribute Name="OfficialNotes" Label="[AttributeOfficialNotesLabel]" Description="[AttributeOfficialNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="RecallReason" Label="[FieldRecallReasonLabel]" Description="[FieldRecallReasonLabelDesc]" DataType="Text" />
        <Attribute Name="ReturnForCorrectionsReason" DataType="Text" />
        <Attribute Name="ReturnToClarificationReason" DataType="Text" />
        <Attribute Name="PromptReturnConsultantReason" DataType="Text" />
        <Attribute Name="PromptInitialized" DataType="Text" IsPersisted="False" />
        <Attribute Name="ReturnToReviewersReason" DataType="Text" />
        <Attribute Name="VendorSubmissionPeriod" Label="[FieldVendorSubmissionPeriodLabel]" Description="[FieldVendorSubmissionPeriodDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="VendorResubmissionPeriod" Label="[FieldVendorResubmissionPeriodLabel]" Description="[FieldVendorResubmissionPeriodDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="OutwardReferences" Label="Outward References" Description="Outward References" DataType="Entity" LinkedEntityDef="kahua_Reference.kahua_ReferenceBase" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="CurrentSequentialReviewer" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="SequentialReviewStarted" Label="[FieldSequentialReviewStartedLabel]" Description="[FieldSequentialReviewStartedDescription]" DataType="Boolean">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="NotifyResponseDistribution" Label="[AttributeNotifyResponseDistributionLabel]" Description="[AttributeNotifyResponseDistributionDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="NotifyResponseDistributionOnCompleted" Label="[AttributeNotifyResponseDistributionOnCompletedLabel]" Description="[AttributeNotifyResponseDistributionOnCompletedDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="InitialSubmitToReviewersPerformed" DataType="Boolean" />
        <Attribute Name="DisplayConsultantResponseUponCompletion" Label="[FieldDisplayConsultantResponseUponCompletionLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DisplayConsultantResponseUponConsultantResponse" Label="[FieldDisplayConsultantResponseUponConsultantResponseLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="WorkPackage" Label="[AttributeWorkPackageLabel]" Description="[AttributeWorkPackageDescription]" DataType="Entity" LinkedEntityDef="kahua_WorkPackage.WorkPackage" IsConfigurable="true" />
        <Attribute Name="LinearLocation" Label="[FieldLinearLocationLabel]" Description="[FieldLinearLocationDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="HardCopiesRequired" Label="[FieldHardCopiesRequiredLabel]" Description="[FieldHardCopiesRequiredDescription]" DataType="Boolean" IsConfigurable="true" />
        <Attribute Name="QualityValidation" Label="[FieldQualityValidationLabel]" Description="[FieldQualityValidationDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="enbridge_AEC_SubmittalItem_workflow_extension.QualityValidationList" />
        <Attribute Name="QualityValidationReason" Label="[FieldQualityValidationReasonLabel]" Description="[FieldQualityValidationReasonDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="enbridge_AEC_SubmittalItem_workflow_extension.QualityValidationReasonList" />
        <Attribute Name="QualityComment" Label="[FieldQualityCommentLabel]" Description="[FieldQualityCommentDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="TurnoverIndex" Label="[FieldTurnoverIndexLabel]" Description="[FieldTurnoverIndexLabel]" DataType="Entity" LinkedEntityDef="enbridge_TurnoverIndex.TurnoverIndex" IsConfigurable="true" ReferenceType="Link" />
        <Attribute Name="DomainPartition" DataType="Entity" LinkedEntityDef="kahua_Project.Project" ReferenceType="Link" />
        <Attribute Name="Scope" Label="[FieldScopeLabel]" Description="[FieldScopeLabelDescription]" DataType="Entity" LinkedEntityDef="enbridge_ScopeIndex.Scope" IsConfigurable="true" />
        <Attribute Name="System" Label="[FieldSystemLabel]" Description="[FieldSystemLabelDescription]" DataType="Entity" LinkedEntityDef="kahua_AssetManager_Systems.System" IsConfigurable="true" />
        <Attribute Name="Reason" Label="[AttributeReasonLabel]" Description="[AttributeReasonDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.Reason">
          <DefaultValue>
            <DefaultText Text="As Requested" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="TurnoverIndexCategory" Label="[FieldTurnoverIndexCategoryLabel]" Description="[FieldTurnoverIndexCategoryLabel]" DataType="Lookup" IsConfigurable="true" LookupListName="enbridge_TurnoverIndex.TurnoverIndex_CategoryLookup" />
        <Attribute Name="SubmittingVendor" Label="[AttributeSubmittingVendorLabel]" Description="[AttributeSubmittingVendorDescription]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" />
        <Attribute Name="RecordBoxBarcode" Label="[AttributeRecordBoxBarcodeLabel]" Description="[AttributeRecordBoxBarcodeLabel]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="SentToVendor" DataType="Boolean">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="TurnoverIndexCategoryCache" Label="[FieldTurnoverIndexCategoryLabel]" Description="[FieldTurnoverIndexCategoryLabel]" DataType="Text" />
        <Attribute Name="DomainCompany" DataType="Entity" LinkedEntityDef="kahua_CompanyManager.kahua_Company" ReferenceType="Link" />
        <Attribute Name="MaterialRequisitionNumber" Label="[FieldMaterialRequisitionNumberLabel]" Description="[FieldMaterialRequisitionNumberDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="OracleRequisition" Label="[FieldOracleRequisitionLabel]" Description="[FieldOracleRequisitionDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="PurchaseOrderNumber" Label="[FieldPurchaseOrderNumberLabel]" Description="[FieldPurchaseOrderNumberDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Turnover" DataType="Entity" LinkedEntityDef="enbridge_Turnover.Turnover" ReferenceType="Link" />
      </Attributes>
      <ParentEntityDefs>
        <EntityDef Ref="kahua_AEC_SubmittalItem.SubmittalItem" />
      </ParentEntityDefs>
      <Permissions>
        <Permission Type="Operation" Name="kahua_AEC_SubmittalItem.Add" Operation="Create" />
        <Permission Type="Operation" Name="kahua_AEC_SubmittalItem.View" Operation="Read" />
        <Permission Type="Operation" Name="kahua_AEC_SubmittalItem.Edit" Operation="Update" />
        <Permission Type="Operation" Name="kahua_AEC_SubmittalItem.Remove" Operation="Delete" />
      </Permissions>
      <EntityDef.UnrestrictedAttributes Values="Number,Revision,Subject" />
    </EntityDef>
    <EntityDef Name="SubmittalWorkflowItem" IsAttachable="False" EntityType="Document">
      <Attributes>
        <Attribute Name="SubmittedFromVendor" DataType="Boolean">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="Number" Label="[AttributeNumberLabel]" Description="[AttributeNumberDescription]" DataType="Text" MaxLength="30" />
        <Attribute Name="ShortLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="Submittal Item [Number]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="Priority" Label="[PriorityLoockupLabel]" Description="[PriorityLookupLabelDescription]" DataType="Lookup" LookupListName="kahua_AEC_SubmittalItem.Priority" />
        <Attribute Name="InternalProcessingDuration" Label="[AttributeInternalProcessingDurationLabel]" Description="[AttributeInternalProcessingDurationLabel]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="NotifyAllReviewers" Label="[AttributeNotifyAllReviewersLabel]" Description="[AttributeNotifyAllReviewersLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="PackageNumber" Label="[AttributePackageNumberLabel]" Description="[AttributePackageNumberDescription]" DataType="Text" />
        <Attribute Name="ConsultantsCanAddConsultants" Label="[AttributeConsultantsCanAddConsultantsLabel]" Description="[AttributeConsultantsCanAddConsultantsLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ConsultantCanSeeAllResponses" Label="[AttributeConsultantCanSeeAllResponsesLabel]" Description="[AttributeConsultantCanSeeAllResponsesLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="true" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ReviewPeriod" Label="[AttributeReviewPeriodLabel]" Description="[AttributeReviewPeriodDescription]" DataType="Integer" IsConfigurable="true" MaxLength="30" />
        <Attribute Name="DaysInReview" Label="[AttributeDaysInReviewLabel]" Description="[AttributeDaysInReviewDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="Reviewers" Label="[AttributeReviewersLabel]" Description="[AttributeReviewersDescription]" DataType="Entity" LinkedEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="SelectedConsultant" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="OfficialNotes" Label="[AttributeOfficialNotesLabel]" Description="[AttributeOfficialNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="OfficialResponse" Label="[AttributeOfficialResponseLabel]" Description="[AttributeOfficialResponseDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
        <Attribute Name="VendorSubmissionPeriod" Label="[FieldVendorSubmissionPeriodLabel]" Description="[FieldVendorSubmissionPeriodDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="VendorNotes" Label="[AttributeVendorNotesLabel]" Description="[AttributeVendorNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="FromStep" DataType="Text" />
        <Attribute Name="OutwardReferences" Label="Outward References" Description="Outward References" DataType="Entity" LinkedEntityDef="kahua_Reference.kahua_ReferenceBase" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="CurrentSequentialReviewNumber" Label="[AttributeCurrentSequentialReviewNumberLabel]" DataType="Integer" />
        <Attribute Name="CurrentSequentialReviewer" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="Reviewer" Label="[AttributeOfficialReviewerLabel]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" />
        <Attribute Name="ReviewerNotes" Label="[FieldReviewerNotesLabel]" DataType="Text" />
        <Attribute Name="ReviewerResponseLookup" Label="[AttributeResponseLabel]" DataType="Lookup" LookupListName="kahua_AEC_Submittal.SubmittalItemResponse" />
        <Attribute Name="Order" Label="[AttributeOrderLabel]" DataType="Integer" IsPersisted="False" />
        <Attribute Name="WorkPackage" Label="[AttributeWorkPackageLabel]" Description="[AttributeWorkPackageDescription]" DataType="Entity" LinkedEntityDef="kahua_WorkPackage.WorkPackage" IsConfigurable="true" />
        <Attribute Name="LinearLocation" Label="[FieldLinearLocationLabel]" Description="[FieldLinearLocationDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="HardCopiesRequired" Label="[FieldHardCopiesRequiredLabel]" Description="[FieldHardCopiesRequiredDescription]" DataType="Boolean" IsConfigurable="true" />
        <Attribute Name="QualityValidation" Label="[FieldQualityValidationLabel]" Description="[FieldQualityValidationDescription]" DataType="Lookup" IsConfigurable="true" />
        <Attribute Name="QualityValidationReason" Label="[FieldQualityValidationReasonLabel]" Description="[FieldQualityValidationReasonDescription]" DataType="Lookup" IsConfigurable="true" />
        <Attribute Name="QualityComment" Label="[FieldQualityCommentLabel]" Description="[FieldQualityCommentDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="TurnoverIndex" Label="[FieldTurnoverIndexLabel]" Description="[FieldTurnoverIndexLabel]" DataType="Entity" LinkedEntityDef="enbridge_TurnoverIndex.TurnoverIndex" IsConfigurable="true" ReferenceType="Link" />
        <Attribute Name="DomainPartition" DataType="Entity" LinkedEntityDef="kahua_Project.Project" ReferenceType="Link" />
        <Attribute Name="Scope" Label="[FieldScopeLabel]" Description="[FieldScopeLabelDescription]" DataType="Entity" LinkedEntityDef="enbridge_ScopeIndex.Scope" IsConfigurable="true" />
        <Attribute Name="System" Label="[FieldSystemLabel]" Description="[FieldSystemLabelDescription]" DataType="Entity" LinkedEntityDef="kahua_AssetManager_Systems.System" IsConfigurable="true" />
        <Attribute Name="Reason" Label="[AttributeReasonLabel]" Description="[AttributeReasonDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.Reason" />
        <Attribute Name="TurnoverIndexCategory" Label="[FieldTurnoverIndexCategoryLabel]" Description="[FieldTurnoverIndexCategoryLabel]" DataType="Lookup" IsConfigurable="true" LookupListName="enbridge_TurnoverIndex.TurnoverIndex_CategoryLookup" />
        <Attribute Name="SubmittingVendor" Label="[AttributeSubmittingVendorLabel]" Description="[AttributeSubmittingVendorDescription]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" />
        <Attribute Name="RecordBoxBarcode" Label="[AttributeRecordBoxBarcodeLabel]" Description="[AttributeRecordBoxBarcodeLabel]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Subject" Label="[AttributeSubjectLabel]" Description="[AttributeSubjectDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Revision" Label="[AttributeRevisionLabel]" Description="[AttributeRevisionDescription]" DataType="Text" IsConfigurable="true" MaxLength="30" />
        <Attribute Name="Status" Label="[AttributeStatusLabel]" Description="[AttributeStatusDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_PackagedSubmittals.SubmittalStatus" />
        <Attribute Name="SentToVendor" DataType="Boolean">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DomainCompany" DataType="Entity" LinkedEntityDef="kahua_CompanyManager.kahua_Company" ReferenceType="Link" />
      </Attributes>
      <ParentEntityDefs>
        <EntityDef Ref="kahua_AEC_SubmittalItem.SubmittalItem" />
        <EntityDef Ref="kahua_Workflow.kahua_TaskWorkflow" />
      </ParentEntityDefs>
    </EntityDef>
    <EntityDef Name="SubmittalItemRevision" IsAttachable="False" EntityType="Document">
      <Attributes>
        <Attribute Name="Number" Label="[AttributeNumberLabel]" Description="[AttributeNumberDescription]" DataType="Text" MaxLength="30" />
        <Attribute Name="Revision" Label="[AttributeRevisionLabel]" Description="[AttributeRevisionDescription]" DataType="Text" IsConfigurable="true" MaxLength="30" />
        <Attribute Name="CurrentRevision" Label="[AttributeCurrentRevisionLabel]" Description="[AttributeCurrentRevisionDescription]" DataType="Boolean" IsConfigurable="true" MaxLength="30" />
        <Attribute Name="Subject" Label="[AttributeSubjectLabel]" Description="[AttributeSubjectDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Description" Label="[AttributeDescriptionLabel]" Description="[AttributeDescriptionDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="SubmittalPackage" Label="[AttributeSubmittalPackageLabel]" Description="[AttributeSubmittalPackageDescription]" DataType="Entity" LinkedEntityDef="kahua_AEC_SubmittalPackage.SubmittalPackage" />
        <Attribute Name="Status" Label="[AttributeStatusLabel]" Description="[AttributeStatusDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_PackagedSubmittals.SubmittalStatus" />
        <Attribute Name="Reason" Label="[AttributeReasonLabel]" Description="[AttributeReasonDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.Reason" />
        <Attribute Name="SubmittalCoordinator" Label="[AttributeSubmittalCoordinatorLabel]" Description="[AttributeSubmittalCoordinatorDescription]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" />
        <Attribute Name="Location" Label="[AttributeLocationLabel]" Description="[AttributeLocationDescription]" DataType="Entity" LinkedEntityDef="kahua_Location.Location" IsConfigurable="true" Cardinality="OneToMany" />
        <Attribute Name="Notes" Label="[AttributeNotesLabel]" Description="[AttributeNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="RequestedfromVendor" Label="[AttributeRequestedfromVendorLabel]" Description="[AttributeRequestedfromVendorDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="ApprovedSubmittalRequiredBy" Label="[AttributeApprovedSubmittalRequiredByLabel]" Description="[AttributeApprovedSubmittalRequiredByDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="SubmittingVendor" Label="[AttributeSubmittingVendorLabel]" Description="[AttributeSubmittingVendorDescription]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" />
        <Attribute Name="VendorNotes" Label="[AttributeVendorNotesLabel]" Description="[AttributeVendorNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="ResponseDistribution" Label="[AttributeResponseDistributionLabel]" Description="[AttributeResponseDistributionDescription]" DataType="Entity" LinkedEntityDef="kahua_MessageManager.kahua_MessageParticipant" IsConfigurable="true" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="OfficialReviewer" Label="[AttributeOfficialReviewerLabel]" Description="[AttributeOfficialReviewerDescription]" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" IsConfigurable="true" Cardinality="OneToMany" />
        <Attribute Name="InstructionsToOfficial" Label="[AttributeInstructionsToOfficialLabel]" Description="[AttributeInstructionToOfficialDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Response" Label="[AttributeResponseLabel]" Description="[AttributeResponseDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
        <Attribute Name="ResponseNotes" Label="[AttributeResponseNotesLabel]" Description="[AttributeResponseNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="InstructionsToReviewers" Label="[AttributeInstructionsToReviewersLabel]" Description="[AttributeInstructionToReviewersDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="Reviewers" Label="[AttributeReviewersLabel]" Description="[AttributeReviewersDescription]" DataType="Entity" LinkedEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="Comments" DataType="Entity" LinkedEntityDef="kahua_Core.kahua_Comment" ReferenceType="Owner" LinkedEntityDefMode="Attribute" Cardinality="OneToMany" />
        <Attribute Name="SubmissionDueDate" Label="[AttributeSubmissionDueDateLabel]" Description="[AttributeSubmissionDueDateDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateSubmittedByVendor" Label="[AttributeDateSubmittedByVendorLabel]" Description="[AttributeDateSubmittedByVendorDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateSendToOfficialBy" Label="[AttributeDateSendToOfficialByLabel]" Description="[AttributeDateSendToOfficialByDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateSubmittedToOfficial" Label="[AttributeDateSubmittedToOfficialLabel]" Description="[AttributeDateSubmittedToOfficialDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="ReviewPeriod" Label="[AttributeReviewPeriodLabel]" Description="[AttributeReviewPeriodDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="DaysInReview" Label="[AttributeDaysInReviewLabel]" Description="[AttributeDaysInReviewDescription]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="ResponseDueDate" Label="[AttributeResponseDueDateLabel]" Description="[AttributeResponseDueDateDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="OfficialResponseDate" Label="[FieldOfficialResponseDateLabel]" Description="[FieldOfficialResponseDateLabel]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="ConsultantReviewPeriod" Label="[FieldConsultantReviewPeriodLabel]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="DateReturnedToVendor" Label="[AttributeDateReturnedToVendorLabel]" Description="[AttributeDateReturnedToVendorDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateCompleted" Label="[AttributeDateCompletedLabel]" Description="[AttributeDateCompletedDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="DateLastDistributed" Label="[AttributeDateLastDistributedLabel]" Description="[AttributeDateLastDistributedDescription]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="ShortLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[Number].[Revision] - [Subject]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="LongLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[EntityDefSubmittalItemLabel]: [Number] - [PackageNumber]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DetailLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[LongLabel]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="AppNameLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[SubmittalAppNameLabel]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="RecycleBinLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[DetailLabel]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="OfficialResponse" Label="[AttributeOfficialResponseLabel]" Description="[AttributeOfficialResponseDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.SubmittalItemResponse" />
        <Attribute Name="OfficialNotes" Label="[AttributeOfficialNotesLabel]" Description="[AttributeOfficialNotesDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="AutosendToConsultants" Label="[FieldAutosendToConsultantReviewersLabel]" Description="[FieldAutosendToConsultantReviewersDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="AutosendToOfficial" Label="[FieldAutoSendToOfficialReviewerLabel]" Description="[FieldAutoSendToOfficialReviewerDescription]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ConsultantCanSeeAllResponses" Label="[AttributeConsultantCanSeeAllResponsesLabel]" Description="[AttributeConsultantCanSeeAllResponsesLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="true" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="ConsultantsCanAddConsultants" Label="[AttributeConsultantsCanAddConsultantsLabel]" Description="[AttributeConsultantsCanAddConsultantsLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="InternalProcessingDuration" Label="[AttributeInternalProcessingDurationLabel]" Description="[AttributeInternalProcessingDurationLabel]" DataType="Integer" IsConfigurable="true" />
        <Attribute Name="NotifyAllReviewers" Label="[AttributeNotifyAllReviewersLabel]" Description="[AttributeNotifyAllReviewersLabel]" DataType="Boolean" IsConfigurable="true">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="NotifyOfResponse" DataType="Entity" LinkedEntityDef="kahua_PeopleManager.kahua_Contact" Cardinality="OneToMany" />
        <Attribute Name="ReleaseDate" DataType="Date" />
        <Attribute Name="ReviewerResponseDate" Label="[AttributeDateRespondedLabel]" Description="[AttributeDateRespondedLabel]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="SubmissionNotes" Label="[FieldSubmissionNotesLabel]" DataType="Text" />
        <Attribute Name="SubmittedFromVendor" DataType="Boolean" />
        <Attribute Name="DateSentToReviewers" Label="[AttributeDateSentLabel]" Description="[AttributeDateSentLabel]" DataType="Date" IsConfigurable="true" />
        <Attribute Name="Reference" Label="[AttributeReferencesLabel]" Description="[AttributeReportedByDescription]" DataType="Text" />
        <Attribute Name="DisplayConsultantResponseUponCompletion" Label="[FieldDisplayConsultantResponseUponCompletionLabel]" DataType="Boolean" IsConfigurable="true" />
        <Attribute Name="DisplayConsultantResponseUponConsultantResponse" Label="[FieldDisplayConsultantResponseUponConsultantResponseLabel]" DataType="Boolean" IsConfigurable="true" />
        <Attribute Name="WorkPackage" Label="[AttributeWorkPackageLabel]" Description="[AttributeWorkPackageDescription]" DataType="Entity" LinkedEntityDef="kahua_WorkPackage.WorkPackage" IsConfigurable="true" />
        <Attribute Name="LinearLocation" Label="[FieldLinearLocationLabel]" Description="[FieldLinearLocationDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="HardCopiesRequired" Label="[FieldHardCopiesRequiredLabel]" Description="[FieldHardCopiesRequiredDescription]" DataType="Boolean" IsConfigurable="true" />
        <Attribute Name="MaterialRequistionNumber" Label="[FieldMaterialRequistionNumberLabel]" Description="[FieldMaterialRequistionNumberDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="OracleRequisition" Label="[FieldOracleRequisitionLabel]" Description="[FieldOracleRequisitionDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="PurchaseOrder" Label="[FieldPurchaseOrderLabel]" Description="[FieldPurchaseOrderDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="QualityValidation" Label="[FieldQualityValidationLabel]" Description="[FieldQualityValidationDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.QualityValidationList" />
        <Attribute Name="QualityValidationReason" Label="[FieldQualityValidationReasonLabel]" Description="[FieldQualityValidationReasonDescription]" DataType="Lookup" IsConfigurable="true" LookupListName="kahua_AEC_SubmittalItem.QualityValidationReasonList" />
        <Attribute Name="QualityComment" Label="[FieldQualityCommentLabel]" Description="[FieldQualityCommentDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="TurnoverIndexCategory" Label="[FieldTurnoverIndexCategoryLabel]" Description="[FieldTurnoverIndexCategoryLabel]" DataType="Lookup" IsConfigurable="true" LookupListName="enbridge_TurnoverIndex.TurnoverIndex_CategoryLookup" />
        <Attribute Name="TurnoverIndex" Label="[FieldTurnoverIndexLabel]" Description="[FieldTurnoverIndexLabel]" DataType="Entity" LinkedEntityDef="enbridge_TurnoverIndex.TurnoverIndex" IsConfigurable="true" ReferenceType="Link" />
        <Attribute Name="RecordBoxBarcode" Label="[AttributeRecordBoxBarcodeLabel]" Description="[AttributeRecordBoxBarcodeLabel]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="DomainCompany" DataType="Entity" LinkedEntityDef="kahua_CompanyManager.kahua_Company" ReferenceType="Link" />
        <Attribute Name="MaterialRequisitionNumber" Label="[FieldMaterialRequisitionNumberLabel]" Description="[FieldMaterialRequisitionNumberDescription]" DataType="Text" IsConfigurable="true" />
        <Attribute Name="PurchaseOrderNumber" Label="[FieldPurchaseOrderNumberLabel]" Description="[FieldPurchaseOrderNumberDescription]" DataType="Text" IsConfigurable="true" />
      </Attributes>
      <EntityDef.UnrestrictedAttributes Values="Number,Revision,Subject" />
    </EntityDef>
    <EntityDef Name="ReviseSubmittalForm" IsAttachable="False" IsConfigurable="True" Description="[EntityDefReviseSubmittalItemFormDescription]" Label="[EntityDefReviseSubmittalItemFormLabel]" LabelPlural="[EntityDefReviseSubmittalItemFormLabelPlural]" LabelAbbv="[EntityDefReviseSubmittalItemFormLabelAbbv]" LabelAbbvPlural="[ReviseSubmittalItemFormLabelAbbvPlural]" EntityType="Document">
      <Attributes>
        <Attribute Name="IsChecked" DataType="Boolean">
          <DefaultValue>
            <DefaultBoolean Value="false" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="Number" Label="[AttributeNumberLabel]" Description="[AttributeNumberDescription]" DataType="Text" MaxLength="30" />
        <Attribute Name="Subject" Label="[AttributeSubjectLabel]" Description="[AttributeSubjectDescription]" DataType="Text" />
        <Attribute Name="Response" Label="[AttributeResponseLabel]" Description="[AttributeResponseDescription]" DataType="Lookup" LookupListName="kahua_AEC_Submittal.SubmittalItemResponse" />
        <Attribute Name="Reviewers" Label="[AttributeReviewersLabel]" Description="[AttributeReviewersDescription]" DataType="Entity" LinkedEntityDef="kahua_AEC_PackagedSubmittals.SubmittalReviewer" ReferenceType="Owner" Cardinality="OneToMany" />
        <Attribute Name="Revision" Label="[AttributeRevisionLabel]" Description="[AttributeRevisionDescription]" DataType="Text" MaxLength="30" />
        <Attribute Name="Status" Label="[AttributeStatusLabel]" Description="[AttributeStatusDescription]" DataType="Lookup" LookupListName="kahua_AEC_PackagedSubmittals.SubmittalStatus" />
        <Attribute Name="NewRevision" Label="[AttributeRevisionLabel]" Description="[AttributeRevisionDescription]" DataType="Text" MaxLength="30" />
        <Attribute Name="ResponseDueDate" Label="[AttributeResponseDueDateLabel]" Description="[AttributeResponseDueDateDescription]" DataType="Date" />
        <Attribute Name="SubmissionDueDate" Label="[AttributeSubmissionDueDateLabel]" Description="[AttributeSubmissionDueDateDescription]" DataType="Date" />
        <Attribute Name="VendorResubmissionPeriod" Label="[FieldVendorResubmissionPeriodLabel]" Description="[FieldVendorResubmissionPeriodDescription]" DataType="Integer" />
        <Attribute Name="ShortLabel" IsConfigurable="true">
          <DefaultValue>
            <DefaultText Text="[Number].[Revision] - [Subject]" />
          </DefaultValue>
        </Attribute>
        <Attribute Name="DomainCompany" DataType="Entity" LinkedEntityDef="kahua_CompanyManager.kahua_Company" />
      </Attributes>
    </EntityDef>
  </EntityDefs>
  <LookupLists>
    <LookupList Name="Status" ExtensionMode="Override" Label="[FieldStatusLabel]" Description="[FieldStatusLabel]">
      <Value />
      <Value>Draft</Value>
      <Value>Pending Assignment</Value>
      <Value>In Review</Value>
      <Value>Rejected: Not Approved</Value>
      <Value>On Hold</Value>
      <Value>Returned</Value>
      <Value>Complete</Value>
      <Value>Previously Approved</Value>
    </LookupList>
    <LookupList Name="SubmittalItemType" ExtensionMode="Override" Label="[FieldTypeLabel]" Description="[FieldTypeLabel]" ChildLevels="2">
      <Value />
      <Value>A</Value>
      <Value>B</Value>
      <Value>C</Value>
    </LookupList>
    <LookupList Name="QualityValidationList" Label="[FieldQualityValidationLabel]" Description="[FieldQualityValidationLabel]">
      <Value />
      <Value>Quality Validated</Value>
      <Value>AIM Validated</Value>
      <Value>Quality Flagged</Value>
    </LookupList>
    <LookupList Name="QualityValidationReasonList" Label="[FieldQualityValidationReasonLabel]" Description="[FieldQualityValidationReasonLabel]">
      <Value />
      <Value>Redline drawing is not updated</Value>
      <Value>Insufficient detail within response</Value>
      <Value>Does not align to with specifications/codes/standard requirements</Value>
      <Value>Improper workflow</Value>
      <Value>Not approved by appropriate responder</Value>
      <Value>Insufficient records provided to close RFI</Value>
    </LookupList>
    <LookupList Name="Reason" ExtensionMode="Override" Label="[LookupListReasonLabel]" Description="[LookupListReasonDescription]">
      <Value />
      <Value>As Requested</Value>
      <Value>For Acceptance</Value>
      <Value>IFA - Issued for Approval</Value>
      <Value>IFAB - Issued For As-Built</Value>
      <Value>IFC - Issued for Construction</Value>
      <Value>IFF - Issued for Final</Value>
      <Value>IFI - Issued for Information</Value>
      <Value>IFQ - Issued for Quote</Value>
      <Value>IFP - Issued for Purchase</Value>
      <Value>IFR - Issued for Review</Value>
      <Value>IFU - Issued for Use</Value>
    </LookupList>
  </LookupLists>
  <PortableViews>
    <PortableView Name="kahua_AEC_SubmittalItem.SubmittalItemPortableView" Label="[SubmittalViewReportLabel]" DefaultLogoOption="DomainLogoOption">
      <Key />
      <LogoOptions>
        <LogoOption Name="DefaultLogoOption" Label="[LogoOptionDefaultLabel]" Type="Default">
          <Key />
        </LogoOption>
        <LogoOption Name="DomainLogoOption" Label="[LogoOptionDomainLabel]" Type="Domain">
          <Key />
        </LogoOption>
        <LogoOption Name="ProjectLogoOption" Label="[LogoOptionProjectLabel]" Type="Project">
          <Key />
        </LogoOption>
        <LogoOption Name="SubmittingVendorLogoOption" AttributePath="SubmittalItem.SubmittingVendor" Label="[AttributeSubmittingVendorLabel]" Type="Attribute">
          <Key />
        </LogoOption>
        <LogoOption Name="SubmittalCoordinatorLogoOption" AttributePath="SubmittalItem.SubmittalCoordinator" Label="[AttributeSubmittalCoordinatorLabel]" Type="Attribute">
          <Key />
        </LogoOption>
        <LogoOption Name="OfficialReviewerLogoOption" AttributePath="SubmittalItem.OfficialReviewer" Label="[AttributeOfficialReviewerDescription]" Type="Attribute">
          <Key />
        </LogoOption>
      </LogoOptions>
    </PortableView>
  </PortableViews>
  <DataStore>
    <Tables>
      <Table EntityDefName="kahua_AEC_SubmittalItem.SubmittalItem" IncludeEntityLinkUrl="true">
        <Columns>
          <Column AttributeName="Number" />
          <Column AttributeName="Revision" />
          <Column AttributeName="CurrentRevision" />
          <Column AttributeName="Subject" />
          <Column AttributeName="Description" />
          <Column AttributeName="SubmittalPackage" />
          <Column AttributeName="CompletedPackageRevision" />
          <Column AttributeName="Status" />
          <Column AttributeName="Reason" />
          <Column AttributeName="Priority" />
          <Column AttributeName="SubmittalCoordinator" />
          <Column AttributeName="Category" />
          <Column AttributeName="Type" />
          <Column AttributeName="IsChecked" />
          <Column AttributeName="Location" />
          <Column AttributeName="CSICode" />
          <Column AttributeName="OmniClass" />
          <Column AttributeName="CopiesRequired" />
          <Column AttributeName="CopiesReturned" />
          <Column AttributeName="Notes" />
          <Column AttributeName="IncludeWithOMManual" />
          <Column AttributeName="DateRequiredOnsite" />
          <Column AttributeName="RequestedfromVendor" />
          <Column AttributeName="ApprovedSubmittalRequiredBy" />
          <Column AttributeName="IsCriticalPath" />
          <Column AttributeName="IsMaterialTracking" />
          <Column AttributeName="IsAsSpecified" />
          <Column AttributeName="Substitution" />
          <Column AttributeName="AssetTracking" />
          <Column AttributeName="SubmittingVendor" />
          <Column AttributeName="CopiesSubmitted" />
          <Column AttributeName="LeadTime" />
          <Column AttributeName="Manufacturer" />
          <Column AttributeName="ModelNumber" />
          <Column AttributeName="VendorNotes" />
          <Column AttributeName="ResponseDistribution" />
          <Column AttributeName="OfficialReviewer" />
          <Column AttributeName="InstructionsToOfficial" />
          <Column AttributeName="Response" />
          <Column AttributeName="ResponseNotes" />
          <Column AttributeName="OwnersRep" />
          <Column AttributeName="InstructionsToOwnersRep" />
          <Column AttributeName="OwnersRepNotes" />
          <Column AttributeName="InstructionsToReviewers" />
          <Column AttributeName="Reviewers" />
          <Column AttributeName="Comments" />
          <Column AttributeName="SubmissionDueDate" />
          <Column AttributeName="DateSubmittedByVendor" />
          <Column AttributeName="DateSendToOfficialBy" />
          <Column AttributeName="DateSubmittedToOfficial" />
          <Column AttributeName="DateSubmittedToOwnersRep" />
          <Column AttributeName="ReviewPeriod" />
          <Column AttributeName="ResponseDueDate" />
          <Column AttributeName="OfficialResponseDate" />
          <Column AttributeName="OwnersResponseDueDate" />
          <Column AttributeName="OwnersResponseDate" />
          <Column AttributeName="DateReturnedToVendor" />
          <Column AttributeName="Revisions" />
          <Column AttributeName="DateSubmittedToGCCM" DataType="AutoNumber" />
          <Column AttributeName="GCCMReviewer" DataType="AutoNumber" />
          <Column AttributeName="GCCMResponse" DataType="AutoNumber" />
          <Column AttributeName="GCCMNotes" DataType="AutoNumber" />
          <Column AttributeName="DateSubmittedByVendorVendor" DataType="AutoNumber" />
          <Column AttributeName="UniversalLookup1" />
          <Column AttributeName="UniversalLookup2" />
          <Column AttributeName="UniversalLookup3" />
          <Column AttributeName="UniversalLookup4" />
          <Column AttributeName="UniversalLookup5" />
          <Column AttributeName="OutwardReferences" />
          <Column AttributeName="Reference" DataType="AutoNumber" />
          <Column AttributeName="ModelNumberOD" DataType="AutoNumber" />
          <Column AttributeName="DateCompleted" />
          <Column AttributeName="LinearLocation" DataType="AutoNumber" />
          <Column AttributeName="HardCopiesRequired" DataType="AutoNumber" />
          <Column AttributeName="QualityValidation" DataType="AutoNumber" />
          <Column AttributeName="QualityValidationReason" DataType="AutoNumber" />
          <Column AttributeName="QualityComment" DataType="AutoNumber" />
          <Column AttributeName="TurnoverIndexCategory" DataType="AutoNumber" />
          <Column AttributeName="TurnoverIndex" DataType="AutoNumber" />
          <Column AttributeName="Scope" DataType="AutoNumber" />
          <Column AttributeName="System" DataType="AutoNumber" />
          <Column AttributeName="Asset" DataType="AutoNumber" />
        </Columns>
      </Table>
    </Tables>
  </DataStore>
  <App.Settings>
    <Text Name="OfficialReviewPeriodCalculationSetting" Label="[SettingOfficialResponsePeriodCalendarLabel]" DefaultValue="CalendarDays">
      <Text.Options>
        <Option Value="CalendarDays" Label="[SettingOptionCalendarDaysLabel]" />
        <Option Value="OfficeDays" Label="[SettingOptionOfficeDaysLabel]" />
        <Option Value="JobSiteDays" Label="[SettingOptionWorkDaysLabel]" />
      </Text.Options>
    </Text>
    <Text Name="ConsultantReviewPeriodCalculationSetting" Label="[SettingConsultantResponsePeriodCalendarLabel]" DefaultValue="CalendarDays">
      <Text.Options>
        <Option Value="CalendarDays" Label="[SettingOptionCalendarDaysLabel]" />
        <Option Value="OfficeDays" Label="[SettingOptionOfficeDaysLabel]" />
        <Option Value="JobSiteDays" Label="[SettingOptionWorkDaysLabel]" />
      </Text.Options>
    </Text>
    <Text Name="VendorSubmissionPeriodCalculationSetting" Label="[SettingVendorSubmissionPeriodCalendarLabel]" DefaultValue="CalendarDays">
      <Text.Options>
        <Option Value="CalendarDays" Label="[SettingOptionCalendarDaysLabel]" />
        <Option Value="OfficeDays" Label="[SettingOptionOfficeDaysLabel]" />
        <Option Value="JobSiteDays" Label="[SettingOptionWorkDaysLabel]" />
      </Text.Options>
    </Text>
    <Text Name="DaysInReviewCalculationSetting" Label="[SettingDaysInReviewCalendarLabel]" DefaultValue="CalendarDays">
      <Text.Options>
        <Option Value="CalendarDays" Label="[SettingOptionCalendarDaysLabel]" />
        <Option Value="OfficeDays" Label="[SettingOptionOfficeDaysLabel]" />
        <Option Value="JobSiteDays" Label="[SettingOptionWorkDaysLabel]" />
      </Text.Options>
    </Text>
    <Boolean Name="SettingSubmittalCoordinatorMustBeDomainUser" Label="[SettingSubmittalCoordinatorMustBeDomainUser]" DefaultValue="False" />
    <Boolean Name="SettingDisableDistributedStatus" Label="[SettingDisableDistributedStatusLabel]" DefaultValue="False" />
    <Boolean Name="SettingRequireConsultantItemResponse" Label="[SettingRequireConsultantItemResponse]" DefaultValue="True" />
    <Boolean Name="RequireConsultantItemResponseNotes" Label="[AppSettingRequireConsultantItemResponseNotesLabelKey]" DefaultValue="True" />
  </App.Settings>
  <App.Media />
  <App.Feeds>
    <Feeds.Filters>
      <Filter By="AssignedTo.Company" Name="Company" Label="[AttributeCompanyLabel]" />
    </Feeds.Filters>
    <Group Label="[FeedSubmittalItemByAssignedToLabel]" Name="SubmittalItemsByAssignedTo" EntityDef="kahua_AEC_SubmittalItem.SubmittalItem" By="AssignedTo.ContactFullNameLabel" KeyTo="Key" IncludePartitionChildren="True">
      <Group.Expressions>
        <Count To="Count" />
      </Group.Expressions>
      <Group.Groupings>
        <Grouping Path="AssignedTo.ContactFullNameLabel" />
      </Group.Groupings>
    </Group>
  </App.Feeds>
  <App.Snapshot />
  <App.PartsReferences>
    <PartsReference AppName="enbridge_AEC_Packaged_Submittals_Base" />
  </App.PartsReferences>
  <Dynamic />
</App>